###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.3.10338/W32 for 8051         23/Jan/2022  21:24:52 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\Source\mqtt.c         #
#    Command line       =  -f e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ            #
#                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRU #
#                          E -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8       #
#                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)    #
#                          -f e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          Tools\CC2530DB\f8wConfig.cfg (-DZIGBEEPRO          #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 e:\imtht\Documents\Code\Zig #
#                          bee\ZStack-2.5.1a\Projects\zstack\Samples\SampleAp #
#                          p\Source\mqtt.c -D ZTOOL_P1 -D xMT_TASK -D         #
#                          xMT_SYS_FUNC -D xMT_ZDO_FUNC -D                    #
#                          LCD_SUPPORTED=DEBUG -lC e:\imtht\Documents\Code\Zi #
#                          gbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleA #
#                          pp\CC2530DB\CoordinatorEB\List\ -lA                #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\CoordinatorE #
#                          B\List\ --diag_suppress Pe001,Pa010 -o             #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\CoordinatorE #
#                          B\Obj\ -e --no_cse --no_unroll --no_inline         #
#                          --no_code_motion --no_tbaa --debug --core=plain    #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I e:\imtht\Documents\Code\Zi #
#                          gbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleA #
#                          pp\CC2530DB\ -I e:\imtht\Documents\Code\Zigbee\ZSt #
#                          ack-2.5.1a\Projects\zstack\Samples\SampleApp\CC253 #
#                          0DB\..\Source\ -I e:\imtht\Documents\Code\Zigbee\Z #
#                          Stack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2 #
#                          530DB\..\..\..\ZMain\TI2530DB\ -I                  #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\hal\include\ -I                      #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\hal\target\CC2530EB\ -I              #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\include\ -I                      #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\high_level\ -I                   #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\low_level\srf04\ -I              #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\low_level\srf04\single_chip\ -I  #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mt\ -I e:\imtht\Documents\Code\Zigbe #
#                          e\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\ #
#                          CC2530DB\..\..\..\..\..\Components\osal\include\   #
#                          -I e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Pr #
#                          ojects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ #
#                          ..\..\Components\services\saddr\ -I                #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\services\sdata\ -I                   #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\af\ -I                         #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\nwk\ -I                        #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\sapi\ -I                       #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\sec\ -I                        #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\sys\ -I                        #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\zdo\ -I                        #
#                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\zmac\ -I e:\imtht\Documents\Code\Zig #
#                          bee\ZStack-2.5.1a\Projects\zstack\Samples\SampleAp #
#                          p\CC2530DB\..\..\..\..\..\Components\zmac\f8w\ -On #
#    List file          =  e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\CoordinatorE #
#                          B\List\mqtt.lst                                    #
#    Object file        =  e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proje #
#                          cts\zstack\Samples\SampleApp\CC2530DB\CoordinatorE #
#                          B\Obj\mqtt.r51                                     #
#                                                                             #
#                                                                             #
###############################################################################

e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c
      1          /**
      2          ************************************************************
      3          ************************************************************
      4          ************************************************************
      5          *	文件名： 	onenet.c
      6          *
      7          *	作者： 		
      8          *
      9          *	日期： 		2017-05-08
     10          *
     11          *	版本： 		V1.1
     12          *
     13          *	说明： 		与onenet平台的数据交互接口层
     14          *
     15          *	修改记录：	V1.0：协议封装、返回判断都在同一个文件，并且不同协议接口不同。
     16          *				V1.1：提供统一接口供应用层使用，根据不同协议文件来封装协议相关的内容。
     17          ************************************************************
     18          ************************************************************
     19          ************************************************************
     20          **/
     21          //协议文件
     22          #include "mqtt.h"
     23          #include "mqttkit.h"
     24          
     25          //C库
     26          #include <string.h>
     27          #include <stdio.h>
     28          
     29          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     30          uint8 packet_buff[max_packet_len]={0};
   \                     packet_buff:
   \   000000                DS 300
   \   00012C                REQUIRE __INIT_XDATA_Z
     31          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     32          char cmdid_topic[MAX_CMDID_TOPIC_LEN+1] = {0};
   \                     cmdid_topic:
   \   000000                DS 71
   \   000047                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     33          char req_payload[MAX_REQ_PAYLOAD_LEN+1] = {0};
   \                     req_payload:
   \   000000                DS 151
   \   000097                REQUIRE __INIT_XDATA_Z
     34          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     35          unsigned char mqttUsername[30]={0};
   \                     mqttUsername:
   \   000000                DS 30
   \   00001E                REQUIRE __INIT_XDATA_Z
     36          //==========================================================
     37          //	函数名称：	OneNet_DevLink
     38          //
     39          //	函数功能：	与onenet创建连接
     40          //
     41          //	入口参数：	无
     42          //
     43          //	返回参数：	0-成功	1-失败
     44          //
     45          //	说明：		与onenet平台建立连接
     46          //==========================================================

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     47          _Bool OneNet_DevLink(void)
   \                     OneNet_DevLink:
     48          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV     A,#-0xb
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
     49            MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   00000A   90....       MOV     DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>`
   \   00000D   C082         PUSH    DPL
   \   00000F   C083         PUSH    DPH
   \   000011   85..82       MOV     DPL,?XSP + 0
   \   000014   85..83       MOV     DPH,?XSP + 1
   \   000017   AC82         MOV     R4,DPL
   \   000019   AD83         MOV     R5,DPH
   \   00001B   D083         POP     DPH
   \   00001D   D082         POP     DPL
   \   00001F   740B         MOV     A,#0xb
   \   000021   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
     50            
     51            unsigned char *dataPtr;
     52            
     53            _Bool status = 1;
   \   000024   D2..         SETB    ?VB.0
     54            
     55            sprintf(mqttUsername, "%s&%s", DeviceName, ProductKey);
                           ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \   000026                ; Setup parameters for call to function sprintf
   \   000026   75....       MOV     ?V0 + 0,#`?<Constant "a1xaMw4YerO">` & 0xff
   \   000029   75....       MOV     ?V0 + 1,#(`?<Constant "a1xaMw4YerO">` >> 8) & 0xff
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000031   75....       MOV     ?V0 + 0,#`?<Constant "device">` & 0xff
   \   000034   75....       MOV     ?V0 + 1,#(`?<Constant "device">` >> 8) & 0xff
   \   000037   78..         MOV     R0,#?V0 + 0
   \   000039   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003C   7C..         MOV     R4,#`?<Constant "%s&%s">` & 0xff
   \   00003E   7D..         MOV     R5,#(`?<Constant "%s&%s">` >> 8) & 0xff
   \   000040   7A..         MOV     R2,#mqttUsername & 0xff
   \   000042   7B..         MOV     R3,#(mqttUsername >> 8) & 0xff
   \   000044   12....       LCALL   ??sprintf?relay
   \   000047   7404         MOV     A,#0x4
   \   000049   12....       LCALL   ?DEALLOC_XSTACK8
     56            debug( "OneNet_DevLink\r\nmqttUsername:%s, mqttPassword:%s,mqttClientId:%s\r\n", mqttUsername, mqttPassword, mqttClientId);
   \   00004C                ; Setup parameters for call to function debug
   \   00004C   75....       MOV     ?V0 + 0,#`?<Constant "a1xaMw4YerO.device|se...">` & 0xff
   \   00004F   75....       MOV     ?V0 + 1,#(`?<Constant "a1xaMw4YerO.device|se...">` >> 8) & 0xff
   \   000052   78..         MOV     R0,#?V0 + 0
   \   000054   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000057   75....       MOV     ?V0 + 0,#`?<Constant "91bf398bee0b02f1592d9...">` & 0xff
   \   00005A   75....       MOV     ?V0 + 1,#(`?<Constant "91bf398bee0b02f1592d9...">` >> 8) & 0xff
   \   00005D   78..         MOV     R0,#?V0 + 0
   \   00005F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000062   75....       MOV     ?V0 + 0,#mqttUsername & 0xff
   \   000065   75....       MOV     ?V0 + 1,#(mqttUsername >> 8) & 0xff
   \   000068   78..         MOV     R0,#?V0 + 0
   \   00006A   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006D   7A..         MOV     R2,#`?<Constant "OneNet_DevLink\\r\\nmqttU...">` & 0xff
   \   00006F   7B..         MOV     R3,#(`?<Constant "OneNet_DevLink\\r\\nmqttU...">` >> 8) & 0xff
   \   000071   12....       LCALL   ??debug?relay
   \   000074   7406         MOV     A,#0x6
   \   000076   12....       LCALL   ?DEALLOC_XSTACK8
     57            //接入onenet
     58            if(MQTT_PacketConnect(mqttUsername, mqttPassword, mqttClientId, 256, 0, MQTT_QOS_LEVEL0, NULL, NULL, 0, &mqttPacket) == 0)
                                         ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "signed char const *"
   \   000079                ; Setup parameters for call to function MQTT_PacketConnect
   \   000079   85..82       MOV     DPL,?XSP + 0
   \   00007C   85..83       MOV     DPH,?XSP + 1
   \   00007F   8582..       MOV     ?V0 + 0,DPL
   \   000082   8583..       MOV     ?V0 + 1,DPH
   \   000085   78..         MOV     R0,#?V0 + 0
   \   000087   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00008A   90....       MOV     DPTR,#__Constant_0
   \   00008D   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000090   E4           CLR     A
   \   000091   F5..         MOV     ?V0 + 0,A
   \   000093   F5..         MOV     ?V0 + 1,A
   \   000095   78..         MOV     R0,#?V0 + 0
   \   000097   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00009A   E4           CLR     A
   \   00009B   F5..         MOV     ?V0 + 0,A
   \   00009D   F5..         MOV     ?V0 + 1,A
   \   00009F   78..         MOV     R0,#?V0 + 0
   \   0000A1   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A4   75..00       MOV     ?V0 + 0,#0x0
   \   0000A7   78..         MOV     R0,#?V0 + 0
   \   0000A9   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000AC   75..00       MOV     ?V0 + 0,#0x0
   \   0000AF   75..01       MOV     ?V0 + 1,#0x1
   \   0000B2   78..         MOV     R0,#?V0 + 0
   \   0000B4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B7   75....       MOV     ?V0 + 0,#`?<Constant "a1xaMw4YerO.device|se...">` & 0xff
   \   0000BA   75....       MOV     ?V0 + 1,#(`?<Constant "a1xaMw4YerO.device|se...">` >> 8) & 0xff
   \   0000BD   78..         MOV     R0,#?V0 + 0
   \   0000BF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C2   7900         MOV     R1,#0x0
   \   0000C4   7C..         MOV     R4,#`?<Constant "91bf398bee0b02f1592d9...">` & 0xff
   \   0000C6   7D..         MOV     R5,#(`?<Constant "91bf398bee0b02f1592d9...">` >> 8) & 0xff
   \   0000C8   7A..         MOV     R2,#mqttUsername & 0xff
   \   0000CA   7B..         MOV     R3,#(mqttUsername >> 8) & 0xff
   \   0000CC   12....       LCALL   ??MQTT_PacketConnect?relay
   \   0000CF   740F         MOV     A,#0xf
   \   0000D1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000D4   E9           MOV     A,R1
   \   0000D5   702B         JNZ     ??OneNet_DevLink_0
     59            {
     60              ESP8266_SendData(mqttPacket._data, mqttPacket._len);			//上传平台
                                      ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"

    unsigned char *dataPtr;
                   ^
"e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",51  Warning[Pe177]: 
          variable "dataPtr" was declared but never referenced
   \   0000D7                ; Setup parameters for call to function ESP8266_SendData
   \   0000D7   7402         MOV     A,#0x2
   \   0000D9   12....       LCALL   ?XSTACK_DISP0_8
   \   0000DC   78..         MOV     R0,#?V0 + 0
   \   0000DE   12....       LCALL   ?L_MOV_X
   \   0000E1   AC..         MOV     R4,?V0 + 0
   \   0000E3   AD..         MOV     R5,?V0 + 1
   \   0000E5   85..82       MOV     DPL,?XSP + 0
   \   0000E8   85..83       MOV     DPH,?XSP + 1
   \   0000EB   E0           MOVX    A,@DPTR
   \   0000EC   FA           MOV     R2,A
   \   0000ED   A3           INC     DPTR
   \   0000EE   E0           MOVX    A,@DPTR
   \   0000EF   FB           MOV     R3,A
   \   0000F0   12....       LCALL   ??ESP8266_SendData?relay
     61              
     62              MQTT_DeleteBuffer(&mqttPacket);								//删包
   \   0000F3                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   0000F3   85..82       MOV     DPL,?XSP + 0
   \   0000F6   85..83       MOV     DPH,?XSP + 1
   \   0000F9   AA82         MOV     R2,DPL
   \   0000FB   AB83         MOV     R3,DPH
   \   0000FD   12....       LCALL   ??MQTT_DeleteBuffer?relay
   \   000100   8007         SJMP    ??OneNet_DevLink_1
     63            }
     64            else
     65              debug("WARN:	MQTT_PacketConnect Failed\r\n");
   \                     ??OneNet_DevLink_0:
   \   000102                ; Setup parameters for call to function debug
   \   000102   7A..         MOV     R2,#`?<Constant "WARN:\\tMQTT_PacketConn...">` & 0xff
   \   000104   7B..         MOV     R3,#(`?<Constant "WARN:\\tMQTT_PacketConn...">` >> 8) & 0xff
   \   000106   12....       LCALL   ??debug?relay
     66            
     67            return status;
   \                     ??OneNet_DevLink_1:
   \   000109   A2..         MOV     C,?VB.0
   \   00010B   740B         MOV     A,#0xb
   \   00010D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000110   7F04         MOV     R7,#0x4
   \   000112   02....       LJMP    ?BANKED_LEAVE_XDATA
     68            
     69          }
     70          
     71          
     72          //==========================================================
     73          //	函数名称：	OneNet_RevPro
     74          //
     75          //	函数功能：	平台返回数据检测
     76          //
     77          //	入口参数：	dataPtr：平台返回的数据
     78          //
     79          //	返回参数：	无
     80          //
     81          //	说明：		
     82          //==========================================================

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     83          void OneNet_RevPro(unsigned char *cmd)
   \                     OneNet_RevPro:
     84          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV     A,#-0x10
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
     85            MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, 0};								//协议包
   \   00000E   90....       MOV     DPTR,#`?<Constant {packet_buff, 0L, 300L, 0}>`
   \   000011   C082         PUSH    DPL
   \   000013   C083         PUSH    DPH
   \   000015   7405         MOV     A,#0x5
   \   000017   12....       LCALL   ?XSTACK_DISP0_8
   \   00001A   AC82         MOV     R4,DPL
   \   00001C   AD83         MOV     R5,DPH
   \   00001E   D083         POP     DPH
   \   000020   D082         POP     DPL
   \   000022   740B         MOV     A,#0xb
   \   000024   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
     86            
     87            unsigned short topic_len = 0;
   \   000027   7403         MOV     A,#0x3
   \   000029   12....       LCALL   ?XSTACK_DISP0_8
   \   00002C   7400         MOV     A,#0x0
   \   00002E   F0           MOVX    @DPTR,A
   \   00002F   A3           INC     DPTR
   \   000030   7400         MOV     A,#0x0
   \   000032   F0           MOVX    @DPTR,A
     88            unsigned short req_len = 0;
   \   000033   7401         MOV     A,#0x1
   \   000035   12....       LCALL   ?XSTACK_DISP0_8
   \   000038   7400         MOV     A,#0x0
   \   00003A   F0           MOVX    @DPTR,A
   \   00003B   A3           INC     DPTR
   \   00003C   7400         MOV     A,#0x0
   \   00003E   F0           MOVX    @DPTR,A
     89            
     90            unsigned char qos = 0;
   \   00003F   85..82       MOV     DPL,?XSP + 0
   \   000042   85..83       MOV     DPH,?XSP + 1
   \   000045   7400         MOV     A,#0x0
   \   000047   F0           MOVX    @DPTR,A
     91            static unsigned short pkt_id = 0;
     92            
     93            
     94            unsigned char type = 0;
   \   000048   75..00       MOV     ?V0 + 2,#0x0
     95            
     96            short result = 0;
   \   00004B   75..00       MOV     ?V0 + 0,#0x0
   \   00004E   75..00       MOV     ?V0 + 1,#0x0
     97            
     98            type = MQTT_UnPacketRecv(cmd);
   \   000051                ; Setup parameters for call to function MQTT_UnPacketRecv
   \   000051   EE           MOV     A,R6
   \   000052   FA           MOV     R2,A
   \   000053   EF           MOV     A,R7
   \   000054   FB           MOV     R3,A
   \   000055   12....       LCALL   ??MQTT_UnPacketRecv?relay
   \   000058   E9           MOV     A,R1
   \   000059   F5..         MOV     ?V0 + 2,A
     99            
    100            switch(type)
   \   00005B   E5..         MOV     A,?V0 + 2
   \   00005D   24FD         ADD     A,#-0x3
   \   00005F   7003         JNZ     $+5
   \   000061   02....       LJMP    ??OneNet_RevPro_0 & 0xFFFF
   \   000064   14           DEC     A
   \   000065   7003         JNZ     $+5
   \   000067   02....       LJMP    ??OneNet_RevPro_1 & 0xFFFF
   \   00006A   14           DEC     A
   \   00006B   7003         JNZ     $+5
   \   00006D   02....       LJMP    ??OneNet_RevPro_2 & 0xFFFF
   \   000070   14           DEC     A
   \   000071   7003         JNZ     $+5
   \   000073   02....       LJMP    ??OneNet_RevPro_3 & 0xFFFF
   \   000076   14           DEC     A
   \   000077   7003         JNZ     $+5
   \   000079   02....       LJMP    ??OneNet_RevPro_4 & 0xFFFF
   \   00007C   24FE         ADD     A,#-0x2
   \   00007E   7003         JNZ     $+5
   \   000080   02....       LJMP    ??OneNet_RevPro_5 & 0xFFFF
   \   000083   24FE         ADD     A,#-0x2
   \   000085   7003         JNZ     $+5
   \   000087   02....       LJMP    ??OneNet_RevPro_6 & 0xFFFF
   \   00008A   24FE         ADD     A,#-0x2
   \   00008C   7003         JNZ     $+5
   \   00008E   02....       LJMP    ??OneNet_RevPro_7 & 0xFFFF
   \   000091   24FE         ADD     A,#-0x2
   \   000093   6003         JZ      $+5
   \   000095   02....       LJMP    ??OneNet_RevPro_8 & 0xFFFF
    101            {
    102            case MQTT_PKT_CMD:															//命令下发
    103              {
    104                result = MQTT_UnPacketCmd(cmd, cmdid_topic, req_payload, &req_len);	//解出topic和消息体
                                                      ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "int8 *"

        result = MQTT_UnPacketCmd(cmd, cmdid_topic, req_payload, &req_len);	//解出topic和消息体
                                                    ^
"e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",104  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "int8 *"
   \   000098                ; Setup parameters for call to function MQTT_UnPacketCmd
   \   000098   7401         MOV     A,#0x1
   \   00009A   12....       LCALL   ?XSTACK_DISP0_8
   \   00009D   8582..       MOV     ?V0 + 4,DPL
   \   0000A0   8583..       MOV     ?V0 + 5,DPH
   \   0000A3   78..         MOV     R0,#?V0 + 4
   \   0000A5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A8   75....       MOV     ?V0 + 4,#req_payload & 0xff
   \   0000AB   75....       MOV     ?V0 + 5,#(req_payload >> 8) & 0xff
   \   0000AE   78..         MOV     R0,#?V0 + 4
   \   0000B0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000B3   7C..         MOV     R4,#cmdid_topic & 0xff
   \   0000B5   7D..         MOV     R5,#(cmdid_topic >> 8) & 0xff
   \   0000B7   EE           MOV     A,R6
   \   0000B8   FA           MOV     R2,A
   \   0000B9   EF           MOV     A,R7
   \   0000BA   FB           MOV     R3,A
   \   0000BB   12....       LCALL   ??MQTT_UnPacketCmd?relay
   \   0000BE   7404         MOV     A,#0x4
   \   0000C0   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000C3   E9           MOV     A,R1
   \   0000C4   F8           MOV     R0,A
   \   0000C5   7900         MOV     R1,#0x0
   \   0000C7   88..         MOV     ?V0 + 0,R0
   \   0000C9   89..         MOV     ?V0 + 1,R1
    105                if(result == 0)
   \   0000CB   E5..         MOV     A,?V0 + 0
   \   0000CD   45..         ORL     A,?V0 + 1
   \   0000CF   6003         JZ      $+5
   \   0000D1   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    106                {
    107                  debug("cmdid: %s, req: %s, req_len: %d\r\n", cmdid_topic, req_payload, req_len);
   \   0000D4                ; Setup parameters for call to function debug
   \   0000D4   7401         MOV     A,#0x1
   \   0000D6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D9   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0000DC   75....       MOV     ?V0 + 4,#req_payload & 0xff
   \   0000DF   75....       MOV     ?V0 + 5,#(req_payload >> 8) & 0xff
   \   0000E2   78..         MOV     R0,#?V0 + 4
   \   0000E4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E7   75....       MOV     ?V0 + 4,#cmdid_topic & 0xff
   \   0000EA   75....       MOV     ?V0 + 5,#(cmdid_topic >> 8) & 0xff
   \   0000ED   78..         MOV     R0,#?V0 + 4
   \   0000EF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F2   7A..         MOV     R2,#`?<Constant "cmdid: %s, req: %s, r...">` & 0xff
   \   0000F4   7B..         MOV     R3,#(`?<Constant "cmdid: %s, req: %s, r...">` >> 8) & 0xff
   \   0000F6   12....       LCALL   ??debug?relay
   \   0000F9   7406         MOV     A,#0x6
   \   0000FB   12....       LCALL   ?DEALLOC_XSTACK8
    108                  mqtt_rx(cmdid_topic, req_payload);
                                 ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "uint8 *"

          mqtt_rx(cmdid_topic, req_payload);
                               ^
"e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",108  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "uint8 *"
   \   0000FE                ; Setup parameters for call to function mqtt_rx
   \   0000FE   7C..         MOV     R4,#req_payload & 0xff
   \   000100   7D..         MOV     R5,#(req_payload >> 8) & 0xff
   \   000102   7A..         MOV     R2,#cmdid_topic & 0xff
   \   000104   7B..         MOV     R3,#(cmdid_topic >> 8) & 0xff
   \   000106   12....       LCALL   ??mqtt_rx?relay
    109          #if 1
    110                  
    111                  if(MQTT_PacketCmdResp(cmdid_topic, req_payload, &mqttPacket) == 0)	//命令回复组包
                                               ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "signed char const *"

          if(MQTT_PacketCmdResp(cmdid_topic, req_payload, &mqttPacket) == 0)	//命令回复组包
                                             ^
"e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",111  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "signed char const *"
   \   000109                ; Setup parameters for call to function MQTT_PacketCmdResp
   \   000109   7405         MOV     A,#0x5
   \   00010B   12....       LCALL   ?XSTACK_DISP0_8
   \   00010E   8582..       MOV     ?V0 + 4,DPL
   \   000111   8583..       MOV     ?V0 + 5,DPH
   \   000114   78..         MOV     R0,#?V0 + 4
   \   000116   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000119   7C..         MOV     R4,#req_payload & 0xff
   \   00011B   7D..         MOV     R5,#(req_payload >> 8) & 0xff
   \   00011D   7A..         MOV     R2,#cmdid_topic & 0xff
   \   00011F   7B..         MOV     R3,#(cmdid_topic >> 8) & 0xff
   \   000121   12....       LCALL   ??MQTT_PacketCmdResp?relay
   \   000124   7402         MOV     A,#0x2
   \   000126   12....       LCALL   ?DEALLOC_XSTACK8
   \   000129   E9           MOV     A,R1
   \   00012A   702E         JNZ     ??OneNet_RevPro_10
    112                  {
    113                    debug("Tips:	Send CmdResp\r\n");
   \   00012C                ; Setup parameters for call to function debug
   \   00012C   7A..         MOV     R2,#`?<Constant "Tips:\\tSend CmdResp\\r\\n">` & 0xff
   \   00012E   7B..         MOV     R3,#(`?<Constant "Tips:\\tSend CmdResp\\r\\n">` >> 8) & 0xff
   \   000130   12....       LCALL   ??debug?relay
    114                    
    115                    ESP8266_SendData(mqttPacket._data, mqttPacket._len);			//回复命令
                                            ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000133                ; Setup parameters for call to function ESP8266_SendData
   \   000133   7407         MOV     A,#0x7
   \   000135   12....       LCALL   ?XSTACK_DISP0_8
   \   000138   78..         MOV     R0,#?V0 + 4
   \   00013A   12....       LCALL   ?L_MOV_X
   \   00013D   AC..         MOV     R4,?V0 + 4
   \   00013F   AD..         MOV     R5,?V0 + 5
   \   000141   7405         MOV     A,#0x5
   \   000143   12....       LCALL   ?XSTACK_DISP0_8
   \   000146   E0           MOVX    A,@DPTR
   \   000147   FA           MOV     R2,A
   \   000148   A3           INC     DPTR
   \   000149   E0           MOVX    A,@DPTR
   \   00014A   FB           MOV     R3,A
   \   00014B   12....       LCALL   ??ESP8266_SendData?relay
    116                    MQTT_DeleteBuffer(&mqttPacket);									//删包
   \   00014E                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   00014E   7405         MOV     A,#0x5
   \   000150   12....       LCALL   ?XSTACK_DISP0_8
   \   000153   AA82         MOV     R2,DPL
   \   000155   AB83         MOV     R3,DPH
   \   000157   12....       LCALL   ??MQTT_DeleteBuffer?relay
    117                  }
    118          #endif
    119                }
    120              }
    121              break;
   \                     ??OneNet_RevPro_10:
   \   00015A   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    122              
    123            case MQTT_PKT_PUBACK:														//发送Publish消息，平台回复的Ack
    124              
    125              if(MQTT_UnPacketPublishAck(cmd) == 0)
   \                     ??OneNet_RevPro_1:
   \   00015D                ; Setup parameters for call to function MQTT_UnPacketPublishAck
   \   00015D   EE           MOV     A,R6
   \   00015E   FA           MOV     R2,A
   \   00015F   EF           MOV     A,R7
   \   000160   FB           MOV     R3,A
   \   000161   12....       LCALL   ??MQTT_UnPacketPublishAck?relay
   \   000164   E9           MOV     A,R1
   \   000165   7007         JNZ     ??OneNet_RevPro_11
    126                debug("Tips:	MQTT Publish Send OK\r\n");
   \   000167                ; Setup parameters for call to function debug
   \   000167   7A..         MOV     R2,#`?<Constant "Tips:\\tMQTT Publish Se...">` & 0xff
   \   000169   7B..         MOV     R3,#(`?<Constant "Tips:\\tMQTT Publish Se...">` >> 8) & 0xff
   \   00016B   12....       LCALL   ??debug?relay
    127              
    128              break;
   \                     ??OneNet_RevPro_11:
   \   00016E   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    129              
    130            case MQTT_PKT_PINGRESP:
    131              {
    132                debug("Tips:  HeartBeat OK\r\n");
   \                     ??OneNet_RevPro_7:
   \   000171                ; Setup parameters for call to function debug
   \   000171   7A..         MOV     R2,#`?<Constant "Tips:  HeartBeat OK\\r\\n">` & 0xff
   \   000173   7B..         MOV     R3,#(`?<Constant "Tips:  HeartBeat OK\\r\\n">` >> 8) & 0xff
   \   000175   12....       LCALL   ??debug?relay
    133                break;
   \   000178   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    134              }
    135              
    136            case MQTT_PKT_PUBLISH:  //接收的Publish消息
    137              {
    138                if(MQTT_UnPacketPublish(cmd, cmdid_topic, &topic_len, req_payload, &req_len, &qos, &pkt_id) == 0)
                                                    ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "int8 *"

        if(MQTT_UnPacketPublish(cmd, cmdid_topic, &topic_len, req_payload, &req_len, &qos, &pkt_id) == 0)
                                                              ^
"e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",138  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "int8 *"
   \                     ??OneNet_RevPro_0:
   \   00017B                ; Setup parameters for call to function MQTT_UnPacketPublish
   \   00017B   75....       MOV     ?V0 + 4,#??pkt_id & 0xff
   \   00017E   75....       MOV     ?V0 + 5,#(??pkt_id >> 8) & 0xff
   \   000181   78..         MOV     R0,#?V0 + 4
   \   000183   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000186   7402         MOV     A,#0x2
   \   000188   12....       LCALL   ?XSTACK_DISP0_8
   \   00018B   8582..       MOV     ?V0 + 4,DPL
   \   00018E   8583..       MOV     ?V0 + 5,DPH
   \   000191   78..         MOV     R0,#?V0 + 4
   \   000193   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000196   7405         MOV     A,#0x5
   \   000198   12....       LCALL   ?XSTACK_DISP0_8
   \   00019B   8582..       MOV     ?V0 + 4,DPL
   \   00019E   8583..       MOV     ?V0 + 5,DPH
   \   0001A1   78..         MOV     R0,#?V0 + 4
   \   0001A3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001A6   75....       MOV     ?V0 + 4,#req_payload & 0xff
   \   0001A9   75....       MOV     ?V0 + 5,#(req_payload >> 8) & 0xff
   \   0001AC   78..         MOV     R0,#?V0 + 4
   \   0001AE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001B1   740B         MOV     A,#0xb
   \   0001B3   12....       LCALL   ?XSTACK_DISP0_8
   \   0001B6   8582..       MOV     ?V0 + 4,DPL
   \   0001B9   8583..       MOV     ?V0 + 5,DPH
   \   0001BC   78..         MOV     R0,#?V0 + 4
   \   0001BE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C1   7C..         MOV     R4,#cmdid_topic & 0xff
   \   0001C3   7D..         MOV     R5,#(cmdid_topic >> 8) & 0xff
   \   0001C5   EE           MOV     A,R6
   \   0001C6   FA           MOV     R2,A
   \   0001C7   EF           MOV     A,R7
   \   0001C8   FB           MOV     R3,A
   \   0001C9   12....       LCALL   ??MQTT_UnPacketPublish?relay
   \   0001CC   740A         MOV     A,#0xa
   \   0001CE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001D1   E9           MOV     A,R1
   \   0001D2   6003         JZ      $+5
   \   0001D4   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    139                {
    140                  debug("topic: %s, topic_len: %d, payload: %s, payload_len: %d\r\n",cmdid_topic, topic_len, req_payload, req_len);
   \   0001D7                ; Setup parameters for call to function debug
   \   0001D7   7401         MOV     A,#0x1
   \   0001D9   12....       LCALL   ?XSTACK_DISP0_8
   \   0001DC   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0001DF   75....       MOV     ?V0 + 4,#req_payload & 0xff
   \   0001E2   75....       MOV     ?V0 + 5,#(req_payload >> 8) & 0xff
   \   0001E5   78..         MOV     R0,#?V0 + 4
   \   0001E7   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001EA   7407         MOV     A,#0x7
   \   0001EC   12....       LCALL   ?XSTACK_DISP0_8
   \   0001EF   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   0001F2   75....       MOV     ?V0 + 4,#cmdid_topic & 0xff
   \   0001F5   75....       MOV     ?V0 + 5,#(cmdid_topic >> 8) & 0xff
   \   0001F8   78..         MOV     R0,#?V0 + 4
   \   0001FA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001FD   7A..         MOV     R2,#`?<Constant "topic: %s, topic_len:...">` & 0xff
   \   0001FF   7B..         MOV     R3,#(`?<Constant "topic: %s, topic_len:...">` >> 8) & 0xff
   \   000201   12....       LCALL   ??debug?relay
   \   000204   7408         MOV     A,#0x8
   \   000206   12....       LCALL   ?DEALLOC_XSTACK8
    141                  mqtt_rx(cmdid_topic, req_payload);
                                 ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "uint8 *"

          mqtt_rx(cmdid_topic, req_payload);
                               ^
"e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",141  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "uint8 *"
   \   000209                ; Setup parameters for call to function mqtt_rx
   \   000209   7C..         MOV     R4,#req_payload & 0xff
   \   00020B   7D..         MOV     R5,#(req_payload >> 8) & 0xff
   \   00020D   7A..         MOV     R2,#cmdid_topic & 0xff
   \   00020F   7B..         MOV     R3,#(cmdid_topic >> 8) & 0xff
   \   000211   12....       LCALL   ??mqtt_rx?relay
    142                  
    143                  // MQTT_FreeBuffer(cmdid_topic);
    144                  // MQTT_FreeBuffer(req_payload);        
    145                  
    146                  switch(qos)
   \   000214   85..82       MOV     DPL,?XSP + 0
   \   000217   85..83       MOV     DPH,?XSP + 1
   \   00021A   E0           MOVX    A,@DPTR
   \   00021B   14           DEC     A
   \   00021C   6006         JZ      ??OneNet_RevPro_12
   \   00021E   14           DEC     A
   \   00021F   604A         JZ      ??OneNet_RevPro_13
   \   000221   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    147                  {
    148                  case 1:                                                         //收到publish的qos为1，设备需要回复Ack
    149                    {
    150                      if(MQTT_PacketPublishAck(pkt_id, &mqttPacket) == 0)
   \                     ??OneNet_RevPro_12:
   \   000224                ; Setup parameters for call to function MQTT_PacketPublishAck
   \   000224   7405         MOV     A,#0x5
   \   000226   12....       LCALL   ?XSTACK_DISP0_8
   \   000229   AC82         MOV     R4,DPL
   \   00022B   AD83         MOV     R5,DPH
   \   00022D   90....       MOV     DPTR,#??pkt_id
   \   000230   E0           MOVX    A,@DPTR
   \   000231   FA           MOV     R2,A
   \   000232   A3           INC     DPTR
   \   000233   E0           MOVX    A,@DPTR
   \   000234   FB           MOV     R3,A
   \   000235   12....       LCALL   ??MQTT_PacketPublishAck?relay
   \   000238   E9           MOV     A,R1
   \   000239   7075         JNZ     ??OneNet_RevPro_14
    151                      {
    152                        debug("Tips:  Send PublishAck\r\n");
   \   00023B                ; Setup parameters for call to function debug
   \   00023B   7A..         MOV     R2,#`?<Constant "Tips:  Send PublishAck\\r\\n">` & 0xff
   \   00023D   7B..         MOV     R3,#(`?<Constant "Tips:  Send PublishAck\\r\\n">` >> 8) & 0xff
   \   00023F   12....       LCALL   ??debug?relay
    153                        ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                                ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000242                ; Setup parameters for call to function ESP8266_SendData
   \   000242   7407         MOV     A,#0x7
   \   000244   12....       LCALL   ?XSTACK_DISP0_8
   \   000247   78..         MOV     R0,#?V0 + 4
   \   000249   12....       LCALL   ?L_MOV_X
   \   00024C   AC..         MOV     R4,?V0 + 4
   \   00024E   AD..         MOV     R5,?V0 + 5
   \   000250   7405         MOV     A,#0x5
   \   000252   12....       LCALL   ?XSTACK_DISP0_8
   \   000255   E0           MOVX    A,@DPTR
   \   000256   FA           MOV     R2,A
   \   000257   A3           INC     DPTR
   \   000258   E0           MOVX    A,@DPTR
   \   000259   FB           MOV     R3,A
   \   00025A   12....       LCALL   ??ESP8266_SendData?relay
    154                        MQTT_DeleteBuffer(&mqttPacket);
   \   00025D                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   00025D   7405         MOV     A,#0x5
   \   00025F   12....       LCALL   ?XSTACK_DISP0_8
   \   000262   AA82         MOV     R2,DPL
   \   000264   AB83         MOV     R3,DPH
   \   000266   12....       LCALL   ??MQTT_DeleteBuffer?relay
    155                      }
    156                      break;
   \   000269   8045         SJMP    ??OneNet_RevPro_14
    157                    }
    158                  case 2: //收到publish的qos为2，设备先回复Rec
    159                    {       //平台回复Rel，设备再回复Comp
    160                      if(MQTT_PacketPublishRec(pkt_id, &mqttPacket) == 0)
   \                     ??OneNet_RevPro_13:
   \   00026B                ; Setup parameters for call to function MQTT_PacketPublishRec
   \   00026B   7405         MOV     A,#0x5
   \   00026D   12....       LCALL   ?XSTACK_DISP0_8
   \   000270   AC82         MOV     R4,DPL
   \   000272   AD83         MOV     R5,DPH
   \   000274   90....       MOV     DPTR,#??pkt_id
   \   000277   E0           MOVX    A,@DPTR
   \   000278   FA           MOV     R2,A
   \   000279   A3           INC     DPTR
   \   00027A   E0           MOVX    A,@DPTR
   \   00027B   FB           MOV     R3,A
   \   00027C   12....       LCALL   ??MQTT_PacketPublishRec?relay
   \   00027F   E9           MOV     A,R1
   \   000280   702E         JNZ     ??OneNet_RevPro_14
    161                      {
    162                        debug("Tips:  Send PublishRec\r\n");
   \   000282                ; Setup parameters for call to function debug
   \   000282   7A..         MOV     R2,#`?<Constant "Tips:  Send PublishRec\\r\\n">` & 0xff
   \   000284   7B..         MOV     R3,#(`?<Constant "Tips:  Send PublishRec\\r\\n">` >> 8) & 0xff
   \   000286   12....       LCALL   ??debug?relay
    163                        ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                                ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000289                ; Setup parameters for call to function ESP8266_SendData
   \   000289   7407         MOV     A,#0x7
   \   00028B   12....       LCALL   ?XSTACK_DISP0_8
   \   00028E   78..         MOV     R0,#?V0 + 4
   \   000290   12....       LCALL   ?L_MOV_X
   \   000293   AC..         MOV     R4,?V0 + 4
   \   000295   AD..         MOV     R5,?V0 + 5
   \   000297   7405         MOV     A,#0x5
   \   000299   12....       LCALL   ?XSTACK_DISP0_8
   \   00029C   E0           MOVX    A,@DPTR
   \   00029D   FA           MOV     R2,A
   \   00029E   A3           INC     DPTR
   \   00029F   E0           MOVX    A,@DPTR
   \   0002A0   FB           MOV     R3,A
   \   0002A1   12....       LCALL   ??ESP8266_SendData?relay
    164                        MQTT_DeleteBuffer(&mqttPacket);
   \   0002A4                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   0002A4   7405         MOV     A,#0x5
   \   0002A6   12....       LCALL   ?XSTACK_DISP0_8
   \   0002A9   AA82         MOV     R2,DPL
   \   0002AB   AB83         MOV     R3,DPH
   \   0002AD   12....       LCALL   ??MQTT_DeleteBuffer?relay
    165                      }
    166                      break;
    167                    }
    168                  default:
    169                    break;
    170                  }
    171                  
    172                }
    173                break;
   \                     ??OneNet_RevPro_14:
   \   0002B0   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    174              }
    175            case MQTT_PKT_PUBREC:   //发送Publish消息，平台回复的Rec，设备需回复Rel消息
    176              {
    177                if(MQTT_UnPacketPublishRec(cmd) == 0)
   \                     ??OneNet_RevPro_2:
   \   0002B3                ; Setup parameters for call to function MQTT_UnPacketPublishRec
   \   0002B3   EE           MOV     A,R6
   \   0002B4   FA           MOV     R2,A
   \   0002B5   EF           MOV     A,R7
   \   0002B6   FB           MOV     R3,A
   \   0002B7   12....       LCALL   ??MQTT_UnPacketPublishRec?relay
   \   0002BA   E9           MOV     A,R1
   \   0002BB   7048         JNZ     ??OneNet_RevPro_15
    178                {
    179                  debug("Tips:  Rev PublishRec\r\n");
   \   0002BD                ; Setup parameters for call to function debug
   \   0002BD   7A..         MOV     R2,#`?<Constant "Tips:  Rev PublishRec\\r\\n">` & 0xff
   \   0002BF   7B..         MOV     R3,#(`?<Constant "Tips:  Rev PublishRec\\r\\n">` >> 8) & 0xff
   \   0002C1   12....       LCALL   ??debug?relay
    180                  if(MQTT_PacketPublishRel(MQTT_PUBLISH_ID, &mqttPacket) == 0)
   \   0002C4                ; Setup parameters for call to function MQTT_PacketPublishRel
   \   0002C4   7405         MOV     A,#0x5
   \   0002C6   12....       LCALL   ?XSTACK_DISP0_8
   \   0002C9   AC82         MOV     R4,DPL
   \   0002CB   AD83         MOV     R5,DPH
   \   0002CD   7A0A         MOV     R2,#0xa
   \   0002CF   7B00         MOV     R3,#0x0
   \   0002D1   12....       LCALL   ??MQTT_PacketPublishRel?relay
   \   0002D4   E9           MOV     A,R1
   \   0002D5   702E         JNZ     ??OneNet_RevPro_15
    181                  {
    182                    debug("Tips:  Send PublishRel\r\n");
   \   0002D7                ; Setup parameters for call to function debug
   \   0002D7   7A..         MOV     R2,#`?<Constant "Tips:  Send PublishRel\\r\\n">` & 0xff
   \   0002D9   7B..         MOV     R3,#(`?<Constant "Tips:  Send PublishRel\\r\\n">` >> 8) & 0xff
   \   0002DB   12....       LCALL   ??debug?relay
    183                    ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                            ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   0002DE                ; Setup parameters for call to function ESP8266_SendData
   \   0002DE   7407         MOV     A,#0x7
   \   0002E0   12....       LCALL   ?XSTACK_DISP0_8
   \   0002E3   78..         MOV     R0,#?V0 + 4
   \   0002E5   12....       LCALL   ?L_MOV_X
   \   0002E8   AC..         MOV     R4,?V0 + 4
   \   0002EA   AD..         MOV     R5,?V0 + 5
   \   0002EC   7405         MOV     A,#0x5
   \   0002EE   12....       LCALL   ?XSTACK_DISP0_8
   \   0002F1   E0           MOVX    A,@DPTR
   \   0002F2   FA           MOV     R2,A
   \   0002F3   A3           INC     DPTR
   \   0002F4   E0           MOVX    A,@DPTR
   \   0002F5   FB           MOV     R3,A
   \   0002F6   12....       LCALL   ??ESP8266_SendData?relay
    184                    MQTT_DeleteBuffer(&mqttPacket);
   \   0002F9                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   0002F9   7405         MOV     A,#0x5
   \   0002FB   12....       LCALL   ?XSTACK_DISP0_8
   \   0002FE   AA82         MOV     R2,DPL
   \   000300   AB83         MOV     R3,DPH
   \   000302   12....       LCALL   ??MQTT_DeleteBuffer?relay
    185                  }
    186                }
    187                break;
   \                     ??OneNet_RevPro_15:
   \   000305   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    188              }   
    189            case MQTT_PKT_PUBREL://收到Publish消息，设备回复Rec后，平台回复的Rel，设备需再回复Comp
    190              {
    191                if(MQTT_UnPacketPublishRel(cmd, pkt_id) == 0)
   \                     ??OneNet_RevPro_3:
   \   000308                ; Setup parameters for call to function MQTT_UnPacketPublishRel
   \   000308   90....       MOV     DPTR,#??pkt_id
   \   00030B   E0           MOVX    A,@DPTR
   \   00030C   FC           MOV     R4,A
   \   00030D   A3           INC     DPTR
   \   00030E   E0           MOVX    A,@DPTR
   \   00030F   FD           MOV     R5,A
   \   000310   EE           MOV     A,R6
   \   000311   FA           MOV     R2,A
   \   000312   EF           MOV     A,R7
   \   000313   FB           MOV     R3,A
   \   000314   12....       LCALL   ??MQTT_UnPacketPublishRel?relay
   \   000317   E9           MOV     A,R1
   \   000318   704B         JNZ     ??OneNet_RevPro_16
    192                {
    193                  debug("Tips:  Rev PublishRel\r\n");
   \   00031A                ; Setup parameters for call to function debug
   \   00031A   7A..         MOV     R2,#`?<Constant "Tips:  Rev PublishRel\\r\\n">` & 0xff
   \   00031C   7B..         MOV     R3,#(`?<Constant "Tips:  Rev PublishRel\\r\\n">` >> 8) & 0xff
   \   00031E   12....       LCALL   ??debug?relay
    194                  if(MQTT_PacketPublishComp(MQTT_PUBLISH_ID, &mqttPacket) == 0)
   \   000321                ; Setup parameters for call to function MQTT_PacketPublishComp
   \   000321   7405         MOV     A,#0x5
   \   000323   12....       LCALL   ?XSTACK_DISP0_8
   \   000326   AC82         MOV     R4,DPL
   \   000328   AD83         MOV     R5,DPH
   \   00032A   7A0A         MOV     R2,#0xa
   \   00032C   7B00         MOV     R3,#0x0
   \   00032E   12....       LCALL   ??MQTT_PacketPublishComp?relay
   \   000331   E9           MOV     A,R1
   \   000332   6003         JZ      $+5
   \   000334   02....       LJMP    ??OneNet_RevPro_9 & 0xFFFF
    195                  {
    196                    debug("Tips:  Send PublishComp\r\n");
   \   000337                ; Setup parameters for call to function debug
   \   000337   7A..         MOV     R2,#`?<Constant "Tips:  Send PublishCo...">` & 0xff
   \   000339   7B..         MOV     R3,#(`?<Constant "Tips:  Send PublishCo...">` >> 8) & 0xff
   \   00033B   12....       LCALL   ??debug?relay
    197                    ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                            ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   00033E                ; Setup parameters for call to function ESP8266_SendData
   \   00033E   7407         MOV     A,#0x7
   \   000340   12....       LCALL   ?XSTACK_DISP0_8
   \   000343   78..         MOV     R0,#?V0 + 4
   \   000345   12....       LCALL   ?L_MOV_X
   \   000348   AC..         MOV     R4,?V0 + 4
   \   00034A   AD..         MOV     R5,?V0 + 5
   \   00034C   7405         MOV     A,#0x5
   \   00034E   12....       LCALL   ?XSTACK_DISP0_8
   \   000351   E0           MOVX    A,@DPTR
   \   000352   FA           MOV     R2,A
   \   000353   A3           INC     DPTR
   \   000354   E0           MOVX    A,@DPTR
   \   000355   FB           MOV     R3,A
   \   000356   12....       LCALL   ??ESP8266_SendData?relay
    198                    MQTT_DeleteBuffer(&mqttPacket);
   \   000359                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   000359   7405         MOV     A,#0x5
   \   00035B   12....       LCALL   ?XSTACK_DISP0_8
   \   00035E   AA82         MOV     R2,DPL
   \   000360   AB83         MOV     R3,DPH
   \   000362   12....       LCALL   ??MQTT_DeleteBuffer?relay
    199                  }
    200                }
    201                break;
   \                     ??OneNet_RevPro_16:
   \   000365   8051         SJMP    ??OneNet_RevPro_9
    202              }
    203            case MQTT_PKT_PUBCOMP:  //发送Publish消息，平台返回Rec，设备回复Rel，平台再返回的Comp
    204              {
    205                if(MQTT_UnPacketPublishComp(cmd) == 0)
   \                     ??OneNet_RevPro_4:
   \   000367                ; Setup parameters for call to function MQTT_UnPacketPublishComp
   \   000367   EE           MOV     A,R6
   \   000368   FA           MOV     R2,A
   \   000369   EF           MOV     A,R7
   \   00036A   FB           MOV     R3,A
   \   00036B   12....       LCALL   ??MQTT_UnPacketPublishComp?relay
   \   00036E   E9           MOV     A,R1
   \   00036F   7047         JNZ     ??OneNet_RevPro_9
    206                {
    207                  debug("Tips:  Rev PublishComp\r\n");
   \   000371                ; Setup parameters for call to function debug
   \   000371   7A..         MOV     R2,#`?<Constant "Tips:  Rev PublishComp\\r\\n">` & 0xff
   \   000373   7B..         MOV     R3,#(`?<Constant "Tips:  Rev PublishComp\\r\\n">` >> 8) & 0xff
   \   000375   12....       LCALL   ??debug?relay
    208                }
    209                break;
   \   000378   803E         SJMP    ??OneNet_RevPro_9
    210              }
    211            case MQTT_PKT_SUBACK:   //发送Subscribe消息的Ack
    212              {
    213                if(MQTT_UnPacketSubscribe(cmd) == 0)
   \                     ??OneNet_RevPro_5:
   \   00037A                ; Setup parameters for call to function MQTT_UnPacketSubscribe
   \   00037A   EE           MOV     A,R6
   \   00037B   FA           MOV     R2,A
   \   00037C   EF           MOV     A,R7
   \   00037D   FB           MOV     R3,A
   \   00037E   12....       LCALL   ??MQTT_UnPacketSubscribe?relay
   \   000381   E9           MOV     A,R1
   \   000382   7009         JNZ     ??OneNet_RevPro_17
    214                {
    215                  debug("Tips:  MQTT Subscribe OK\r\n");
   \   000384                ; Setup parameters for call to function debug
   \   000384   7A..         MOV     R2,#`?<Constant "Tips:  MQTT Subscribe...">` & 0xff
   \   000386   7B..         MOV     R3,#(`?<Constant "Tips:  MQTT Subscribe...">` >> 8) & 0xff
   \   000388   12....       LCALL   ??debug?relay
   \   00038B   802B         SJMP    ??OneNet_RevPro_9
    216                }
    217                else
    218                {
    219                  debug("Tips:  MQTT Subscribe Err\r\n");
   \                     ??OneNet_RevPro_17:
   \   00038D                ; Setup parameters for call to function debug
   \   00038D   7A..         MOV     R2,#`?<Constant "Tips:  MQTT Subscribe...">_1` & 0xff
   \   00038F   7B..         MOV     R3,#(`?<Constant "Tips:  MQTT Subscribe...">_1` >> 8) & 0xff
   \   000391   12....       LCALL   ??debug?relay
    220                }
    221                break;
   \   000394   8022         SJMP    ??OneNet_RevPro_9
    222              }
    223            case MQTT_PKT_UNSUBACK: //发送UnSubscribe消息的Ack
    224              {
    225                if(MQTT_UnPacketUnSubscribe(cmd) == 0)
   \                     ??OneNet_RevPro_6:
   \   000396                ; Setup parameters for call to function MQTT_UnPacketUnSubscribe
   \   000396   EE           MOV     A,R6
   \   000397   FA           MOV     R2,A
   \   000398   EF           MOV     A,R7
   \   000399   FB           MOV     R3,A
   \   00039A   12....       LCALL   ??MQTT_UnPacketUnSubscribe?relay
   \   00039D   E9           MOV     A,R1
   \   00039E   7009         JNZ     ??OneNet_RevPro_18
    226                {
    227                  debug("Tips:  MQTT UnSubscribe OK\r\n");
   \   0003A0                ; Setup parameters for call to function debug
   \   0003A0   7A..         MOV     R2,#`?<Constant "Tips:  MQTT UnSubscri...">` & 0xff
   \   0003A2   7B..         MOV     R3,#(`?<Constant "Tips:  MQTT UnSubscri...">` >> 8) & 0xff
   \   0003A4   12....       LCALL   ??debug?relay
   \   0003A7   800F         SJMP    ??OneNet_RevPro_9
    228                }
    229                else
    230                {
    231                  debug("Tips:  MQTT UnSubscribe Err\r\n");
   \                     ??OneNet_RevPro_18:
   \   0003A9                ; Setup parameters for call to function debug
   \   0003A9   7A..         MOV     R2,#`?<Constant "Tips:  MQTT UnSubscri...">_1` & 0xff
   \   0003AB   7B..         MOV     R3,#(`?<Constant "Tips:  MQTT UnSubscri...">_1` >> 8) & 0xff
   \   0003AD   12....       LCALL   ??debug?relay
    232                }
    233                break;
   \   0003B0   8006         SJMP    ??OneNet_RevPro_9
    234              } 		
    235            default:
    236              result = -1;
   \                     ??OneNet_RevPro_8:
   \   0003B2   75..FF       MOV     ?V0 + 0,#-0x1
   \   0003B5   75..FF       MOV     ?V0 + 1,#-0x1
    237              break;
    238            }
    239          }
   \                     ??OneNet_RevPro_9:
   \   0003B8   7410         MOV     A,#0x10
   \   0003BA   12....       LCALL   ?DEALLOC_XSTACK8
   \   0003BD   7F08         MOV     R7,#0x8
   \   0003BF   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??pkt_id:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    240          
    241          /**************************************************************
    242          函数名称 : onenet_mqtt_send_heart
    243          函数功能 : 发送心跳
    244          输入参数 : 无
    245          返回值  	 : 无
    246          备注		 : 无
    247          **************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    248          void onenet_mqtt_send_heart(void)
   \                     onenet_mqtt_send_heart:
    249          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV     A,#-0xb
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    250            MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   00000A   90....       MOV     DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>_1`
   \   00000D   C082         PUSH    DPL
   \   00000F   C083         PUSH    DPH
   \   000011   85..82       MOV     DPL,?XSP + 0
   \   000014   85..83       MOV     DPH,?XSP + 1
   \   000017   AC82         MOV     R4,DPL
   \   000019   AD83         MOV     R5,DPH
   \   00001B   D083         POP     DPH
   \   00001D   D082         POP     DPL
   \   00001F   740B         MOV     A,#0xb
   \   000021   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    251            
    252            debug("send heart\r\n");
   \   000024                ; Setup parameters for call to function debug
   \   000024   7A..         MOV     R2,#`?<Constant "send heart\\r\\n">` & 0xff
   \   000026   7B..         MOV     R3,#(`?<Constant "send heart\\r\\n">` >> 8) & 0xff
   \   000028   12....       LCALL   ??debug?relay
    253            MQTT_PacketPing(&mqttPacket);
   \   00002B                ; Setup parameters for call to function MQTT_PacketPing
   \   00002B   85..82       MOV     DPL,?XSP + 0
   \   00002E   85..83       MOV     DPH,?XSP + 1
   \   000031   AA82         MOV     R2,DPL
   \   000033   AB83         MOV     R3,DPH
   \   000035   12....       LCALL   ??MQTT_PacketPing?relay
   \   000038   E9           MOV     A,R1
    254            ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                    ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000039                ; Setup parameters for call to function ESP8266_SendData
   \   000039   7402         MOV     A,#0x2
   \   00003B   12....       LCALL   ?XSTACK_DISP0_8
   \   00003E   78..         MOV     R0,#?V0 + 0
   \   000040   12....       LCALL   ?L_MOV_X
   \   000043   AC..         MOV     R4,?V0 + 0
   \   000045   AD..         MOV     R5,?V0 + 1
   \   000047   85..82       MOV     DPL,?XSP + 0
   \   00004A   85..83       MOV     DPH,?XSP + 1
   \   00004D   E0           MOVX    A,@DPTR
   \   00004E   FA           MOV     R2,A
   \   00004F   A3           INC     DPTR
   \   000050   E0           MOVX    A,@DPTR
   \   000051   FB           MOV     R3,A
   \   000052   12....       LCALL   ??ESP8266_SendData?relay
    255            MQTT_DeleteBuffer(&mqttPacket);									//删包
   \   000055                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   000055   85..82       MOV     DPL,?XSP + 0
   \   000058   85..83       MOV     DPH,?XSP + 1
   \   00005B   AA82         MOV     R2,DPL
   \   00005D   AB83         MOV     R3,DPH
   \   00005F   12....       LCALL   ??MQTT_DeleteBuffer?relay
    256          }
   \   000062   740B         MOV     A,#0xb
   \   000064   12....       LCALL   ?DEALLOC_XSTACK8
   \   000067   7F04         MOV     R7,#0x4
   \   000069   02....       LJMP    ?BANKED_LEAVE_XDATA
    257          
    258          
    259          /**************************************************************
    260          函数名称 : mqtt_publish_topic
    261          函数功能 : onenet mqtt 发布主题消息
    262          输入参数 : topic：发布的主题
    263          msg：消息内容
    264          返回值  	 : PUBLISH_MSG_OK: 发布消息成功
    265          PUBLISH_MSG_ERROR：发布消息失败
    266          备注		 : 无
    267          **************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    268          _Bool mqtt_publish_topic(const char *topic, const char *msg)
   \                     mqtt_publish_topic:
    269          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV     A,#-0xb
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   8A..         MOV     ?V0 + 6,R2
   \   00000C   8B..         MOV     ?V0 + 7,R3
   \   00000E   8C..         MOV     ?V0 + 4,R4
   \   000010   8D..         MOV     ?V0 + 5,R5
    270            MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   000012   90....       MOV     DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>_2`
   \   000015   C082         PUSH    DPL
   \   000017   C083         PUSH    DPH
   \   000019   85..82       MOV     DPL,?XSP + 0
   \   00001C   85..83       MOV     DPH,?XSP + 1
   \   00001F   AC82         MOV     R4,DPL
   \   000021   AD83         MOV     R5,DPH
   \   000023   D083         POP     DPH
   \   000025   D082         POP     DPL
   \   000027   740B         MOV     A,#0xb
   \   000029   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    271            
    272            debug("publish topic: %s, msg: %s\r\n", topic, msg);
   \   00002C                ; Setup parameters for call to function debug
   \   00002C   78..         MOV     R0,#?V0 + 4
   \   00002E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000031   78..         MOV     R0,#?V0 + 6
   \   000033   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000036   7A..         MOV     R2,#`?<Constant "publish topic: %s, ms...">` & 0xff
   \   000038   7B..         MOV     R3,#(`?<Constant "publish topic: %s, ms...">` >> 8) & 0xff
   \   00003A   12....       LCALL   ??debug?relay
   \   00003D   7404         MOV     A,#0x4
   \   00003F   12....       LCALL   ?DEALLOC_XSTACK8
    273            
    274            if(MQTT_PacketPublish(MQTT_PUBLISH_ID, topic, msg, strlen(msg), MQTT_QOS_LEVEL2, 0, 1, &mqttPacket) == 0)
                                                          ^
Warning[Pe167]: argument of type "char const *" is incompatible with parameter
          of type "signed char const *"

    if(MQTT_PacketPublish(MQTT_PUBLISH_ID, topic, msg, strlen(msg), MQTT_QOS_LEVEL2, 0, 1, &mqttPacket) == 0)
                                                  ^
"e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",274  Warning[Pe167]: 
          argument of type "char const *" is incompatible with parameter of
          type "signed char const *"
   \   000042                ; Setup parameters for call to function MQTT_PacketPublish
   \   000042   85..82       MOV     DPL,?XSP + 0
   \   000045   85..83       MOV     DPH,?XSP + 1
   \   000048   8582..       MOV     ?V0 + 0,DPL
   \   00004B   8583..       MOV     ?V0 + 1,DPH
   \   00004E   78..         MOV     R0,#?V0 + 0
   \   000050   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000053   90....       MOV     DPTR,#__Constant_1
   \   000056   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   000059   90....       MOV     DPTR,#__Constant_0
   \   00005C   12....       LCALL   ?PUSH_XSTACK8_X_FOUR
   \   00005F                ; Setup parameters for call to function strlen
   \   00005F   AA..         MOV     R2,?V0 + 4
   \   000061   AB..         MOV     R3,?V0 + 5
   \   000063   12....       LCALL   ??strlen?relay
   \   000066   8A..         MOV     ?V0 + 0,R2
   \   000068   8B..         MOV     ?V0 + 1,R3
   \   00006A   E4           CLR     A
   \   00006B   F5..         MOV     ?V0 + 2,A
   \   00006D   F5..         MOV     ?V0 + 3,A
   \   00006F   78..         MOV     R0,#?V0 + 0
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_FOUR
   \   000074   78..         MOV     R0,#?V0 + 4
   \   000076   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000079   7902         MOV     R1,#0x2
   \   00007B   AC..         MOV     R4,?V0 + 6
   \   00007D   AD..         MOV     R5,?V0 + 7
   \   00007F   7A0A         MOV     R2,#0xa
   \   000081   7B00         MOV     R3,#0x0
   \   000083   12....       LCALL   ??MQTT_PacketPublish?relay
   \   000086   7410         MOV     A,#0x10
   \   000088   12....       LCALL   ?DEALLOC_XSTACK8
   \   00008B   E9           MOV     A,R1
   \   00008C   702C         JNZ     ??mqtt_publish_topic_0
    275            {
    276              ESP8266_SendData(mqttPacket._data, mqttPacket._len);//上传平台
                                      ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   00008E                ; Setup parameters for call to function ESP8266_SendData
   \   00008E   7402         MOV     A,#0x2
   \   000090   12....       LCALL   ?XSTACK_DISP0_8
   \   000093   78..         MOV     R0,#?V0 + 0
   \   000095   12....       LCALL   ?L_MOV_X
   \   000098   AC..         MOV     R4,?V0 + 0
   \   00009A   AD..         MOV     R5,?V0 + 1
   \   00009C   85..82       MOV     DPL,?XSP + 0
   \   00009F   85..83       MOV     DPH,?XSP + 1
   \   0000A2   E0           MOVX    A,@DPTR
   \   0000A3   FA           MOV     R2,A
   \   0000A4   A3           INC     DPTR
   \   0000A5   E0           MOVX    A,@DPTR
   \   0000A6   FB           MOV     R3,A
   \   0000A7   12....       LCALL   ??ESP8266_SendData?relay
    277              MQTT_DeleteBuffer(&mqttPacket);	//删包
   \   0000AA                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   0000AA   85..82       MOV     DPL,?XSP + 0
   \   0000AD   85..83       MOV     DPH,?XSP + 1
   \   0000B0   AA82         MOV     R2,DPL
   \   0000B2   AB83         MOV     R3,DPH
   \   0000B4   12....       LCALL   ??MQTT_DeleteBuffer?relay
    278              return 0;
   \   0000B7   C3           CLR     C
   \   0000B8   8001         SJMP    ??mqtt_publish_topic_1
    279            }
    280            else
    281            {
    282              return 1;
   \                     ??mqtt_publish_topic_0:
   \   0000BA   D3           SETB    C
   \                     ??mqtt_publish_topic_1:
   \   0000BB   740B         MOV     A,#0xb
   \   0000BD   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000C0   7F08         MOV     R7,#0x8
   \   0000C2   02....       LJMP    ?BANKED_LEAVE_XDATA
    283            }
    284            
    285          }
    286          
    287          /*  发布主题为"hello_topic"，消息为"hello_world" */
    288          //if(0 == onenet_mqtt_publish_topic("hello_topic", "hello_world"))
    289          //{;}
    290          
    291          
    292          /**************************************************************
    293          函数名称 : onenet_mqtt_subscribe_topic
    294          函数功能 : onenet mqtt 订阅主题
    295          输入参数 : topic：订阅的topic
    296          topic_cnt：topic个数
    297          返回值  	 : SUBSCRIBE_TOPIC_OK:订阅成功
    298          SUBSCRIBE_TOPIC_ERROR：订阅失败
    299          备注		 : 无
    300          **************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    301          _Bool mqtt_subscribe_topic(const signed char *topic[], unsigned char topic_cnt)
   \                     mqtt_subscribe_topic:
    302          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV     A,#-0xb
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
   \   00000E   89..         MOV     ?V0 + 1,R1
    303            
    304            unsigned char i = 0;
   \   000010   75..00       MOV     ?V0 + 0,#0x0
    305            MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   000013   90....       MOV     DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>_3`
   \   000016   C082         PUSH    DPL
   \   000018   C083         PUSH    DPH
   \   00001A   85..82       MOV     DPL,?XSP + 0
   \   00001D   85..83       MOV     DPH,?XSP + 1
   \   000020   AC82         MOV     R4,DPL
   \   000022   AD83         MOV     R5,DPH
   \   000024   D083         POP     DPH
   \   000026   D082         POP     DPL
   \   000028   740B         MOV     A,#0xb
   \   00002A   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    306            
    307            for(; i < topic_cnt; i++)
   \                     ??mqtt_subscribe_topic_0:
   \   00002D   E5..         MOV     A,?V0 + 0
   \   00002F   C3           CLR     C
   \   000030   95..         SUBB    A,?V0 + 1
   \   000032   5036         JNC     ??mqtt_subscribe_topic_1
    308            {
    309              debug("subscribe topic: %s\r\n", topic[i]);
   \   000034                ; Setup parameters for call to function debug
   \   000034   E5..         MOV     A,?V0 + 0
   \   000036   A8..         MOV     R0,?V0 + 0
   \   000038   7900         MOV     R1,#0x0
   \   00003A   E8           MOV     A,R0
   \   00003B   75F002       MOV     B,#0x2
   \   00003E   A4           MUL     AB
   \   00003F   C8           XCH     A,R0
   \   000040   AAF0         MOV     R2,B
   \   000042   75F000       MOV     B,#0x0
   \   000045   A4           MUL     AB
   \   000046   2A           ADD     A,R2
   \   000047   FA           MOV     R2,A
   \   000048   75F002       MOV     B,#0x2
   \   00004B   E9           MOV     A,R1
   \   00004C   A4           MUL     AB
   \   00004D   2A           ADD     A,R2
   \   00004E   F9           MOV     R1,A
   \   00004F   EE           MOV     A,R6
   \   000050   28           ADD     A,R0
   \   000051   F582         MOV     DPL,A
   \   000053   EF           MOV     A,R7
   \   000054   39           ADDC    A,R1
   \   000055   F583         MOV     DPH,A
   \   000057   12....       LCALL   ?PUSH_XSTACK8_X_TWO
   \   00005A   7A..         MOV     R2,#`?<Constant "subscribe topic: %s\\r\\n">` & 0xff
   \   00005C   7B..         MOV     R3,#(`?<Constant "subscribe topic: %s\\r\\n">` >> 8) & 0xff
   \   00005E   12....       LCALL   ??debug?relay
   \   000061   7402         MOV     A,#0x2
   \   000063   12....       LCALL   ?DEALLOC_XSTACK8
    310            }
   \   000066   05..         INC     ?V0 + 0
   \   000068   80C3         SJMP    ??mqtt_subscribe_topic_0
    311            
    312            if(MQTT_PacketSubscribe(MQTT_SUBSCRIBE_ID, MQTT_QOS_LEVEL2, topic, topic_cnt, &mqttPacket) == 0)
   \                     ??mqtt_subscribe_topic_1:
   \   00006A                ; Setup parameters for call to function MQTT_PacketSubscribe
   \   00006A   85..82       MOV     DPL,?XSP + 0
   \   00006D   85..83       MOV     DPH,?XSP + 1
   \   000070   8582..       MOV     ?V0 + 2,DPL
   \   000073   8583..       MOV     ?V0 + 3,DPH
   \   000076   78..         MOV     R0,#?V0 + 2
   \   000078   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007B   E5..         MOV     A,?V0 + 1
   \   00007D   F5..         MOV     ?V0 + 2,A
   \   00007F   78..         MOV     R0,#?V0 + 2
   \   000081   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000084   EE           MOV     A,R6
   \   000085   FC           MOV     R4,A
   \   000086   EF           MOV     A,R7
   \   000087   FD           MOV     R5,A
   \   000088   7902         MOV     R1,#0x2
   \   00008A   7A14         MOV     R2,#0x14
   \   00008C   7B00         MOV     R3,#0x0
   \   00008E   12....       LCALL   ??MQTT_PacketSubscribe?relay
   \   000091   7403         MOV     A,#0x3
   \   000093   12....       LCALL   ?DEALLOC_XSTACK8
   \   000096   E9           MOV     A,R1
   \   000097   702C         JNZ     ??mqtt_subscribe_topic_2
    313            {
    314              ESP8266_SendData(mqttPacket._data, mqttPacket._len);//上传平台
                                      ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000099                ; Setup parameters for call to function ESP8266_SendData
   \   000099   7402         MOV     A,#0x2
   \   00009B   12....       LCALL   ?XSTACK_DISP0_8
   \   00009E   78..         MOV     R0,#?V0 + 4
   \   0000A0   12....       LCALL   ?L_MOV_X
   \   0000A3   AC..         MOV     R4,?V0 + 4
   \   0000A5   AD..         MOV     R5,?V0 + 5
   \   0000A7   85..82       MOV     DPL,?XSP + 0
   \   0000AA   85..83       MOV     DPH,?XSP + 1
   \   0000AD   E0           MOVX    A,@DPTR
   \   0000AE   FA           MOV     R2,A
   \   0000AF   A3           INC     DPTR
   \   0000B0   E0           MOVX    A,@DPTR
   \   0000B1   FB           MOV     R3,A
   \   0000B2   12....       LCALL   ??ESP8266_SendData?relay
    315              MQTT_DeleteBuffer(&mqttPacket);											//删包
   \   0000B5                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   0000B5   85..82       MOV     DPL,?XSP + 0
   \   0000B8   85..83       MOV     DPH,?XSP + 1
   \   0000BB   AA82         MOV     R2,DPL
   \   0000BD   AB83         MOV     R3,DPH
   \   0000BF   12....       LCALL   ??MQTT_DeleteBuffer?relay
    316              return 0;
   \   0000C2   C3           CLR     C
   \   0000C3   8001         SJMP    ??mqtt_subscribe_topic_3
    317            }
    318            else
    319            {
    320              return 1;
   \                     ??mqtt_subscribe_topic_2:
   \   0000C5   D3           SETB    C
   \                     ??mqtt_subscribe_topic_3:
   \   0000C6   740B         MOV     A,#0xb
   \   0000C8   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000CB   7F08         MOV     R7,#0x8
   \   0000CD   02....       LJMP    ?BANKED_LEAVE_XDATA
    321            }
    322          }

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??OneNet_DevLink?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    OneNet_DevLink

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??OneNet_RevPro?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    OneNet_RevPro

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??onenet_mqtt_send_heart?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    onenet_mqtt_send_heart

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??mqtt_publish_topic?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    mqtt_publish_topic

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??mqtt_subscribe_topic?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    mqtt_subscribe_topic

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%s&%s">`:
   \   000000   25732625     DB "%s&%s"
   \            7300    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "device">`:
   \   000000   64657669     DB "device"
   \            636500  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "a1xaMw4YerO">`:
   \   000000   61317861     DB "a1xaMw4YerO"
   \            4D773459
   \            65724F00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "OneNet_DevLink\\r\\nmqttU...">`:
   \   000000   4F6E654E     DB 4FH, 6EH, 65H, 4EH, 65H, 74H, 5FH, 44H
   \            65745F44
   \   000008   65764C69     DB 65H, 76H, 4CH, 69H, 6EH, 6BH, 0DH, 0AH
   \            6E6B0D0A
   \   000010   6D717474     DB 6DH, 71H, 74H, 74H, 55H, 73H, 65H, 72H
   \            55736572
   \   000018   6E616D65     DB 6EH, 61H, 6DH, 65H, 3AH, 25H, 73H, 2CH
   \            3A25732C
   \   000020   206D7174     DB 20H, 6DH, 71H, 74H, 74H, 50H, 61H, 73H
   \            74506173
   \   000028   73776F72     DB 73H, 77H, 6FH, 72H, 64H, 3AH, 25H, 73H
   \            643A2573
   \   000030   2C6D7174     DB 2CH, 6DH, 71H, 74H, 74H, 43H, 6CH, 69H
   \            74436C69
   \   000038   656E7449     DB 65H, 6EH, 74H, 49H, 64H, 3AH, 25H, 73H
   \            643A2573
   \   000040   0D0A00       DB 0DH, 0AH, 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "91bf398bee0b02f1592d9...">`:
   \   000000   39316266     DB 39H, 31H, 62H, 66H, 33H, 39H, 38H, 62H
   \            33393862
   \   000008   65653062     DB 65H, 65H, 30H, 62H, 30H, 32H, 66H, 31H
   \            30326631
   \   000010   35393264     DB 35H, 39H, 32H, 64H, 39H, 30H, 38H, 66H
   \            39303866
   \   000018   35643736     DB 35H, 64H, 37H, 36H, 34H, 30H, 61H, 36H
   \            34306136
   \   000020   36333435     DB 36H, 33H, 34H, 35H, 36H, 34H, 35H, 65H
   \            36343565
   \   000028   37363365     DB 37H, 36H, 33H, 65H, 61H, 66H, 30H, 30H
   \            61663030
   \   000030   39633434     DB 39H, 63H, 34H, 34H, 62H, 61H, 61H, 63H
   \            62616163
   \   000038   33363965     DB 33H, 36H, 39H, 65H, 38H, 64H, 64H, 34H
   \            38646434
   \   000040   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "a1xaMw4YerO.device|se...">`:
   \   000000   61317861     DB 61H, 31H, 78H, 61H, 4DH, 77H, 34H, 59H
   \            4D773459
   \   000008   65724F2E     DB 65H, 72H, 4FH, 2EH, 64H, 65H, 76H, 69H
   \            64657669
   \   000010   63657C73     DB 63H, 65H, 7CH, 73H, 65H, 63H, 75H, 72H
   \            65637572
   \   000018   656D6F64     DB 65H, 6DH, 6FH, 64H, 65H, 3DH, 32H, 2CH
   \            653D322C
   \   000020   7369676E     DB 73H, 69H, 67H, 6EH, 6DH, 65H, 74H, 68H
   \            6D657468
   \   000028   6F643D68     DB 6FH, 64H, 3DH, 68H, 6DH, 61H, 63H, 73H
   \            6D616373
   \   000030   68613235     DB 68H, 61H, 32H, 35H, 36H, 2CH, 74H, 69H
   \            362C7469
   \   000038   6D657374     DB 6DH, 65H, 73H, 74H, 61H, 6DH, 70H, 3DH
   \            616D703D
   \   000040   32353234     DB 32H, 35H, 32H, 34H, 36H, 30H, 38H, 30H
   \            36303830
   \   000048   30303030     DB 30H, 30H, 30H, 30H, 30H, 7CH, 0
   \            307C00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "WARN:\\tMQTT_PacketConn...">`:
   \   000000   5741524E     DB "WARN:\tMQTT_PacketConnect Failed\015\012"
   \            3A094D51
   \            54545F50
   \            61636B65
   \            74436F6E
   \            6E656374
   \            20466169
   \            6C65640D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 0}>`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "cmdid: %s, req: %s, r...">`:
   \   000000   636D6469     DB "cmdid: %s, req: %s, req_len: %d\015\012"
   \            643A2025
   \            732C2072
   \            65713A20
   \            25732C20
   \            7265715F
   \            6C656E3A
   \            2025640D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:\\tSend CmdResp\\r\\n">`:
   \   000000   54697073     DB "Tips:\tSend CmdResp\015\012"
   \            3A095365
   \            6E642043
   \            6D645265
   \            73700D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:\\tMQTT Publish Se...">`:
   \   000000   54697073     DB "Tips:\tMQTT Publish Send OK\015\012"
   \            3A094D51
   \            54542050
   \            75626C69
   \            73682053
   \            656E6420
   \            4F4B0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  HeartBeat OK\\r\\n">`:
   \   000000   54697073     DB "Tips:  HeartBeat OK\015\012"
   \            3A202048
   \            65617274
   \            42656174
   \            204F4B0D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "topic: %s, topic_len:...">`:
   \   000000   746F7069     DB 74H, 6FH, 70H, 69H, 63H, 3AH, 20H, 25H
   \            633A2025
   \   000008   732C2074     DB 73H, 2CH, 20H, 74H, 6FH, 70H, 69H, 63H
   \            6F706963
   \   000010   5F6C656E     DB 5FH, 6CH, 65H, 6EH, 3AH, 20H, 25H, 64H
   \            3A202564
   \   000018   2C207061     DB 2CH, 20H, 70H, 61H, 79H, 6CH, 6FH, 61H
   \            796C6F61
   \   000020   643A2025     DB 64H, 3AH, 20H, 25H, 73H, 2CH, 20H, 70H
   \            732C2070
   \   000028   61796C6F     DB 61H, 79H, 6CH, 6FH, 61H, 64H, 5FH, 6CH
   \            61645F6C
   \   000030   656E3A20     DB 65H, 6EH, 3AH, 20H, 25H, 64H, 0DH, 0AH
   \            25640D0A
   \   000038   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishAck\\r\\n">`:
   \   000000   54697073     DB "Tips:  Send PublishAck\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736841
   \            636B0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishRec\\r\\n">`:
   \   000000   54697073     DB "Tips:  Send PublishRec\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736852
   \            65630D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Rev PublishRec\\r\\n">`:
   \   000000   54697073     DB "Tips:  Rev PublishRec\015\012"
   \            3A202052
   \            65762050
   \            75626C69
   \            73685265
   \            630D0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishRel\\r\\n">`:
   \   000000   54697073     DB "Tips:  Send PublishRel\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736852
   \            656C0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Rev PublishRel\\r\\n">`:
   \   000000   54697073     DB "Tips:  Rev PublishRel\015\012"
   \            3A202052
   \            65762050
   \            75626C69
   \            73685265
   \            6C0D0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishCo...">`:
   \   000000   54697073     DB "Tips:  Send PublishComp\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736843
   \            6F6D700D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Rev PublishComp\\r\\n">`:
   \   000000   54697073     DB "Tips:  Rev PublishComp\015\012"
   \            3A202052
   \            65762050
   \            75626C69
   \            7368436F
   \            6D700D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT Subscribe...">`:
   \   000000   54697073     DB "Tips:  MQTT Subscribe OK\015\012"
   \            3A20204D
   \            51545420
   \            53756273
   \            63726962
   \            65204F4B
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT Subscribe...">_1`:
   \   000000   54697073     DB "Tips:  MQTT Subscribe Err\015\012"
   \            3A20204D
   \            51545420
   \            53756273
   \            63726962
   \            65204572
   \            720D0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT UnSubscri...">`:
   \   000000   54697073     DB "Tips:  MQTT UnSubscribe OK\015\012"
   \            3A20204D
   \            51545420
   \            556E5375
   \            62736372
   \            69626520
   \            4F4B0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT UnSubscri...">_1`:
   \   000000   54697073     DB "Tips:  MQTT UnSubscribe Err\015\012"
   \            3A20204D
   \            51545420
   \            556E5375
   \            62736372
   \            69626520
   \            4572720D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>_1`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send heart\\r\\n">`:
   \   000000   73656E64     DB "send heart\015\012"
   \            20686561
   \            72740D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>_2`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "publish topic: %s, ms...">`:
   \   000000   7075626C     DB "publish topic: %s, msg: %s\015\012"
   \            69736820
   \            746F7069
   \            633A2025
   \            732C206D
   \            73673A20
   \            25730D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>_3`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "subscribe topic: %s\\r\\n">`:
   \   000000   73756273     DB "subscribe topic: %s\015\012"
   \            63726962
   \            6520746F
   \            7069633A
   \            2025730D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1:
   \   000000   01000000     DD 1
    323          
    324          ////主题订阅方法
    325          //const signed char *g_mqtt_topics[] = {"/sys/a1sIpEvOQhQ/homeGate/thing/service/switch:SetSwitchStatus"};
    326          //if(0==mqtt_subscribe_topic(g_mqtt_topics,1))

   Maximum stack usage in bytes:

     Function                      ISTACK PSTACK XSTACK
     --------                      ------ ------ ------
     OneNet_DevLink                    2      0     38
       -> sprintf                      0      0     54
       -> debug                        0      0     58
       -> MQTT_PacketConnect           0      0     76
       -> ESP8266_SendData             0      0     46
       -> MQTT_DeleteBuffer            0      0     46
       -> debug                        0      0     46
     OneNet_RevPro                     2      0     42
       -> MQTT_UnPacketRecv            0      0     64
       -> MQTT_UnPacketCmd             0      0     72
       -> debug                        0      0     76
       -> mqtt_rx                      0      0     64
       -> MQTT_PacketCmdResp           0      0     68
       -> debug                        0      0     64
       -> ESP8266_SendData             0      0     64
       -> MQTT_DeleteBuffer            0      0     64
       -> MQTT_UnPacketPublishAck      0      0     64
       -> debug                        0      0     64
       -> debug                        0      0     64
       -> MQTT_UnPacketPublish         0      0     84
       -> debug                        0      0     80
       -> mqtt_rx                      0      0     64
       -> MQTT_PacketPublishAck        0      0     64
       -> debug                        0      0     64
       -> ESP8266_SendData             0      0     64
       -> MQTT_DeleteBuffer            0      0     64
       -> MQTT_PacketPublishRec        0      0     64
       -> debug                        0      0     64
       -> ESP8266_SendData             0      0     64
       -> MQTT_DeleteBuffer            0      0     64
       -> MQTT_UnPacketPublishRec      0      0     64
       -> debug                        0      0     64
       -> MQTT_PacketPublishRel        0      0     64
       -> debug                        0      0     64
       -> ESP8266_SendData             0      0     64
       -> MQTT_DeleteBuffer            0      0     64
       -> MQTT_UnPacketPublishRel      0      0     64
       -> debug                        0      0     64
       -> MQTT_PacketPublishComp       0      0     64
       -> debug                        0      0     64
       -> ESP8266_SendData             0      0     64
       -> MQTT_DeleteBuffer            0      0     64
       -> MQTT_UnPacketPublishComp     0      0     64
       -> debug                        0      0     64
       -> MQTT_UnPacketSubscribe       0      0     64
       -> debug                        0      0     64
       -> debug                        0      0     64
       -> MQTT_UnPacketUnSubscribe     0      0     64
       -> debug                        0      0     64
       -> debug                        0      0     64
     mqtt_publish_topic                2      0     43
       -> debug                        0      0     62
       -> strlen                       0      0     74
       -> MQTT_PacketPublish           0      0     86
       -> ESP8266_SendData             0      0     54
       -> MQTT_DeleteBuffer            0      0     54
     mqtt_subscribe_topic              2      0     30
       -> debug                        0      0     58
       -> MQTT_PacketSubscribe         0      0     60
       -> ESP8266_SendData             0      0     54
       -> MQTT_DeleteBuffer            0      0     54
     onenet_mqtt_send_heart            2      0     23
       -> debug                        0      0     46
       -> MQTT_PacketPing              0      0     46
       -> ESP8266_SendData             0      0     46
       -> MQTT_DeleteBuffer            0      0     46


   Segment part sizes:

     Function/Label                           Bytes
     --------------                           -----
     packet_buff                               300
     cmdid_topic                                71
     req_payload                               151
     mqttUsername                               30
     OneNet_DevLink                            277
     OneNet_RevPro                             962
     pkt_id                                      2
     onenet_mqtt_send_heart                    108
     mqtt_publish_topic                        197
     mqtt_subscribe_topic                      208
     ??OneNet_DevLink?relay                      6
     ??OneNet_RevPro?relay                       6
     ??onenet_mqtt_send_heart?relay              6
     ??mqtt_publish_topic?relay                  6
     ??mqtt_subscribe_topic?relay                6
     ?<Constant {packet_buff, 0L, 300L, 2}>     11
     ?<Constant "%s&%s">                         6
     ?<Constant "device">                        7
     ?<Constant "a1xaMw4YerO">                  12
     ?<Constant "OneNet_DevLink\r\nmqttU...">   67
     ?<Constant "91bf398bee0b02f1592d9...">     65
     ?<Constant "a1xaMw4YerO.device|se...">     79
     ?<Constant "WARN:\tMQTT_PacketConn...">    34
     ?<Constant {packet_buff, 0L, 300L, 0}>     11
     ?<Constant "cmdid: %s, req: %s, r...">     34
     ?<Constant "Tips:\tSend CmdResp\r\n">      21
     ?<Constant "Tips:\tMQTT Publish Se...">    29
     ?<Constant "Tips:  HeartBeat OK\r\n">      22
     ?<Constant "topic: %s, topic_len:...">     57
     ?<Constant "Tips:  Send PublishAck\r\n">   25
     ?<Constant "Tips:  Send PublishRec\r\n">   25
     ?<Constant "Tips:  Rev PublishRec\r\n">    24
     ?<Constant "Tips:  Send PublishRel\r\n">   25
     ?<Constant "Tips:  Rev PublishRel\r\n">    24
     ?<Constant "Tips:  Send PublishCo...">     26
     ?<Constant "Tips:  Rev PublishComp\r\n">   25
     ?<Constant "Tips:  MQTT Subscribe...">     27
     ?<Constant "Tips:  MQTT Subscribe...">_1   28
     ?<Constant "Tips:  MQTT UnSubscri...">     29
     ?<Constant "Tips:  MQTT UnSubscri...">_1   30
     ?<Constant {packet_buff, 0L, 300L, 2}>_1   11
     ?<Constant "send heart\r\n">               13
     ?<Constant {packet_buff, 0L, 300L, 2}>_2   11
     ?<Constant "publish topic: %s, ms...">     29
     ?<Constant {packet_buff, 0L, 300L, 2}>_3   11
     ?<Constant "subscribe topic: %s\r\n">      22
     __Constant_0                                4
     __Constant_1                                4

 
 1 752 bytes in segment BANKED_CODE
    30 bytes in segment BANK_RELAYS
   848 bytes in segment XDATA_ROM_C
   554 bytes in segment XDATA_Z
 
 1 782 bytes of CODE  memory
   840 bytes of CONST memory (+ 8 bytes shared)
   554 bytes of XDATA memory

Errors: none
Warnings: 24
