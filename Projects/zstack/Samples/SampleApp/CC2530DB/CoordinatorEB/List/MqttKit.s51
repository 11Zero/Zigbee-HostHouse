///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.10.3.10338/W32 for 8051        10/Feb/2022  20:48:23 /
// Copyright 2004-2011 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data_rom                                          /
//    Dptr setup         =  1,16                                              /
//    Source file        =  e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\Source\MqttKit.c    /
//    Command line       =  -f e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\P /
//                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\. /
//                          .\Tools\CC2530DB\f8wCoord.cfg (-DCPU32MHZ         /
//                          -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TR /
//                          UE -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8     /
//                          -DMAC_CFG_RX_MAX=5 -DZDO_COORDINATOR -DRTR_NWK)   /
//                          -f e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\P /
//                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\. /
//                          .\Tools\CC2530DB\f8wConfig.cfg (-DZIGBEEPRO       /
//                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR      /
//                          -DDEFAULT_CHANLIST=0x00000800                     /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFF1                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DLINK_STATUS_JITTER_MASK=0x007F                  /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7           /
//                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3   /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40          /
//                          -DNWK_MAX_BINDING_ENTRIES=4                       /
//                          -DMAX_BINDING_CLUSTER_IDS=4                       /
//                          "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07, 0x09,     /
//                          0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08,   /
//                          0x0A, 0x0C, 0x0D}" -DMAC_MAX_FRAME_SIZE=116       /
//                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const    /
//                          __code" -DGENERIC=__generic                       /
//                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000       /
//                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)  /
//                          -DREJOIN_POLL_RATE=440 e:\imtht\Documents\Code\Zi /
//                          gbee\ZStack-2.5.1a\Projects\zstack\Samples\Sample /
//                          App\Source\MqttKit.c -D ZTOOL_P1 -D xMT_TASK -D   /
//                          xMT_SYS_FUNC -D xMT_ZDO_FUNC -D                   /
//                          LCD_SUPPORTED=DEBUG -lC                           /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\Coordinato /
//                          rEB\List\ -lA e:\imtht\Documents\Code\Zigbee\ZSta /
//                          ck-2.5.1a\Projects\zstack\Samples\SampleApp\CC253 /
//                          0DB\CoordinatorEB\List\ --diag_suppress           /
//                          Pe001,Pa010 -o e:\imtht\Documents\Code\Zigbee\ZSt /
//                          ack-2.5.1a\Projects\zstack\Samples\SampleApp\CC25 /
//                          30DB\CoordinatorEB\Obj\ -e --no_cse --no_unroll   /
//                          --no_inline --no_code_motion --no_tbaa --debug    /
//                          --core=plain --dptr=16,1 --data_model=large       /
//                          --code_model=banked --calling_convention=xdata_re /
//                          entrant --place_constants=data_rom                /
//                          --nr_virtual_regs 16 -I                           /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\ -I        /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\Source\ /
//                           -I e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\ /
//                          Projects\zstack\Samples\SampleApp\CC2530DB\..\..\ /
//                          ..\ZMain\TI2530DB\ -I e:\imtht\Documents\Code\Zig /
//                          bee\ZStack-2.5.1a\Projects\zstack\Samples\SampleA /
//                          pp\CC2530DB\..\..\..\..\..\Components\hal\include /
//                          \ -I e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a /
//                          \Projects\zstack\Samples\SampleApp\CC2530DB\..\.. /
//                          \..\..\..\Components\hal\target\CC2530EB\ -I      /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\mac\include\ -I                   /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\mac\high_level\ -I                /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\mac\low_level\srf04\ -I           /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\mac\low_level\srf04\single_chip\  /
//                          -I e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\P /
//                          rojects\zstack\Samples\SampleApp\CC2530DB\..\..\. /
//                          .\..\..\Components\mt\ -I                         /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\osal\include\ -I                  /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\services\saddr\ -I                /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\services\sdata\ -I                /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\stack\af\ -I                      /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\stack\nwk\ -I                     /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\stack\sapi\ -I                    /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\stack\sec\ -I                     /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\stack\sys\ -I                     /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\stack\zdo\ -I                     /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\zmac\ -I                          /
//                          e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\..\..\..\. /
//                          .\..\Components\zmac\f8w\ -On                     /
//    List file          =  e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Proj /
//                          ects\zstack\Samples\SampleApp\CC2530DB\Coordinato /
//                          rEB\List\MqttKit.s51                              /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME MqttKit

        RTMODEL "__SystemLibrary", "CLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ?ALLOC_XSTACK8
        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?L_ADD
        EXTERN ?L_ADD_TO_X
        EXTERN ?L_ADD_X
        EXTERN ?L_MOV_TO_X
        EXTERN ?L_MOV_X
        EXTERN ?L_MUL
        EXTERN ?L_SHL
        EXTERN ?MOVE_LONG8_XDATA_XDATA
        EXTERN ?PUSH_XSTACK8_X_FOUR
        EXTERN ?PUSH_XSTACK8_X_TWO
        EXTERN ?PUSH_XSTACK_I_FOUR
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?SL_GE_X
        EXTERN ?SL_GT
        EXTERN ?UL_GE_X
        EXTERN ?UL_GT_X
        EXTERN ?US_DIV_MOD
        EXTERN ?US_SHR
        EXTERN ?V0
        EXTERN ?VB
        EXTERN ?XLOAD_R2345
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN ?XSTORE_R2345

        PUBLIC ??MQTT_DeleteBuffer?relay
        FUNCTION ??MQTT_DeleteBuffer?relay,0203H
        PUBLIC ??MQTT_DumpLength?relay
        FUNCTION ??MQTT_DumpLength?relay,0203H
        PUBLIC ??MQTT_NewBuffer?relay
        FUNCTION ??MQTT_NewBuffer?relay,0203H
        PUBLIC ??MQTT_PacketCmdResp?relay
        FUNCTION ??MQTT_PacketCmdResp?relay,0203H
        PUBLIC ??MQTT_PacketConnect?relay
        FUNCTION ??MQTT_PacketConnect?relay,0203H
        PUBLIC ??MQTT_PacketDisConnect?relay
        FUNCTION ??MQTT_PacketDisConnect?relay,0203H
        PUBLIC ??MQTT_PacketPing?relay
        FUNCTION ??MQTT_PacketPing?relay,0203H
        PUBLIC ??MQTT_PacketPublish?relay
        FUNCTION ??MQTT_PacketPublish?relay,0203H
        PUBLIC ??MQTT_PacketPublishAck?relay
        FUNCTION ??MQTT_PacketPublishAck?relay,0203H
        PUBLIC ??MQTT_PacketPublishComp?relay
        FUNCTION ??MQTT_PacketPublishComp?relay,0203H
        PUBLIC ??MQTT_PacketPublishRec?relay
        FUNCTION ??MQTT_PacketPublishRec?relay,0203H
        PUBLIC ??MQTT_PacketPublishRel?relay
        FUNCTION ??MQTT_PacketPublishRel?relay,0203H
        PUBLIC ??MQTT_PacketSaveData?relay
        FUNCTION ??MQTT_PacketSaveData?relay,0203H
        PUBLIC ??MQTT_PacketSubscribe?relay
        FUNCTION ??MQTT_PacketSubscribe?relay,0203H
        PUBLIC ??MQTT_PacketUnSubscribe?relay
        FUNCTION ??MQTT_PacketUnSubscribe?relay,0203H
        PUBLIC ??MQTT_ReadLength?relay
        FUNCTION ??MQTT_ReadLength?relay,0203H
        PUBLIC ??MQTT_UnPacketCmd?relay
        FUNCTION ??MQTT_UnPacketCmd?relay,0203H
        PUBLIC ??MQTT_UnPacketConnectAck?relay
        FUNCTION ??MQTT_UnPacketConnectAck?relay,0203H
        PUBLIC ??MQTT_UnPacketPublish?relay
        FUNCTION ??MQTT_UnPacketPublish?relay,0203H
        PUBLIC ??MQTT_UnPacketPublishAck?relay
        FUNCTION ??MQTT_UnPacketPublishAck?relay,0203H
        PUBLIC ??MQTT_UnPacketPublishComp?relay
        FUNCTION ??MQTT_UnPacketPublishComp?relay,0203H
        PUBLIC ??MQTT_UnPacketPublishRec?relay
        FUNCTION ??MQTT_UnPacketPublishRec?relay,0203H
        PUBLIC ??MQTT_UnPacketPublishRel?relay
        FUNCTION ??MQTT_UnPacketPublishRel?relay,0203H
        PUBLIC ??MQTT_UnPacketRecv?relay
        FUNCTION ??MQTT_UnPacketRecv?relay,0203H
        PUBLIC ??MQTT_UnPacketSubscribe?relay
        FUNCTION ??MQTT_UnPacketSubscribe?relay,0203H
        PUBLIC ??MQTT_UnPacketUnSubscribe?relay
        FUNCTION ??MQTT_UnPacketUnSubscribe?relay,0203H
        PUBLIC MQTT_DeleteBuffer
        FUNCTION MQTT_DeleteBuffer,0203H
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC MQTT_DumpLength
        FUNCTION MQTT_DumpLength,0203H
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 20, STACK
        PUBLIC MQTT_NewBuffer
        FUNCTION MQTT_NewBuffer,0203H
        ARGFRAME XSTACK, 38, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 20, STACK
        PUBLIC MQTT_PacketCmdResp
        FUNCTION MQTT_PacketCmdResp,021203H
        ARGFRAME XSTACK, 2, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 84, STACK
        PUBLIC MQTT_PacketConnect
        FUNCTION MQTT_PacketConnect,021203H
        ARGFRAME XSTACK, 15, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 33, STACK
        PUBLIC MQTT_PacketDisConnect
        FUNCTION MQTT_PacketDisConnect,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        PUBLIC MQTT_PacketPing
        FUNCTION MQTT_PacketPing,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        PUBLIC MQTT_PacketPublish
        FUNCTION MQTT_PacketPublish,021203H
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 38, STACK
        PUBLIC MQTT_PacketPublishAck
        FUNCTION MQTT_PacketPublishAck,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 20, STACK
        PUBLIC MQTT_PacketPublishComp
        FUNCTION MQTT_PacketPublishComp,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 20, STACK
        PUBLIC MQTT_PacketPublishRec
        FUNCTION MQTT_PacketPublishRec,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 20, STACK
        PUBLIC MQTT_PacketPublishRel
        FUNCTION MQTT_PacketPublishRel,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 20, STACK
        PUBLIC MQTT_PacketSaveData
        FUNCTION MQTT_PacketSaveData,021203H
        ARGFRAME XSTACK, 4, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 36, STACK
        PUBLIC MQTT_PacketSubscribe
        FUNCTION MQTT_PacketSubscribe,021203H
        ARGFRAME XSTACK, 3, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 33, STACK
        PUBLIC MQTT_PacketUnSubscribe
        FUNCTION MQTT_PacketUnSubscribe,021203H
        ARGFRAME XSTACK, 2, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC MQTT_ReadLength
        FUNCTION MQTT_ReadLength,0203H
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 28, STACK
        PUBLIC MQTT_UnPacketCmd
        FUNCTION MQTT_UnPacketCmd,021203H
        ARGFRAME XSTACK, 4, STACK
        LOCFRAME XSTACK, 28, STACK
        PUBLIC MQTT_UnPacketConnectAck
        FUNCTION MQTT_UnPacketConnectAck,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC MQTT_UnPacketPublish
        FUNCTION MQTT_UnPacketPublish,021203H
        ARGFRAME XSTACK, 10, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 32, STACK
        PUBLIC MQTT_UnPacketPublishAck
        FUNCTION MQTT_UnPacketPublishAck,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC MQTT_UnPacketPublishComp
        FUNCTION MQTT_UnPacketPublishComp,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC MQTT_UnPacketPublishRec
        FUNCTION MQTT_UnPacketPublishRec,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC MQTT_UnPacketPublishRel
        FUNCTION MQTT_UnPacketPublishRel,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 3, STACK
        PUBLIC MQTT_UnPacketRecv
        FUNCTION MQTT_UnPacketRecv,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 24, STACK
        PUBLIC MQTT_UnPacketSubscribe
        FUNCTION MQTT_UnPacketSubscribe,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC MQTT_UnPacketUnSubscribe
        FUNCTION MQTT_UnPacketUnSubscribe,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBWEAK __Constant_0
        PUBWEAK __Constant_1
        PUBWEAK __Constant_2
        PUBWEAK __Constant_200000
        PUBWEAK __Constant_3
        PUBWEAK __Constant_4
        PUBWEAK __Constant_5
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP IDATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource V8:8, V9:8, V10:8, V11:8, V12:8, V13:8, V14:8, V15:8, SP:8
        CFI Resource PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:24
        CFI Resource ?BRET_EXT:8
        CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-3
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI V8 SameValue
        CFI V9 SameValue
        CFI V10 SameValue
        CFI V11 SameValue
        CFI V12 SameValue
        CFI V13 SameValue
        CFI V14 SameValue
        CFI V15 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT Frame(CFA_SP, 3)
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
strstr              SYMBOL "strstr"
strlen              SYMBOL "strlen"
osal_memset         SYMBOL "osal_memset"
strncat             SYMBOL "strncat"
strchr              SYMBOL "strchr"
debug               SYMBOL "debug"
memset              SYMBOL "memset"
memcpy              SYMBOL "memcpy"
sprintf             SYMBOL "sprintf"
??debug?relay       SYMBOL "?relay", debug
??memcpy?relay      SYMBOL "?relay", memcpy
??memset?relay      SYMBOL "?relay", memset
??osal_memset?relay SYMBOL "?relay", osal_memset
??sprintf?relay     SYMBOL "?relay", sprintf
??strchr?relay      SYMBOL "?relay", strchr
??strlen?relay      SYMBOL "?relay", strlen
??strncat?relay     SYMBOL "?relay", strncat
??strstr?relay      SYMBOL "?relay", strstr
MQTT_DeleteBuffer   SYMBOL "MQTT_DeleteBuffer"
??MQTT_DeleteBuffer?relay SYMBOL "?relay", MQTT_DeleteBuffer
MQTT_DumpLength     SYMBOL "MQTT_DumpLength"
??MQTT_DumpLength?relay SYMBOL "?relay", MQTT_DumpLength
MQTT_NewBuffer      SYMBOL "MQTT_NewBuffer"
??MQTT_NewBuffer?relay SYMBOL "?relay", MQTT_NewBuffer
MQTT_PacketCmdResp  SYMBOL "MQTT_PacketCmdResp"
??MQTT_PacketCmdResp?relay SYMBOL "?relay", MQTT_PacketCmdResp
MQTT_PacketConnect  SYMBOL "MQTT_PacketConnect"
??MQTT_PacketConnect?relay SYMBOL "?relay", MQTT_PacketConnect
MQTT_PacketDisConnect SYMBOL "MQTT_PacketDisConnect"
??MQTT_PacketDisConnect?relay SYMBOL "?relay", MQTT_PacketDisConnect
MQTT_PacketPing     SYMBOL "MQTT_PacketPing"
??MQTT_PacketPing?relay SYMBOL "?relay", MQTT_PacketPing
MQTT_PacketPublish  SYMBOL "MQTT_PacketPublish"
??MQTT_PacketPublish?relay SYMBOL "?relay", MQTT_PacketPublish
MQTT_PacketPublishAck SYMBOL "MQTT_PacketPublishAck"
??MQTT_PacketPublishAck?relay SYMBOL "?relay", MQTT_PacketPublishAck
MQTT_PacketPublishComp SYMBOL "MQTT_PacketPublishComp"
??MQTT_PacketPublishComp?relay SYMBOL "?relay", MQTT_PacketPublishComp
MQTT_PacketPublishRec SYMBOL "MQTT_PacketPublishRec"
??MQTT_PacketPublishRec?relay SYMBOL "?relay", MQTT_PacketPublishRec
MQTT_PacketPublishRel SYMBOL "MQTT_PacketPublishRel"
??MQTT_PacketPublishRel?relay SYMBOL "?relay", MQTT_PacketPublishRel
MQTT_PacketSaveData SYMBOL "MQTT_PacketSaveData"
??MQTT_PacketSaveData?relay SYMBOL "?relay", MQTT_PacketSaveData
MQTT_PacketSubscribe SYMBOL "MQTT_PacketSubscribe"
??MQTT_PacketSubscribe?relay SYMBOL "?relay", MQTT_PacketSubscribe
MQTT_PacketUnSubscribe SYMBOL "MQTT_PacketUnSubscribe"
??MQTT_PacketUnSubscribe?relay SYMBOL "?relay", MQTT_PacketUnSubscribe
MQTT_ReadLength     SYMBOL "MQTT_ReadLength"
??MQTT_ReadLength?relay SYMBOL "?relay", MQTT_ReadLength
MQTT_UnPacketCmd    SYMBOL "MQTT_UnPacketCmd"
??MQTT_UnPacketCmd?relay SYMBOL "?relay", MQTT_UnPacketCmd
MQTT_UnPacketConnectAck SYMBOL "MQTT_UnPacketConnectAck"
??MQTT_UnPacketConnectAck?relay SYMBOL "?relay", MQTT_UnPacketConnectAck
MQTT_UnPacketPublish SYMBOL "MQTT_UnPacketPublish"
??MQTT_UnPacketPublish?relay SYMBOL "?relay", MQTT_UnPacketPublish
MQTT_UnPacketPublishAck SYMBOL "MQTT_UnPacketPublishAck"
??MQTT_UnPacketPublishAck?relay SYMBOL "?relay", MQTT_UnPacketPublishAck
MQTT_UnPacketPublishComp SYMBOL "MQTT_UnPacketPublishComp"
??MQTT_UnPacketPublishComp?relay SYMBOL "?relay", MQTT_UnPacketPublishComp
MQTT_UnPacketPublishRec SYMBOL "MQTT_UnPacketPublishRec"
??MQTT_UnPacketPublishRec?relay SYMBOL "?relay", MQTT_UnPacketPublishRec
MQTT_UnPacketPublishRel SYMBOL "MQTT_UnPacketPublishRel"
??MQTT_UnPacketPublishRel?relay SYMBOL "?relay", MQTT_UnPacketPublishRel
MQTT_UnPacketRecv   SYMBOL "MQTT_UnPacketRecv"
??MQTT_UnPacketRecv?relay SYMBOL "?relay", MQTT_UnPacketRecv
MQTT_UnPacketSubscribe SYMBOL "MQTT_UnPacketSubscribe"
??MQTT_UnPacketSubscribe?relay SYMBOL "?relay", MQTT_UnPacketSubscribe
MQTT_UnPacketUnSubscribe SYMBOL "MQTT_UnPacketUnSubscribe"
??MQTT_UnPacketUnSubscribe?relay SYMBOL "?relay", MQTT_UnPacketUnSubscribe

        EXTERN strstr
        FUNCTION strstr,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN strlen
        FUNCTION strlen,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 78, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memset
        FUNCTION osal_memset,0200H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN strncat
        FUNCTION strncat,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN strchr
        FUNCTION strchr,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN debug
        FUNCTION debug,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN memset
        FUNCTION memset,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN memcpy
        FUNCTION memcpy,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN sprintf
        FUNCTION sprintf,0200H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 70, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??debug?relay
        FUNCTION ??debug?relay,00H
        EXTERN ??memcpy?relay
        FUNCTION ??memcpy?relay,00H
        EXTERN ??memset?relay
        FUNCTION ??memset?relay,00H
        EXTERN ??osal_memset?relay
        FUNCTION ??osal_memset?relay,00H
        EXTERN ??sprintf?relay
        FUNCTION ??sprintf?relay,00H
        EXTERN ??strchr?relay
        FUNCTION ??strchr?relay,00H
        EXTERN ??strlen?relay
        FUNCTION ??strlen?relay,00H
        EXTERN ??strncat?relay
        FUNCTION ??strncat?relay,00H
        EXTERN ??strstr?relay
        FUNCTION ??strstr?relay,00H

// e:\imtht\Documents\Code\Zigbee\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\MqttKit.c
//    1 /**
//    2 	************************************************************
//    3 	************************************************************
//    4 	************************************************************
//    5 	*	文件名： 	MqttKit.c
//    6 	*
//    7 	*	作者： 		
//    8 	*
//    9 	*	日期： 		2018-04-27
//   10 	*
//   11 	*	版本： 		V1.4
//   12 	*
//   13 	*	说明： 		MQTT协议
//   14 	*
//   15 	*	修改记录：	V1.1：解决MQTT_PacketSubscribe订阅不为2个topic
//   16 	*						个数时协议错误的bug
//   17 	*				V1.2：修复MQTT_PacketCmdResp的bug
//   18 	*				V1.3：将strncpy替换为memcpy，解决潜在bug
//   19 	*				V1.4：修复	MQTT_PacketPublishAck
//   20 	*							MQTT_PacketPublishRel
//   21 	*							函数封包错误的bug
//   22 	*				V1.5：增加	MQTT_UnPacketCmd
//   23 	*							MQTT_UnPacketPublish
//   24 	*							接口对消息内容长度的提取参数
//   25 	************************************************************
//   26 	************************************************************
//   27 	************************************************************
//   28 **/
//   29 
//   30 //协议头文件
//   31 #include "MqttKit.h"
//   32 #include "mqtt.h"
//   33 
//   34 //C库
//   35 #include <string.h>
//   36 
//   37 
//   38 #define CMD_TOPIC_PREFIX		"$creq"
//   39 
//   40 
//   41 //==========================================================
//   42 //	函数名称：	EDP_NewBuffer
//   43 //
//   44 //	函数功能：	申请内存
//   45 //
//   46 //	入口参数：	edpPacket：包结构体
//   47 //				size：大小
//   48 //
//   49 //	返回参数：	无
//   50 //
//   51 //	说明：		1.可使用动态分配来分配内存
//   52 //				2.可使用局部或全局数组来指定内存
//   53 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   54 void MQTT_NewBuffer(MQTT_PACKET_STRUCTURE *mqttPacket, uint32 size)
MQTT_NewBuffer:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function MQTT_NewBuffer
        CODE
//   55 {	
        MOV     A,#-0x14
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     A,#0x14
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//   56 	uint32 i = 0;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
//   57 
//   58 	mqttPacket->_memFlag = MEM_FLAG_STATIC;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x2
        MOVX    @DPTR,A
//   59 	
//   60 	for(i = 0; i < mqttPacket->_size; i++)
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
??MQTT_NewBuffer_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 8
        LCALL   ?UL_GE_X
        JC      ??MQTT_NewBuffer_1
//   61 		mqttPacket->_data[i] = 0;
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 8
        LCALL   ?L_ADD_X
        SJMP    ??MQTT_NewBuffer_0
//   62 	
//   63 	mqttPacket->_len = 0;
??MQTT_NewBuffer_1:
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        LCALL   ?XSTORE_R2345
//   64 	
//   65 	if(mqttPacket->_size < size)
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?UL_GT_X
        JNC     ??MQTT_NewBuffer_2
//   66 		mqttPacket->_data = NULL;
        MOV     DPL,R6
        MOV     DPH,R7
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//   67 }
??MQTT_NewBuffer_2:
        MOV     R7,#0xc
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock0
//   68 
//   69 //==========================================================
//   70 //	函数名称：	MQTT_DeleteBuffer
//   71 //
//   72 //	函数功能：	释放数据内存
//   73 //
//   74 //	入口参数：	edpPacket：包结构体
//   75 //
//   76 //	返回参数：	无
//   77 //
//   78 //	说明：		
//   79 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   80 void MQTT_DeleteBuffer(MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_DeleteBuffer:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function MQTT_DeleteBuffer
        CODE
//   81 {
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R2
        MOV     R0,A
        MOV     A,R3
        MOV     R1,A
//   82 	mqttPacket->_data = NULL;
        MOV     DPL,R0
        MOV     DPH,R1
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//   83 	mqttPacket->_len = 0;
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,R0
        MOV     DPH,R1
        INC     DPTR
        INC     DPTR
        LCALL   ?XSTORE_R2345
//   84 	mqttPacket->_size = 0;
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,R0
        MOV     DPH,R1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        LCALL   ?XSTORE_R2345
//   85 	mqttPacket->_memFlag = MEM_FLAG_NULL;
        MOV     DPL,R0
        MOV     DPH,R1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
//   86 
//   87 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock1
//   88 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//   89 int32 MQTT_DumpLength(size_t len, uint8 *buf)
MQTT_DumpLength:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function MQTT_DumpLength
        CODE
//   90 {
        MOV     A,#-0x14
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,R5
//   91 	
//   92 	int32 i = 0;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//   93 	
//   94 	for(i = 1; i <= 4; ++i)
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
        MOV     ?V0 + 6,?V0 + 10
        MOV     ?V0 + 7,?V0 + 11
??MQTT_DumpLength_0:
        MOV     DPTR,#__Constant_5
        MOV     R0,#?V0 + 4
        LCALL   ?SL_GE_X
        JC      ??MQTT_DumpLength_1
//   95 	{
//   96 		*buf = len % 128;
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        MOV     R2,#-0x80
        MOV     R3,#0x0
        LCALL   ?US_DIV_MOD
        MOV     A,R2
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    @DPTR,A
//   97 		len >>= 7;
        MOV     ?V0 + 2,R6
        MOV     ?V0 + 3,R7
        MOV     A,#0x7
        MOV     R0,#?V0 + 2
        LCALL   ?US_SHR
        MOV     R6,?V0 + 2
        MOV     R7,?V0 + 3
//   98 		if(len > 0)
        MOV     A,R6
        ORL     A,R7
        JZ      ??MQTT_DumpLength_2
//   99 		{
//  100 			*buf |= 128;
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.7
        MOVX    @DPTR,A
//  101 			++buf;
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
//  102 		}
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_X
        SJMP    ??MQTT_DumpLength_0
//  103 		else
//  104 		{
//  105 			return i;
??MQTT_DumpLength_2:
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        SJMP    ??MQTT_DumpLength_3
//  106 		}
//  107 	}
//  108 
//  109 	return -1;
??MQTT_DumpLength_1:
        MOV     R2,#-0x1
        MOV     R3,#-0x1
        MOV     R4,#-0x1
        MOV     R5,#-0x1
??MQTT_DumpLength_3:
        MOV     R7,#0xc
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock2
//  110 }
//  111 

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  112 int32 MQTT_ReadLength(const uint8 *stream, int32 size, uint32 *len)
MQTT_ReadLength:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function MQTT_ReadLength
        CODE
//  113 {
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 4
        MOV     A,#-0x4
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x1c
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
//  114 	
//  115 	int32 i;
//  116 	const uint8 *in = stream;
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
//  117 	uint32 multiplier = 1;
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
//  118 
//  119 	*len = 0;
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        LCALL   ?XSTORE_R2345
//  120 	for(i = 0; i < size; ++i)
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
??MQTT_ReadLength_0:
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 8
        LCALL   ?SL_GT
        JC      $+5
        LJMP    ??MQTT_ReadLength_1 & 0xFFFF
//  121 	{
//  122 		*len += (in[i] & 0x7f) * multiplier;
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     A,R6
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,?V0 + 1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        ANL     A,#0x7f
        MOV     ?V0 + 0,A
        MOV     A,R1
        ANL     A,#0x0
        MOV     ?V0 + 1,A
        MOV     A,?V0 + 1
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 12
        LCALL   ?L_MUL
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  123 
//  124 		if(!(in[i] & 0x80))
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     A,R6
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,?V0 + 1
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.7
        JC      ??MQTT_ReadLength_2
//  125 		{
//  126 			return i + 1;
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 8
        LCALL   ?L_ADD_X
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        MOV     R4,?V0 + 10
        MOV     R5,?V0 + 11
        SJMP    ??MQTT_ReadLength_3
//  127 		}
//  128 
//  129 		multiplier <<= 7;
??MQTT_ReadLength_2:
        MOV     A,#0x7
        MOV     R0,#?V0 + 12
        LCALL   ?L_SHL
//  130 		if(multiplier >= 2097152)		//128 * *128 * *128
        MOV     DPTR,#__Constant_200000
        MOV     R0,#?V0 + 12
        LCALL   ?UL_GE_X
        JNC     ??MQTT_ReadLength_4
//  131 		{
//  132 			return -2;					// error, out of range
        MOV     R2,#-0x2
        MOV     R3,#-0x1
        MOV     R4,#-0x1
        MOV     R5,#-0x1
        SJMP    ??MQTT_ReadLength_3
//  133 		}
//  134 	}
??MQTT_ReadLength_4:
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 8
        LCALL   ?L_ADD_X
        LJMP    ??MQTT_ReadLength_0 & 0xFFFF
//  135 
//  136 	return -1;							// not complete
??MQTT_ReadLength_1:
        MOV     R2,#-0x1
        MOV     R3,#-0x1
        MOV     R4,#-0x1
        MOV     R5,#-0x1
??MQTT_ReadLength_3:
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock3
//  137 
//  138 }
//  139 
//  140 //==========================================================
//  141 //	函数名称：	MQTT_UnPacketRecv
//  142 //
//  143 //	函数功能：	MQTT数据接收类型判断
//  144 //
//  145 //	入口参数：	dataPtr：接收的数据指针
//  146 //
//  147 //	返回参数：	0-成功		其他-失败原因
//  148 //
//  149 //	说明：		
//  150 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  151 uint8 MQTT_UnPacketRecv(uint8 *dataPtr)
MQTT_UnPacketRecv:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function MQTT_UnPacketRecv
        CODE
//  152 {
        FUNCALL MQTT_UnPacketRecv, MQTT_ReadLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketRecv, strstr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 4
        MOV     A,#-0x4
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  153 	
//  154 	uint8 status = 255;
        MOV     ?V0 + 0,#-0x1
//  155 	uint8 type = dataPtr[0] >> 4;				//类型检查
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        SWAP    A
        ANL     A,#0xf
        MOV     ?V0 + 1,A
//  156 	
//  157 	if(type < 1 || type > 14)
        MOV     A,?V0 + 1
        CLR     C
        SUBB    A,#0x1
        JC      ??MQTT_UnPacketRecv_0
        MOV     A,?V0 + 1
        CLR     C
        SUBB    A,#0xf
        JC      ??MQTT_UnPacketRecv_1
//  158 		return status;
??MQTT_UnPacketRecv_0:
        MOV     R1,?V0 + 0
        LJMP    ??MQTT_UnPacketRecv_2 & 0xFFFF
//  159 	
//  160 	if(type == MQTT_PKT_PUBLISH)
??MQTT_UnPacketRecv_1:
        MOV     A,#0x3
        XRL     A,?V0 + 1
        JZ      $+5
        LJMP    ??MQTT_UnPacketRecv_3 & 0xFFFF
//  161 	{
//  162 		uint8 *msgPtr;
//  163 		uint32 remain_len = 0;
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  164 		
//  165 		msgPtr = dataPtr + MQTT_ReadLength(dataPtr + 1, 4, &remain_len) + 1;
        ; Setup parameters for call to function MQTT_ReadLength
        MOV     DPTR,#__Constant_4
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??MQTT_ReadLength?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
        MOV     A,R6
        ADD     A,?V0 + 4
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,?V0 + 5
        MOV     DPH,A
        INC     DPTR
        MOV     ?V0 + 2,DPL
        MOV     ?V0 + 3,DPH
//  166 		
//  167 		if(remain_len < 2 || dataPtr[0] & 0x01)					//retain
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPTR,#__Constant_2
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,#?V0 + 4
        LCALL   ?UL_GT_X
        JC      ??MQTT_UnPacketRecv_4
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.0
        JNC     ??MQTT_UnPacketRecv_5
//  168 			return 255;
??MQTT_UnPacketRecv_4:
        MOV     R1,#-0x1
        SJMP    ??MQTT_UnPacketRecv_2
//  169 		
//  170 		if(remain_len < ((uint16)msgPtr[0] << 8 | msgPtr[1]) + 2)
??MQTT_UnPacketRecv_5:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        CLR     A
        XCH     A,R0
        MOV     R1,A
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R0
        ORL     A,R2
        MOV     R0,A
        MOV     A,R1
        ORL     A,R3
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x2
        MOV     ?V0 + 4,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,#?V0 + 4
        LCALL   ?UL_GT_X
        JNC     ??MQTT_UnPacketRecv_6
//  171 			return 255;
        MOV     R1,#-0x1
        SJMP    ??MQTT_UnPacketRecv_2
//  172 		
//  173 		if(strstr((int8 *)msgPtr + 2, CMD_TOPIC_PREFIX) != NULL)	//如果是命令下发
??MQTT_UnPacketRecv_6:
        ; Setup parameters for call to function strstr
        MOV     R4,#`?<Constant "$creq">` & 0xff
        MOV     R5,#(`?<Constant "$creq">` >> 8) & 0xff
        MOV     A,?V0 + 2
        ADD     A,#0x2
        MOV     R2,A
        MOV     A,?V0 + 3
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??strstr?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        JZ      ??MQTT_UnPacketRecv_7
//  174 			status = MQTT_PKT_CMD;
        MOV     ?V0 + 0,#0xf
        SJMP    ??MQTT_UnPacketRecv_8
//  175 		else
//  176 			status = MQTT_PKT_PUBLISH;
??MQTT_UnPacketRecv_7:
        MOV     ?V0 + 0,#0x3
        SJMP    ??MQTT_UnPacketRecv_8
//  177 	}
//  178 	else
//  179 		status = type;
??MQTT_UnPacketRecv_3:
        MOV     ?V0 + 0,?V0 + 1
//  180 	
//  181 	return status;
??MQTT_UnPacketRecv_8:
        MOV     R1,?V0 + 0
??MQTT_UnPacketRecv_2:
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock4
//  182 
//  183 }
//  184 
//  185 //==========================================================
//  186 //	函数名称：	MQTT_PacketConnect
//  187 //
//  188 //	函数功能：	连接消息组包
//  189 //
//  190 //	入口参数：	user：用户名：产品ID
//  191 //				password：密码：鉴权信息或apikey
//  192 //				devid：设备ID
//  193 //				cTime：连接保持时间
//  194 //				clean_session：离线消息清除标志
//  195 //				qos：重发标志
//  196 //				will_topic：异常离线topic
//  197 //				will_msg：异常离线消息
//  198 //				will_retain：消息推送标志
//  199 //				mqttPacket：包指针
//  200 //
//  201 //	返回参数：	0-成功		其他-失败
//  202 //
//  203 //	说明：		
//  204 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  205 uint8 MQTT_PacketConnect(const int8 *user, const int8 *password, const int8 *devid,
MQTT_PacketConnect:
        CFI Block cfiBlock5 Using cfiCommon0
        CFI Function MQTT_PacketConnect
        CODE
//  206 						uint16 cTime, uint1 clean_session, uint1 qos,
//  207 						const int8 *will_topic, const int8 *will_msg, int32 will_retain,
//  208 						MQTT_PACKET_STRUCTURE *mqttPacket)
//  209 {
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, MQTT_DumpLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, MQTT_DeleteBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketConnect, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 5
        MOV     A,#-0x5
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     A,#0x1f
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 14,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 15,A
        MOV     A,#0x2a
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
//  210 	
//  211 	uint8 flags = 0;
        MOV     ?V0 + 10,#0x0
//  212 	uint8 will_topic_len = 0;
        MOV     ?V0 + 11,#0x0
//  213 	uint16 total_len = 15;
        MOV     ?V0 + 8,#0xf
        MOV     ?V0 + 9,#0x0
//  214 	int16 len = 0, devid_len = strlen(devid);
        MOV     ?V0 + 12,#0x0
        MOV     ?V0 + 13,#0x0
        ; Setup parameters for call to function strlen
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,?V0 + 0
        MOV     ?V0 + 3,?V0 + 1
//  215 	
//  216 	if(!devid)
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketConnect_0
//  217 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketConnect_1 & 0xFFFF
//  218 	
//  219 	total_len += devid_len + 2;
??MQTT_PacketConnect_0:
        MOV     A,?V0 + 2
        ADD     A,#0x2
        MOV     R0,A
        MOV     A,?V0 + 3
        ADDC    A,#0x0
        MOV     R1,A
        MOV     A,?V0 + 8
        ADD     A,R0
        MOV     ?V0 + 8,A
        MOV     A,?V0 + 9
        ADDC    A,R1
        MOV     ?V0 + 9,A
//  220 	
//  221 	//断线后，是否清理离线消息：1-清理	0-不清理--------------------------------------------
//  222 	if(clean_session)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        JZ      ??MQTT_PacketConnect_2
//  223 	{
//  224 		flags |= MQTT_CONNECT_CLEAN_SESSION;
        SETB    C
        MOV     A,?V0 + 10
        MOV     0xE0 /* A   */.1,C
        MOV     ?V0 + 10,A
//  225 	}
//  226 	
//  227 	//异常掉线情况下，服务器发布的topic------------------------------------------------------
//  228 	if(will_topic)
??MQTT_PacketConnect_2:
        MOV     A,#0x22
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??MQTT_PacketConnect_3
//  229 	{
//  230 		flags |= MQTT_CONNECT_WILL_FLAG;
        SETB    C
        MOV     A,?V0 + 10
        MOV     0xE0 /* A   */.2,C
        MOV     ?V0 + 10,A
//  231 		will_topic_len = strlen(will_topic);
        ; Setup parameters for call to function strlen
        MOV     A,#0x22
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     A,R2
        MOV     ?V0 + 11,A
//  232 		total_len += 4 + will_topic_len + strlen(will_msg);
        MOV     ?V0 + 0,?V0 + 11
        MOV     ?V0 + 1,#0x0
        MOV     A,?V0 + 0
        ADD     A,#0x4
        MOV     ?V0 + 0,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     ?V0 + 1,A
        ; Setup parameters for call to function strlen
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,?V0 + 0
        ADD     A,?V0 + 4
        MOV     R0,A
        MOV     A,?V0 + 1
        ADDC    A,?V0 + 5
        MOV     R1,A
        MOV     A,?V0 + 8
        ADD     A,R0
        MOV     ?V0 + 8,A
        MOV     A,?V0 + 9
        ADDC    A,R1
        MOV     ?V0 + 9,A
//  233 	}
//  234 	
//  235 	//qos级别--主要用于PUBLISH（发布态）消息的，保证消息传递的次数-----------------------------
//  236 	switch((unsigned char)qos)
??MQTT_PacketConnect_3:
        MOV     A,#0x21
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        JZ      ??MQTT_PacketConnect_4
        DEC     A
        JZ      ??MQTT_PacketConnect_5
        DEC     A
        JZ      ??MQTT_PacketConnect_6
        SJMP    ??MQTT_PacketConnect_7
//  237 	{
//  238 		case MQTT_QOS_LEVEL0:
//  239 			flags |= MQTT_CONNECT_WILL_QOS0;							//最多一次
//  240 		break;
//  241 		
//  242 		case MQTT_QOS_LEVEL1:
//  243 			flags |= (MQTT_CONNECT_WILL_FLAG | MQTT_CONNECT_WILL_QOS1);	//最少一次
??MQTT_PacketConnect_5:
        ORL     ?V0 + 10,#0xc
//  244 		break;
        SJMP    ??MQTT_PacketConnect_4
//  245 		
//  246 		case MQTT_QOS_LEVEL2:
//  247 			flags |= (MQTT_CONNECT_WILL_FLAG | MQTT_CONNECT_WILL_QOS2);	//只有一次
??MQTT_PacketConnect_6:
        ORL     ?V0 + 10,#0x14
//  248 		break;
        SJMP    ??MQTT_PacketConnect_4
//  249 		
//  250 		default:
//  251 		return 2;
??MQTT_PacketConnect_7:
        MOV     R1,#0x2
        LJMP    ??MQTT_PacketConnect_1 & 0xFFFF
//  252 	}
//  253 	
//  254 	//主要用于PUBLISH(发布态)的消息，表示服务器要保留这次推送的信息，如果有新的订阅者出现，就把这消息推送给它。如果不设那么推送至当前订阅的就释放了
//  255 	if(will_retain)
??MQTT_PacketConnect_4:
        MOV     A,#0x26
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        ORL     A,?V0 + 6
        ORL     A,?V0 + 7
        JZ      ??MQTT_PacketConnect_8
//  256 	{
//  257 		flags |= (MQTT_CONNECT_WILL_FLAG | MQTT_CONNECT_WILL_RETAIN);
        ORL     ?V0 + 10,#0x24
//  258 	}
//  259 	
//  260 	//账号为空 密码为空---------------------------------------------------------------------
//  261 	if(!user || !password)
??MQTT_PacketConnect_8:
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??MQTT_PacketConnect_9
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketConnect_10
//  262 	{
//  263 		return 3;
??MQTT_PacketConnect_9:
        MOV     R1,#0x3
        LJMP    ??MQTT_PacketConnect_1 & 0xFFFF
//  264 	}
//  265 	flags |= MQTT_CONNECT_USER_NAME | MQTT_CONNECT_PASSORD;
??MQTT_PacketConnect_10:
        ORL     ?V0 + 10,#0xc0
//  266 	
//  267 	total_len += strlen(user) + strlen(password) + 4;
        ; Setup parameters for call to function strlen
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        ; Setup parameters for call to function strlen
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,?V0 + 0
        ADD     A,?V0 + 4
        MOV     R0,A
        MOV     A,?V0 + 1
        ADDC    A,?V0 + 5
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x4
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R1,A
        MOV     A,?V0 + 8
        ADD     A,R0
        MOV     ?V0 + 8,A
        MOV     A,?V0 + 9
        ADDC    A,R1
        MOV     ?V0 + 9,A
//  268 	
//  269 	//分配内存-----------------------------------------------------------------------------
//  270 	MQTT_NewBuffer(mqttPacket, total_len);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     ?V0 + 4,?V0 + 8
        MOV     ?V0 + 5,?V0 + 9
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_FOUR
        CFI CFA_XSP16 add(XSP16, 33)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  271 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketConnect_11
//  272 		return 4;
        MOV     R1,#0x4
        LJMP    ??MQTT_PacketConnect_1 & 0xFFFF
//  273 	
//  274 	osal_memset(mqttPacket->_data, 0, total_len);
??MQTT_PacketConnect_11:
        ; Setup parameters for call to function osal_memset
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??osal_memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  275 	
//  276 /*************************************固定头部***********************************************/
//  277 	
//  278 	//固定头部----------------------连接请求类型---------------------------------------------
//  279 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_CONNECT << 4;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x10
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  280 	
//  281 	//固定头部----------------------剩余长度值-----------------------------------------------
//  282 	len = MQTT_DumpLength(total_len - 5, mqttPacket->_data + mqttPacket->_len);
        ; Setup parameters for call to function MQTT_DumpLength
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     R5,A
        MOV     A,?V0 + 8
        ADD     A,#-0x5
        MOV     R2,A
        MOV     A,?V0 + 9
        ADDC    A,#-0x1
        MOV     R3,A
        LCALL   ??MQTT_DumpLength?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
        MOV     ?V0 + 12,?V0 + 4
        MOV     ?V0 + 13,?V0 + 5
//  283 	if(len < 0)
        CLR     C
        MOV     A,?V0 + 12
        SUBB    A,#0x0
        MOV     A,?V0 + 13
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JNC     ??MQTT_PacketConnect_12
//  284 	{
//  285 		MQTT_DeleteBuffer(mqttPacket);
        ; Setup parameters for call to function MQTT_DeleteBuffer
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_DeleteBuffer?relay
//  286 		return 5;
        MOV     R1,#0x5
        LJMP    ??MQTT_PacketConnect_1 & 0xFFFF
//  287 	}
//  288 	else
//  289 		mqttPacket->_len += len;
??MQTT_PacketConnect_12:
        MOV     ?V0 + 4,?V0 + 12
        MOV     A,?V0 + 13
        MOV     ?V0 + 5,A
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  290 	
//  291 /*************************************可变头部***********************************************/
//  292 	
//  293 	//可变头部----------------------协议名长度 和 协议名--------------------------------------
//  294 	mqttPacket->_data[mqttPacket->_len++] = 0;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  295 	mqttPacket->_data[mqttPacket->_len++] = 4;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x4
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  296 	mqttPacket->_data[mqttPacket->_len++] = 'M';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x4d
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  297 	mqttPacket->_data[mqttPacket->_len++] = 'Q';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x51
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  298 	mqttPacket->_data[mqttPacket->_len++] = 'T';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x54
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  299 	mqttPacket->_data[mqttPacket->_len++] = 'T';
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x54
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  300 	
//  301 	//可变头部----------------------protocol level 4-----------------------------------------
//  302 	mqttPacket->_data[mqttPacket->_len++] = 4;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x4
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  303 	
//  304 	//可变头部----------------------连接标志(该函数开头处理的数据)-----------------------------
//  305     mqttPacket->_data[mqttPacket->_len++] = flags;
        MOV     A,?V0 + 10
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 10
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  306 	
//  307 	//可变头部----------------------保持连接的时间(秒)----------------------------------------
//  308 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(cTime);
        MOV     R0,?V0 + 14
        MOV     R1,?V0 + 15
        CLR     A
        MOV     A,?V0 + 15
        MOV     R0,?V0 + 15
        MOV     A,?V0 + 15
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 15
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  309 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(cTime);
        MOV     A,?V0 + 14
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 14
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  310 	 
//  311 /*************************************消息体************************************************/
//  312 
//  313 	//消息体----------------------------devid长度、devid-------------------------------------
//  314 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(devid_len);
        MOV     R0,?V0 + 2
        MOV     R1,?V0 + 3
        CLR     A
        MOV     A,?V0 + 3
        MOV     R0,?V0 + 3
        MOV     A,?V0 + 3
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 3
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  315 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(devid_len);
        MOV     A,?V0 + 2
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 2
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  316 	
//  317 	strncat((int8 *)mqttPacket->_data + mqttPacket->_len, devid, devid_len);
        ; Setup parameters for call to function strncat
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     A,#0x1f
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  318 	mqttPacket->_len += devid_len;
        MOV     ?V0 + 4,?V0 + 2
        MOV     A,?V0 + 3
        MOV     ?V0 + 5,A
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  319 	
//  320 	//消息体----------------------------will_flag 和 will_msg---------------------------------
//  321 	if(flags & MQTT_CONNECT_WILL_FLAG)
        MOV     A,?V0 + 10
        MOV     C,0xE0 /* A   */.2
        JC      $+5
        LJMP    ??MQTT_PacketConnect_13 & 0xFFFF
//  322 	{
//  323 		unsigned short mLen = 0;
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
//  324 		
//  325 		if(!will_msg)
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketConnect_14
//  326 			will_msg = "";
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     A,#`?<Constant "">` & 0xff
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#(`?<Constant "">` >> 8) & 0xff
        MOVX    @DPTR,A
//  327 		
//  328 		mLen = strlen(will_topic);
??MQTT_PacketConnect_14:
        ; Setup parameters for call to function strlen
        MOV     A,#0x22
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
//  329 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  330 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  331 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_topic, mLen);
        ; Setup parameters for call to function strncat
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  332 		mqttPacket->_len += mLen;
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  333 		
//  334 		mLen = strlen(will_msg);
        ; Setup parameters for call to function strlen
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
//  335 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(mLen);
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  336 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(mLen);
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  337 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, will_msg, mLen);
        ; Setup parameters for call to function strncat
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     A,#0x26
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  338 		mqttPacket->_len += mLen;
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  339 	}
//  340 	
//  341 	//消息体----------------------------use---------------------------------------------------
//  342 	if(flags & MQTT_CONNECT_USER_NAME)
??MQTT_PacketConnect_13:
        MOV     A,?V0 + 10
        MOV     C,0xE0 /* A   */.7
        JC      $+5
        LJMP    ??MQTT_PacketConnect_15 & 0xFFFF
//  343 	{
//  344 		unsigned short user_len = strlen(user);
        ; Setup parameters for call to function strlen
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
//  345 		
//  346 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(user_len);
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  347 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(user_len);
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  348 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, user, user_len);
        ; Setup parameters for call to function strncat
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  349 		mqttPacket->_len += user_len;
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  350 	}
//  351 
//  352 	//消息体----------------------------password----------------------------------------------
//  353 	if(flags & MQTT_CONNECT_PASSORD)
??MQTT_PacketConnect_15:
        MOV     A,?V0 + 10
        MOV     C,0xE0 /* A   */.6
        JC      $+5
        LJMP    ??MQTT_PacketConnect_16 & 0xFFFF
//  354 	{
//  355 		unsigned short psw_len = strlen(password);
        ; Setup parameters for call to function strlen
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
//  356 		
//  357 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(psw_len);
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  358 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(psw_len);
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  359 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, password, psw_len);
        ; Setup parameters for call to function strncat
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  360 		mqttPacket->_len += psw_len;
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  361 	}
//  362 
//  363 	return 0;
??MQTT_PacketConnect_16:
        MOV     R1,#0x0
??MQTT_PacketConnect_1:
        MOV     A,#0x5
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock5
//  364 
//  365 }
//  366 
//  367 //==========================================================
//  368 //	函数名称：	MQTT_PacketDisConnect
//  369 //
//  370 //	函数功能：	断开连接消息组包
//  371 //
//  372 //	入口参数：	mqttPacket：包指针
//  373 //
//  374 //	返回参数：	0-成功		1-失败
//  375 //
//  376 //	说明：		
//  377 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  378 uint1 MQTT_PacketDisConnect(MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketDisConnect:
        CFI Block cfiBlock6 Using cfiCommon0
        CFI Function MQTT_PacketDisConnect
        CODE
//  379 {
        FUNCALL MQTT_PacketDisConnect, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  380 
//  381 	MQTT_NewBuffer(mqttPacket, 2);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     DPTR,#__Constant_2
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
//  382 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketDisConnect_0
//  383 		return 1;
        MOV     R1,#0x1
        SJMP    ??MQTT_PacketDisConnect_1
//  384 	
//  385 /*************************************固定头部***********************************************/
//  386 	
//  387 	//固定头部----------------------头部消息-------------------------------------------------
//  388 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_DISCONNECT << 4;
??MQTT_PacketDisConnect_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#-0x20
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  389 	
//  390 	//固定头部----------------------剩余长度值-----------------------------------------------
//  391 	mqttPacket->_data[mqttPacket->_len++] = 0;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  392 	
//  393 	return 0;
        MOV     R1,#0x0
??MQTT_PacketDisConnect_1:
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock6
//  394 
//  395 }
//  396 
//  397 //==========================================================
//  398 //	函数名称：	MQTT_UnPacketConnectAck
//  399 //
//  400 //	函数功能：	连接消息解包
//  401 //
//  402 //	入口参数：	rev_data：接收的数据
//  403 //
//  404 //	返回参数：	1、255-失败		其他-平台的返回码
//  405 //
//  406 //	说明：		
//  407 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  408 uint8 MQTT_UnPacketConnectAck(uint8 *rev_data)
MQTT_UnPacketConnectAck:
        CFI Block cfiBlock7 Using cfiCommon0
        CFI Function MQTT_UnPacketConnectAck
        CODE
//  409 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  410 
//  411 	if(rev_data[1] != 2)
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x2
        JZ      ??MQTT_UnPacketConnectAck_0
//  412 		return 1;
        MOV     R1,#0x1
        SJMP    ??MQTT_UnPacketConnectAck_1
//  413 	
//  414 	if(rev_data[2] == 0 || rev_data[2] == 1)
??MQTT_UnPacketConnectAck_0:
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JZ      ??MQTT_UnPacketConnectAck_2
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??MQTT_UnPacketConnectAck_3
//  415 		return rev_data[3];
??MQTT_UnPacketConnectAck_2:
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        SJMP    ??MQTT_UnPacketConnectAck_1
//  416 	else
//  417 		return 255;
??MQTT_UnPacketConnectAck_3:
        MOV     R1,#-0x1
??MQTT_UnPacketConnectAck_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock7
//  418 
//  419 }
//  420 
//  421 //==========================================================
//  422 //	函数名称：	MQTT_PacketSaveData
//  423 //
//  424 //	函数功能：	数据点上传组包
//  425 //
//  426 //	入口参数：	devid：设备ID(可为空)
//  427 //				send_buf：json缓存buf
//  428 //				send_len：json总长
//  429 //				type_bin_head：bin文件的消息头
//  430 //				type：类型
//  431 //
//  432 //	返回参数：	0-成功		1-失败
//  433 //
//  434 //	说明：		
//  435 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  436 uint1 MQTT_PacketSaveData(const int8 *devid, int16 send_len, int8 *type_bin_head, uint8 type, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketSaveData:
        CFI Block cfiBlock8 Using cfiCommon0
        CFI Function MQTT_PacketSaveData
        CODE
//  437 {
        FUNCALL MQTT_PacketSaveData, MQTT_PacketPublish
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x14
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 0
        MOV     ?V0 + 10,R2
        MOV     ?V0 + 11,R3
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
        MOV     ?V0 + 2,R1
        MOV     A,#0x14
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 8,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 9,A
        MOV     A,#0x16
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 1,A
//  438 
//  439 	if(MQTT_PacketPublish(MQTT_PUBLISH_ID, "$dp", NULL, send_len + 3, MQTT_QOS_LEVEL1, 0, 1, mqttPacket) == 0)
        ; Setup parameters for call to function MQTT_PacketPublish
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 22)
        MOV     DPTR,#__Constant_1
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     DPTR,#__Constant_0
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     A,R6
        ADD     A,#0x3
        MOV     ?V0 + 4,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        MOV     A,?V0 + 5
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_FOUR
        CFI CFA_XSP16 add(XSP16, 34)
        CLR     A
        MOV     ?V0 + 4,A
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 36)
        MOV     R1,#0x1
        MOV     R4,#`?<Constant "$dp">` & 0xff
        MOV     R5,#(`?<Constant "$dp">` >> 8) & 0xff
        MOV     R2,#0xa
        MOV     R3,#0x0
        LCALL   ??MQTT_PacketPublish?relay
        MOV     A,#0x10
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,R1
        JZ      $+5
        LJMP    ??MQTT_PacketSaveData_0 & 0xFFFF
//  440 	{
//  441 		mqttPacket->_data[mqttPacket->_len++] = type;					//类型
        MOV     A,?V0 + 2
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 2
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  442 		
//  443 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(send_len);
        MOV     A,R6
        MOV     R0,A
        MOV     A,R7
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  444 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(send_len);
        MOV     A,R6
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  445 	}
//  446 	else
//  447 		return 1;
//  448 	
//  449 	return 0;
        MOV     R1,#0x0
        SJMP    ??MQTT_PacketSaveData_1
??MQTT_PacketSaveData_0:
        MOV     R1,#0x1
??MQTT_PacketSaveData_1:
        MOV     R7,#0xc
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock8
//  450 
//  451 }
//  452 
//  453 //==========================================================
//  454 //	函数名称：	MQTT_UnPacketCmd
//  455 //
//  456 //	函数功能：	命令下发解包
//  457 //
//  458 //	入口参数：	rev_data：接收的数据指针
//  459 //				cmdid：cmdid-uuid
//  460 //				req：命令
//  461 //
//  462 //	返回参数：	0-成功		其他-失败原因
//  463 //
//  464 //	说明：		
//  465 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  466 uint8 MQTT_UnPacketCmd(uint8 *rev_data, int8 *cmdid, int8 *req, uint16 *req_len)
MQTT_UnPacketCmd:
        CFI Block cfiBlock9 Using cfiCommon0
        CFI Function MQTT_UnPacketCmd
        CODE
//  467 {
        FUNCALL MQTT_UnPacketCmd, strchr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketCmd, MQTT_ReadLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketCmd, debug
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketCmd, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketCmd, memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketCmd, debug
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 24, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 24, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketCmd, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketCmd, memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 26, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 26, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x14
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 20)
        ; Saved register size: 20
        ; Auto size: 4
        MOV     A,#-0x4
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     ?V0 + 10,R2
        MOV     ?V0 + 11,R3
        MOV     ?V0 + 8,R4
        MOV     ?V0 + 9,R5
        MOV     A,#0x18
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 3,A
        MOV     A,#0x1a
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 1,A
//  468 
//  469 	int8 *dataPtr = strchr((int8 *)rev_data + 6, '/');	//加6是跳过头信息
        ; Setup parameters for call to function strchr
        MOV     R4,#0x2f
        MOV     R5,#0x0
        MOV     A,?V0 + 10
        ADD     A,#0x6
        MOV     R2,A
        MOV     A,?V0 + 11
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??strchr?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     R6,?V0 + 4
        MOV     R7,?V0 + 5
//  470 	
//  471 	uint32 remain_len = 0;
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  472 	
//  473 	if(dataPtr == NULL)									//未找到'/'
        MOV     A,R6
        ORL     A,R7
        JNZ     ??MQTT_UnPacketCmd_0
//  474 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_UnPacketCmd_1 & 0xFFFF
//  475 	dataPtr++;											//跳过'/'
??MQTT_UnPacketCmd_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOV     R6,DPL
        MOV     R7,DPH
//  476 	
//  477 	MQTT_ReadLength(rev_data + 1, 4, &remain_len);		//读取剩余字节
        ; Setup parameters for call to function MQTT_ReadLength
        MOV     DPTR,#__Constant_4
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     DPL,?V0 + 10
        MOV     DPH,?V0 + 11
        INC     DPTR
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??MQTT_ReadLength?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
//  478 	
//  479 	//*cmdid = (int8 *)MQTT_MallocBuffer(37);				//cmdid固定36字节，多分配一个结束符的位置
//  480 	if(cmdid == NULL)
        MOV     A,?V0 + 8
        ORL     A,?V0 + 9
        JNZ     ??MQTT_UnPacketCmd_2
//  481   {
//  482     debug("UnPacket mem 11\r\n");
        ; Setup parameters for call to function debug
        MOV     R2,#`?<Constant "UnPacket mem 11\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "UnPacket mem 11\\r\\n">` >> 8) & 0xff
        LCALL   ??debug?relay
//  483 		return 2;
        MOV     R1,#0x2
        LJMP    ??MQTT_UnPacketCmd_1 & 0xFFFF
//  484   }
//  485 	memset(cmdid, 0, 37);								//全部清零
??MQTT_UnPacketCmd_2:
        ; Setup parameters for call to function memset
        MOV     ?V0 + 4,#0x25
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
//  486 	memcpy(cmdid, (const int8 *)dataPtr, 36);			//复制cmdid
        ; Setup parameters for call to function memcpy
        MOV     ?V0 + 4,#0x24
        MOV     ?V0 + 5,#0x0
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        LCALL   ??memcpy?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
//  487 	dataPtr += 36;
        MOV     A,R6
        ADD     A,#0x24
        MOV     R6,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R7,A
//  488 	
//  489 	*req_len = remain_len - 44;							//命令长度 = 剩余长度(remain_len) - 2 - 5($creq) - 1(\) - cmdid长度
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     A,?V0 + 4
        ADD     A,#-0x2c
        MOV     R0,A
        MOV     A,?V0 + 5
        ADDC    A,#-0x1
        MOV     R1,A
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
//  490 	if(req == NULL || (*req_len>MAX_REQ_PAYLOAD_LEN))
        MOV     A,?V0 + 2
        ORL     A,?V0 + 3
        JZ      ??MQTT_UnPacketCmd_3
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        CLR     C
        MOVX    A,@DPTR
        SUBB    A,#-0x69
        INC     DPTR
        MOVX    A,@DPTR
        SUBB    A,#0x0
        JC      ??MQTT_UnPacketCmd_4
//  491 	{
//  492 		debug("UnPacket mem 22\r\n");
??MQTT_UnPacketCmd_3:
        ; Setup parameters for call to function debug
        MOV     R2,#`?<Constant "UnPacket mem 22\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "UnPacket mem 22\\r\\n">` >> 8) & 0xff
        LCALL   ??debug?relay
//  493 		return 3;
        MOV     R1,#0x3
        SJMP    ??MQTT_UnPacketCmd_1
//  494 	}
//  495           
//  496 	memset(req, 0, *req_len + 1);						//清零
??MQTT_UnPacketCmd_4:
        ; Setup parameters for call to function memset
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
//  497 	memcpy(req, (const int8 *)dataPtr, *req_len);		//复制命令
        ; Setup parameters for call to function memcpy
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 26)
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??memcpy?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
//  498 	
//  499 	return 0;
        MOV     R1,#0x0
??MQTT_UnPacketCmd_1:
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     R7,#0xc
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock9
//  500 }
//  501 
//  502 //==========================================================
//  503 //	函数名称：	MQTT_PacketCmdResp
//  504 //
//  505 //	函数功能：	命令回复组包
//  506 //
//  507 //	入口参数：	cmdid：cmdid
//  508 //				req：命令
//  509 //				mqttPacket：包指针
//  510 //
//  511 //	返回参数：	0-成功		1-失败
//  512 //
//  513 //	说明：		
//  514 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  515 uint1 MQTT_PacketCmdResp(const int8 *cmdid, const int8 *req, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketCmdResp:
        CFI Block cfiBlock10 Using cfiCommon0
        CFI Function MQTT_PacketCmdResp
        CODE
//  516 {
        FUNCALL MQTT_PacketCmdResp, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 68, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 68, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketCmdResp, sprintf
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 70, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 70, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketCmdResp, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 78, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 78, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketCmdResp, MQTT_PacketPublish
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 84, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 84, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x12
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 18)
        ; Saved register size: 18
        ; Auto size: 50
        MOV     A,#-0x32
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 68)
        MOV     ?V0 + 8,R2
        MOV     ?V0 + 9,R3
        MOV     ?V0 + 4,R4
        MOV     ?V0 + 5,R5
        MOV     A,#0x44
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 7,A
//  517 	
//  518 	uint16 cmdid_len = strlen(cmdid);
        ; Setup parameters for call to function strlen
        MOV     R2,?V0 + 8
        MOV     R3,?V0 + 9
        LCALL   ??strlen?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R6,?V0 + 0
        MOV     R7,?V0 + 1
//  519 	_Bool status = 0;
        CLR     ?VB.0
//  520   uint8 payload[50]={0};
        MOV     DPTR,#`?<Constant {0}>`
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     A,#0x32
        LCALL   ?MOVE_LONG8_XDATA_XDATA
//  521 	
//  522   sprintf(payload, "$crsp/%s", cmdid);
        ; Setup parameters for call to function sprintf
        MOV     R0,#?V0 + 8
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 70)
        MOV     R4,#`?<Constant "$crsp/%s">` & 0xff
        MOV     R5,#(`?<Constant "$crsp/%s">` >> 8) & 0xff
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??sprintf?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 68)
//  523 
//  524 	if(MQTT_PacketPublish(MQTT_PUBLISH_ID, payload, req, strlen(req), MQTT_QOS_LEVEL0, 0, 1, mqttPacket) == 0)
        ; Setup parameters for call to function MQTT_PacketPublish
        MOV     R0,#?V0 + 6
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 70)
        MOV     DPTR,#__Constant_1
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 74)
        MOV     DPTR,#__Constant_0
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 78)
        ; Setup parameters for call to function strlen
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        LCALL   ??strlen?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        CLR     A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_FOUR
        CFI CFA_XSP16 add(XSP16, 82)
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 84)
        MOV     R1,#0x0
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#0xa
        MOV     R3,#0x0
        LCALL   ??MQTT_PacketPublish?relay
        MOV     A,#0x10
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 68)
        MOV     A,R1
        JNZ     ??MQTT_PacketCmdResp_0
//  525 		status = 0;
        CLR     ?VB.0
        SJMP    ??MQTT_PacketCmdResp_1
//  526 	else
//  527 		status = 1;
??MQTT_PacketCmdResp_0:
        SETB    ?VB.0
//  528 		
//  529 	return status;
??MQTT_PacketCmdResp_1:
        MOV     C,?VB.0
        CLR     A
        RLC     A
        MOV     R1,A
        MOV     A,#0x32
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 18)
        MOV     R7,#0xa
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock10
//  530 
//  531 }
//  532 
//  533 //==========================================================
//  534 //	函数名称：	MQTT_PacketSubscribe
//  535 //
//  536 //	函数功能：	Subscribe消息组包
//  537 //
//  538 //	入口参数：	pkt_id：pkt_id
//  539 //				qos：消息重发次数
//  540 //				topics：订阅的消息
//  541 //				topics_cnt：订阅的消息个数
//  542 //				mqttPacket：包指针
//  543 //
//  544 //	返回参数：	0-成功		其他-失败
//  545 //
//  546 //	说明：		
//  547 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  548 uint8 MQTT_PacketSubscribe(uint16 pkt_id, enum MqttQosLevel qos, const int8 *topics[], uint8 topics_cnt, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketSubscribe:
        CFI Block cfiBlock11 Using cfiCommon0
        CFI Function MQTT_PacketSubscribe
        CODE
//  549 {
        FUNCALL MQTT_PacketSubscribe, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketSubscribe, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketSubscribe, MQTT_DumpLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketSubscribe, MQTT_DeleteBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketSubscribe, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketSubscribe, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 5
        MOV     A,#-0x5
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,#0x1d
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 13,A
        MOV     A,#0x1e
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
//  550 	
//  551 	uint32 topic_len = 0, remain_len = 0;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
//  552 	int16 len = 0;
        MOV     ?V0 + 14,#0x0
        MOV     ?V0 + 15,#0x0
//  553 	uint8 i = 0;
        MOV     ?V0 + 12,#0x0
//  554 	
//  555 	if(pkt_id == 0)
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketSubscribe_0
//  556 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketSubscribe_1 & 0xFFFF
//  557 	
//  558 	//计算topic长度-------------------------------------------------------------------------
//  559 	for(; i < topics_cnt; i++)
??MQTT_PacketSubscribe_0:
        MOV     A,?V0 + 12
        CLR     C
        SUBB    A,?V0 + 13
        JC      $+5
        LJMP    ??MQTT_PacketSubscribe_2 & 0xFFFF
//  560 	{
//  561 		if(topics[i] == NULL)
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketSubscribe_3
//  562 			return 2;
        MOV     R1,#0x2
        LJMP    ??MQTT_PacketSubscribe_1 & 0xFFFF
//  563 		
//  564 		topic_len += strlen(topics[i]);
??MQTT_PacketSubscribe_3:
        ; Setup parameters for call to function strlen
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        CLR     A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_ADD
//  565 	}
        INC     ?V0 + 12
        LJMP    ??MQTT_PacketSubscribe_0 & 0xFFFF
//  566 	
//  567 	//2 bytes packet id + topic filter(2 bytes topic + topic length + 1 byte reserve)------
//  568 	remain_len = 2 + 3 * topics_cnt + topic_len;
??MQTT_PacketSubscribe_2:
        MOV     A,?V0 + 13
        MOV     R0,?V0 + 13
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x3
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x3
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x2
        MOV     ?V0 + 0,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     ?V0 + 1,A
        MOV     A,?V0 + 1
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 4
        LCALL   ?L_ADD
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  569 	
//  570 	//分配内存------------------------------------------------------------------------------
//  571 	MQTT_NewBuffer(mqttPacket, remain_len + 5);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     ?V0 + 2,?V0 + 10
        MOV     ?V0 + 3,?V0 + 11
        MOV     DPTR,#__Constant_5
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_X
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_FOUR
        CFI CFA_XSP16 add(XSP16, 33)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  572 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketSubscribe_4
//  573 		return 3;
        MOV     R1,#0x3
        LJMP    ??MQTT_PacketSubscribe_1 & 0xFFFF
//  574 	
//  575 /*************************************固定头部***********************************************/
//  576 	
//  577 	//固定头部----------------------头部消息-------------------------------------------------
//  578 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_SUBSCRIBE << 4 | 0x02;
??MQTT_PacketSubscribe_4:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#-0x7e
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  579 	
//  580 	//固定头部----------------------剩余长度值-----------------------------------------------
//  581 	len = MQTT_DumpLength(remain_len, mqttPacket->_data + mqttPacket->_len);
        ; Setup parameters for call to function MQTT_DumpLength
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     R5,A
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??MQTT_DumpLength?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     ?V0 + 14,?V0 + 0
        MOV     ?V0 + 15,?V0 + 1
//  582 	if(len < 0)
        CLR     C
        MOV     A,?V0 + 14
        SUBB    A,#0x0
        MOV     A,?V0 + 15
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JNC     ??MQTT_PacketSubscribe_5
//  583 	{
//  584 		MQTT_DeleteBuffer(mqttPacket);
        ; Setup parameters for call to function MQTT_DeleteBuffer
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_DeleteBuffer?relay
//  585 		return 4;
        MOV     R1,#0x4
        LJMP    ??MQTT_PacketSubscribe_1 & 0xFFFF
//  586 	}
//  587 	else
//  588 		mqttPacket->_len += len;
??MQTT_PacketSubscribe_5:
        MOV     ?V0 + 0,?V0 + 14
        MOV     A,?V0 + 15
        MOV     ?V0 + 1,A
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  589 	
//  590 /*************************************payload***********************************************/
//  591 	
//  592 	//payload----------------------pkt_id---------------------------------------------------
//  593 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(pkt_id);
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  594 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(pkt_id);
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  595 	
//  596 	//payload----------------------topic_name-----------------------------------------------
//  597 	for(i = 0; i < topics_cnt; i++)
        MOV     ?V0 + 12,#0x0
??MQTT_PacketSubscribe_6:
        MOV     A,?V0 + 12
        CLR     C
        SUBB    A,?V0 + 13
        JC      $+5
        LJMP    ??MQTT_PacketSubscribe_7 & 0xFFFF
//  598 	{
//  599 		topic_len = strlen(topics[i]);
        ; Setup parameters for call to function strlen
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        CLR     A
        MOV     R4,A
        MOV     R5,A
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
//  600 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(topic_len);
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        CLR     A
        MOV     A,?V0 + 5
        MOV     R0,?V0 + 5
        MOV     A,?V0 + 5
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 5
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  601 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(topic_len);
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        MOV     A,?V0 + 4
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 4
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  602 		
//  603 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, topics[i], topic_len);
        ; Setup parameters for call to function strncat
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 29)
//  604 		mqttPacket->_len += topic_len;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  605 		
//  606 		mqttPacket->_data[mqttPacket->_len++] = qos & 0xFF;
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  607 	}
        INC     ?V0 + 12
        LJMP    ??MQTT_PacketSubscribe_6 & 0xFFFF
//  608 
//  609 	return 0;
??MQTT_PacketSubscribe_7:
        MOV     R1,#0x0
??MQTT_PacketSubscribe_1:
        MOV     A,#0x5
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock11
//  610 
//  611 }
//  612 
//  613 //==========================================================
//  614 //	函数名称：	MQTT_UnPacketSubscrebe
//  615 //
//  616 //	函数功能：	Subscribe的回复消息解包
//  617 //
//  618 //	入口参数：	rev_data：接收到的信息
//  619 //
//  620 //	返回参数：	0-成功		其他-失败
//  621 //
//  622 //	说明：		
//  623 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  624 uint8 MQTT_UnPacketSubscribe(uint8 *rev_data)
MQTT_UnPacketSubscribe:
        CFI Block cfiBlock12 Using cfiCommon0
        CFI Function MQTT_UnPacketSubscribe
        CODE
//  625 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  626 	
//  627 	uint8 result = 255;
        MOV     R1,#-0x1
//  628 
//  629 	if(rev_data[2] == MOSQ_MSB(MQTT_SUBSCRIBE_ID) && rev_data[3] == MOSQ_LSB(MQTT_SUBSCRIBE_ID))
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JNZ     ??MQTT_UnPacketSubscribe_0
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x14
        JNZ     ??MQTT_UnPacketSubscribe_0
//  630 	{
//  631 		switch(rev_data[4])
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JZ      ??MQTT_UnPacketSubscribe_1
        DEC     A
        JZ      ??MQTT_UnPacketSubscribe_1
        DEC     A
        JZ      ??MQTT_UnPacketSubscribe_1
        ADD     A,#-0x7e
        JZ      ??MQTT_UnPacketSubscribe_2
        SJMP    ??MQTT_UnPacketSubscribe_3
//  632 		{
//  633 			case 0x00:
//  634 			case 0x01:
//  635 			case 0x02:
//  636 				//MQTT Subscribe OK
//  637 				result = 0;
??MQTT_UnPacketSubscribe_1:
        MOV     R1,#0x0
//  638 			break;
        SJMP    ??MQTT_UnPacketSubscribe_0
//  639 			
//  640 			case 0x80:
//  641 				//MQTT Subscribe Failed
//  642 				result = 1;
??MQTT_UnPacketSubscribe_2:
        MOV     R1,#0x1
//  643 			break;
        SJMP    ??MQTT_UnPacketSubscribe_0
//  644 			
//  645 			default:
//  646 				//MQTT Subscribe UnKnown Err
//  647 				result = 2;
??MQTT_UnPacketSubscribe_3:
        MOV     R1,#0x2
//  648 			break;
//  649 		}
//  650 	}
//  651 	
//  652 	return result;
??MQTT_UnPacketSubscribe_0:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock12
//  653 
//  654 }
//  655 
//  656 //==========================================================
//  657 //	函数名称：	MQTT_PacketUnSubscribe
//  658 //
//  659 //	函数功能：	UnSubscribe消息组包
//  660 //
//  661 //	入口参数：	pkt_id：pkt_id
//  662 //				qos：消息重发次数
//  663 //				topics：订阅的消息
//  664 //				topics_cnt：订阅的消息个数
//  665 //				mqttPacket：包指针
//  666 //
//  667 //	返回参数：	0-成功		其他-失败
//  668 //
//  669 //	说明：		
//  670 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  671 uint8 MQTT_PacketUnSubscribe(uint16 pkt_id, const int8 *topics[], uint8 topics_cnt, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketUnSubscribe:
        CFI Block cfiBlock13 Using cfiCommon0
        CFI Function MQTT_PacketUnSubscribe
        CODE
//  672 {
        FUNCALL MQTT_PacketUnSubscribe, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketUnSubscribe, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketUnSubscribe, MQTT_DumpLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketUnSubscribe, MQTT_DeleteBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketUnSubscribe, strlen
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketUnSubscribe, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 4
        MOV     A,#-0x4
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     ?V0 + 13,R1
        MOV     A,#0x1c
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
//  673 	
//  674 	uint32 topic_len = 0, remain_len = 0;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
//  675 	int16 len = 0;
        MOV     ?V0 + 14,#0x0
        MOV     ?V0 + 15,#0x0
//  676 	uint8 i = 0;
        MOV     ?V0 + 12,#0x0
//  677 	
//  678 	if(pkt_id == 0)
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketUnSubscribe_0
//  679 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketUnSubscribe_1 & 0xFFFF
//  680 	
//  681 	//计算topic长度-------------------------------------------------------------------------
//  682 	for(; i < topics_cnt; i++)
??MQTT_PacketUnSubscribe_0:
        MOV     A,?V0 + 12
        CLR     C
        SUBB    A,?V0 + 13
        JC      $+5
        LJMP    ??MQTT_PacketUnSubscribe_2 & 0xFFFF
//  683 	{
//  684 		if(topics[i] == NULL)
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketUnSubscribe_3
//  685 			return 2;
        MOV     R1,#0x2
        LJMP    ??MQTT_PacketUnSubscribe_1 & 0xFFFF
//  686 		
//  687 		topic_len += strlen(topics[i]);
??MQTT_PacketUnSubscribe_3:
        ; Setup parameters for call to function strlen
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        CLR     A
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 4
        MOV     R1,#?V0 + 0
        LCALL   ?L_ADD
//  688 	}
        INC     ?V0 + 12
        LJMP    ??MQTT_PacketUnSubscribe_0 & 0xFFFF
//  689 	
//  690 	//2 bytes packet id, 2 bytes topic length + topic + 1 byte reserve---------------------
//  691 	remain_len = 2 + (topics_cnt << 1) + topic_len;
??MQTT_PacketUnSubscribe_2:
        MOV     A,?V0 + 13
        MOV     R0,?V0 + 13
        MOV     R1,#0x0
        MOV     A,?V0 + 13
        CLR     C
        RLC     A
        MOV     R0,A
        MOV     A,R1
        RLC     A
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x2
        MOV     ?V0 + 0,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     ?V0 + 1,A
        MOV     A,?V0 + 1
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 4
        LCALL   ?L_ADD
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
//  692 	
//  693 	//分配内存------------------------------------------------------------------------------
//  694 	MQTT_NewBuffer(mqttPacket, remain_len + 5);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     ?V0 + 2,?V0 + 10
        MOV     ?V0 + 3,?V0 + 11
        MOV     DPTR,#__Constant_5
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_X
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_FOUR
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  695 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketUnSubscribe_4
//  696 		return 3;
        MOV     R1,#0x3
        LJMP    ??MQTT_PacketUnSubscribe_1 & 0xFFFF
//  697 	
//  698 /*************************************固定头部***********************************************/
//  699 	
//  700 	//固定头部----------------------头部消息-------------------------------------------------
//  701 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_UNSUBSCRIBE << 4 | 0x02;
??MQTT_PacketUnSubscribe_4:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#-0x5e
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  702 	
//  703 	//固定头部----------------------剩余长度值-----------------------------------------------
//  704 	len = MQTT_DumpLength(remain_len, mqttPacket->_data + mqttPacket->_len);
        ; Setup parameters for call to function MQTT_DumpLength
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     R5,A
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??MQTT_DumpLength?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     ?V0 + 14,?V0 + 0
        MOV     ?V0 + 15,?V0 + 1
//  705 	if(len < 0)
        CLR     C
        MOV     A,?V0 + 14
        SUBB    A,#0x0
        MOV     A,?V0 + 15
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JNC     ??MQTT_PacketUnSubscribe_5
//  706 	{
//  707 		MQTT_DeleteBuffer(mqttPacket);
        ; Setup parameters for call to function MQTT_DeleteBuffer
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_DeleteBuffer?relay
//  708 		return 4;
        MOV     R1,#0x4
        LJMP    ??MQTT_PacketUnSubscribe_1 & 0xFFFF
//  709 	}
//  710 	else
//  711 		mqttPacket->_len += len;
??MQTT_PacketUnSubscribe_5:
        MOV     ?V0 + 0,?V0 + 14
        MOV     A,?V0 + 15
        MOV     ?V0 + 1,A
        RLC     A
        SUBB    A,0xE0 /* A   */
        MOV     ?V0 + 2,A
        MOV     ?V0 + 3,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  712 	
//  713 /*************************************payload***********************************************/
//  714 	
//  715 	//payload----------------------pkt_id---------------------------------------------------
//  716 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(pkt_id);
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  717 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(pkt_id);
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  718 	
//  719 	//payload----------------------topic_name-----------------------------------------------
//  720 	for(i = 0; i < topics_cnt; i++)
        MOV     ?V0 + 12,#0x0
??MQTT_PacketUnSubscribe_6:
        MOV     A,?V0 + 12
        CLR     C
        SUBB    A,?V0 + 13
        JC      $+5
        LJMP    ??MQTT_PacketUnSubscribe_7 & 0xFFFF
//  721 	{
//  722 		topic_len = strlen(topics[i]);
        ; Setup parameters for call to function strlen
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??strlen?relay
        CLR     A
        MOV     R4,A
        MOV     R5,A
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
//  723 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(topic_len);
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        CLR     A
        MOV     A,?V0 + 5
        MOV     R0,?V0 + 5
        MOV     A,?V0 + 5
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 5
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  724 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(topic_len);
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        MOV     A,?V0 + 4
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 4
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  725 		
//  726 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, topics[i], topic_len);
        ; Setup parameters for call to function strncat
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     A,?V0 + 12
        MOV     R0,?V0 + 12
        MOV     R1,#0x0
        MOV     A,R0
        MOV     B,#0x2
        MUL     AB
        XCH     A,R0
        MOV     R2,B
        MOV     B,#0x0
        MUL     AB
        ADD     A,R2
        MOV     R2,A
        MOV     B,#0x2
        MOV     A,R1
        MUL     AB
        ADD     A,R2
        MOV     R1,A
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  727 		mqttPacket->_len += topic_len;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  728 	}
        INC     ?V0 + 12
        LJMP    ??MQTT_PacketUnSubscribe_6 & 0xFFFF
//  729 
//  730 	return 0;
??MQTT_PacketUnSubscribe_7:
        MOV     R1,#0x0
??MQTT_PacketUnSubscribe_1:
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock13
//  731 
//  732 }
//  733 
//  734 //==========================================================
//  735 //	函数名称：	MQTT_UnPacketUnSubscribe
//  736 //
//  737 //	函数功能：	UnSubscribe的回复消息解包
//  738 //
//  739 //	入口参数：	rev_data：接收到的信息
//  740 //
//  741 //	返回参数：	0-成功		其他-失败
//  742 //
//  743 //	说明：		
//  744 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  745 uint1 MQTT_UnPacketUnSubscribe(uint8 *rev_data)
MQTT_UnPacketUnSubscribe:
        CFI Block cfiBlock14 Using cfiCommon0
        CFI Function MQTT_UnPacketUnSubscribe
        CODE
//  746 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  747 	
//  748 	uint1 result = 1;
        MOV     R1,#0x1
//  749 
//  750 	if(rev_data[2] == MOSQ_MSB(MQTT_UNSUBSCRIBE_ID) && rev_data[3] == MOSQ_LSB(MQTT_UNSUBSCRIBE_ID))
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JNZ     ??MQTT_UnPacketUnSubscribe_0
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x1e
        JNZ     ??MQTT_UnPacketUnSubscribe_0
//  751 	{
//  752 		result = 0;
        MOV     R1,#0x0
//  753 	}
//  754 	
//  755 	return result;
??MQTT_UnPacketUnSubscribe_0:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock14
//  756 
//  757 }
//  758 
//  759 //==========================================================
//  760 //	函数名称：	MQTT_PacketPublish
//  761 //
//  762 //	函数功能：	Pulish消息组包
//  763 //
//  764 //	入口参数：	pkt_id：pkt_id
//  765 //				topic：发布的topic
//  766 //				payload：消息体
//  767 //				payload_len：消息体长度
//  768 //				qos：重发次数
//  769 //				retain：离线消息推送
//  770 //				own：
//  771 //				mqttPacket：包指针
//  772 //
//  773 //	返回参数：	0-成功		其他-失败
//  774 //
//  775 //	说明：		
//  776 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  777 uint8 MQTT_PacketPublish(uint16 pkt_id, const int8 *topic,
MQTT_PacketPublish:
        CFI Block cfiBlock15 Using cfiCommon0
        CFI Function MQTT_PacketPublish
        CODE
//  778 						const int8 *payload, uint32 payload_len,
//  779 						enum MqttQosLevel qos, int32 retain, int32 own,
//  780 						MQTT_PACKET_STRUCTURE *mqttPacket)
//  781 {
        FUNCALL MQTT_PacketPublish, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 38, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 38, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketPublish, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketPublish, MQTT_DumpLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketPublish, MQTT_DeleteBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 34, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 34, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketPublish, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_PacketPublish, strncat
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 36, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 36, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 10
        MOV     A,#-0xa
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 34)
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOV     A,R4
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R5
        MOVX    @DPTR,A
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     A,#0x30
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
//  782 
//  783 	uint32 total_len = 0, topic_len = 0;
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        LCALL   ?XSTORE_R2345
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 8
        LCALL   ?L_MOV_X
//  784 	int32 len = 0;
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 12
        LCALL   ?L_MOV_X
//  785 	uint8 flags = 0;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x0
        MOVX    @DPTR,A
//  786 	
//  787 	//pkt_id检查----------------------------------------------------------------------------
//  788 	if(pkt_id == 0)
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketPublish_0
//  789 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketPublish_1 & 0xFFFF
//  790 	
//  791 	//$dp为系统上传数据点的指令--------------------------------------------------------------
//  792 	for(topic_len = 0; topic[topic_len] != '\0'; ++topic_len)
??MQTT_PacketPublish_0:
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     ?V0 + 8,?V0 + 0
        MOV     ?V0 + 9,?V0 + 1
        MOV     ?V0 + 10,?V0 + 2
        MOV     ?V0 + 11,?V0 + 3
??MQTT_PacketPublish_2:
        MOV     R0,?V0 + 8
        MOV     R1,?V0 + 9
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        JZ      ??MQTT_PacketPublish_3
//  793 	{
//  794 		if((topic[topic_len] == '#') || (topic[topic_len] == '+'))
        MOV     R0,?V0 + 8
        MOV     R1,?V0 + 9
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0x23
        JZ      ??MQTT_PacketPublish_4
        MOV     R0,?V0 + 8
        MOV     R1,?V0 + 9
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     DPL,R2
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0x2b
        JNZ     ??MQTT_PacketPublish_5
//  795 			return 2;
??MQTT_PacketPublish_4:
        MOV     R1,#0x2
        LJMP    ??MQTT_PacketPublish_1 & 0xFFFF
//  796 	}
??MQTT_PacketPublish_5:
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 8
        LCALL   ?L_ADD_X
        SJMP    ??MQTT_PacketPublish_2
//  797 	
//  798 	//Publish消息---------------------------------------------------------------------------
//  799 	flags |= MQTT_PKT_PUBLISH << 4;
??MQTT_PacketPublish_3:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        ORL     A,#0x30
        MOVX    @DPTR,A
//  800 	
//  801 	//retain标志----------------------------------------------------------------------------
//  802 	if(retain)
        MOV     A,#0x28
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     A,?V0 + 0
        ORL     A,?V0 + 1
        ORL     A,?V0 + 2
        ORL     A,?V0 + 3
        JZ      ??MQTT_PacketPublish_6
//  803 		flags |= 0x01;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.0
        MOVX    @DPTR,A
//  804 	
//  805 	//总长度--------------------------------------------------------------------------------
//  806 	total_len = topic_len + payload_len + 2;
??MQTT_PacketPublish_6:
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     ?V0 + 2,?V0 + 10
        MOV     ?V0 + 3,?V0 + 11
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 4
        LCALL   ?L_ADD
        MOV     DPTR,#__Constant_2
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_X
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_TO_X
//  807 	
//  808 	//qos级别--主要用于PUBLISH（发布态）消息的，保证消息传递的次数-----------------------------
//  809 	switch(qos)
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        JZ      ??MQTT_PacketPublish_7
        DEC     A
        JZ      ??MQTT_PacketPublish_8
        DEC     A
        JZ      ??MQTT_PacketPublish_9
        SJMP    ??MQTT_PacketPublish_10
//  810 	{
//  811 		case MQTT_QOS_LEVEL0:
//  812 			flags |= MQTT_CONNECT_WILL_QOS0;	//最多一次
??MQTT_PacketPublish_7:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
//  813 		break;
        SJMP    ??MQTT_PacketPublish_11
//  814 		
//  815 		case MQTT_QOS_LEVEL1:
//  816 			flags |= 0x02;						//最少一次
??MQTT_PacketPublish_8:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.1
        MOVX    @DPTR,A
//  817 			total_len += 2;
        MOV     DPTR,#__Constant_2
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  818 		break;
        SJMP    ??MQTT_PacketPublish_11
//  819 		
//  820 		case MQTT_QOS_LEVEL2:
//  821 			flags |= 0x04;						//只有一次
??MQTT_PacketPublish_9:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.2
        MOVX    @DPTR,A
//  822 			total_len += 2;
        MOV     DPTR,#__Constant_2
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  823 		break;
        SJMP    ??MQTT_PacketPublish_11
//  824 		
//  825 		default:
//  826 		return 3;
??MQTT_PacketPublish_10:
        MOV     R1,#0x3
        LJMP    ??MQTT_PacketPublish_1 & 0xFFFF
//  827 	}
//  828 	
//  829 	//分配内存------------------------------------------------------------------------------
//  830 	MQTT_NewBuffer(mqttPacket, total_len + 3);
??MQTT_PacketPublish_11:
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPTR,#__Constant_3
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_X
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_FOUR
        CFI CFA_XSP16 add(XSP16, 38)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 34)
//  831 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketPublish_12
//  832 		return 4;
        MOV     R1,#0x4
        LJMP    ??MQTT_PacketPublish_1 & 0xFFFF
//  833 		
//  834 	memset(mqttPacket->_data, 0, total_len + 3);
??MQTT_PacketPublish_12:
        ; Setup parameters for call to function memset
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     A,?V0 + 0
        ADD     A,#0x3
        MOV     ?V0 + 0,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     ?V0 + 1,A
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 36)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 34)
//  835 	
//  836 /*************************************固定头部***********************************************/
//  837 	
//  838 	//固定头部----------------------头部消息-------------------------------------------------
//  839 	mqttPacket->_data[mqttPacket->_len++] = flags;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  840 	
//  841 	//固定头部----------------------剩余长度值-----------------------------------------------
//  842 	len = MQTT_DumpLength(total_len, mqttPacket->_data + mqttPacket->_len);
        ; Setup parameters for call to function MQTT_DumpLength
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     R5,A
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??MQTT_DumpLength?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     ?V0 + 12,?V0 + 0
        MOV     ?V0 + 13,?V0 + 1
        MOV     ?V0 + 14,?V0 + 2
        MOV     ?V0 + 15,?V0 + 3
//  843 	if(len < 0)
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 12
        LCALL   ?SL_GE_X
        JC      ??MQTT_PacketPublish_13
//  844 	{
//  845 		MQTT_DeleteBuffer(mqttPacket);
        ; Setup parameters for call to function MQTT_DeleteBuffer
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_DeleteBuffer?relay
//  846 		return 5;
        MOV     R1,#0x5
        LJMP    ??MQTT_PacketPublish_1 & 0xFFFF
//  847 	}
//  848 	else
//  849 		mqttPacket->_len += len;
??MQTT_PacketPublish_13:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 12
        LCALL   ?L_ADD_TO_X
//  850 	
//  851 /*************************************可变头部***********************************************/
//  852 	
//  853 	//可变头部----------------------写入topic长度、topic-------------------------------------
//  854 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(topic_len);
        MOV     R0,?V0 + 8
        MOV     R1,?V0 + 9
        CLR     A
        MOV     A,?V0 + 9
        MOV     R0,?V0 + 9
        MOV     A,?V0 + 9
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 9
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  855 	mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(topic_len);
        MOV     R0,?V0 + 8
        MOV     R1,?V0 + 9
        MOV     A,?V0 + 8
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 8
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  856 	
//  857 	strncat((int8 *)mqttPacket->_data + mqttPacket->_len, topic, topic_len);
        ; Setup parameters for call to function strncat
        MOV     ?V0 + 0,?V0 + 8
        MOV     ?V0 + 1,?V0 + 9
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 36)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 34)
//  858 	mqttPacket->_len += topic_len;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 8
        LCALL   ?L_ADD_TO_X
//  859 	if(qos != MQTT_QOS_LEVEL0)
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        JZ      ??MQTT_PacketPublish_14
//  860 	{
//  861 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_MSB(pkt_id);
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  862 		mqttPacket->_data[mqttPacket->_len++] = MOSQ_LSB(pkt_id);
        MOV     A,#0x8
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
//  863 	}
//  864 	
//  865 	//可变头部----------------------写入payload----------------------------------------------
//  866 	if(payload != NULL)
??MQTT_PacketPublish_14:
        MOV     A,#0x22
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JZ      ??MQTT_PacketPublish_15
//  867 	{
//  868 		strncat((int8 *)mqttPacket->_data + mqttPacket->_len, payload, payload_len);
        ; Setup parameters for call to function strncat
        MOV     ?V0 + 0,?V0 + 4
        MOV     ?V0 + 1,?V0 + 5
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 36)
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R4,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     R3,A
        LCALL   ??strncat?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 34)
//  869 		mqttPacket->_len += payload_len;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
//  870 	}
//  871 	
//  872 	return 0;
??MQTT_PacketPublish_15:
        MOV     R1,#0x0
??MQTT_PacketPublish_1:
        MOV     A,#0xa
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock15
//  873 
//  874 }
//  875 
//  876 //==========================================================
//  877 //	函数名称：	MQTT_UnPacketPublish
//  878 //
//  879 //	函数功能：	Publish消息解包
//  880 //
//  881 //	入口参数：	flags：MQTT相关标志信息
//  882 //				pkt：指向可变头部
//  883 //				size：固定头部中的剩余长度信息
//  884 //
//  885 //	返回参数：	0-成功		其他-失败原因
//  886 //
//  887 //	说明：		
//  888 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  889 uint8 MQTT_UnPacketPublish(uint8 *rev_data, int8 *topic, uint16 *topic_len, int8 *payload, uint16 *payload_len, uint8 *qos, uint16 *pkt_id)
MQTT_UnPacketPublish:
        CFI Block cfiBlock16 Using cfiCommon0
        CFI Function MQTT_UnPacketPublish
        CODE
//  890 {
        FUNCALL MQTT_UnPacketPublish, MQTT_ReadLength
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 32, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 32, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, strstr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, debug
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, debug
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, debug
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, debug
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, strchr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL MQTT_UnPacketPublish, strchr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 28, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 28, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x18
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V15 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V14 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V13 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V12 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V11 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V10 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V9 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V8 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-17)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-18)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-19)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-20)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-21)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-22)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-23)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-24)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 24)
        ; Saved register size: 24
        ; Auto size: 4
        MOV     A,#-0x4
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 14,R2
        MOV     ?V0 + 15,R3
        MOV     ?V0 + 2,R4
        MOV     ?V0 + 3,R5
        MOV     A,#0x1c
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
        MOV     A,#0x1e
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 10,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 11,A
        MOV     A,#0x20
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     ?V0 + 8,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 9,A
//  891 	
//  892 	const int8 flags = rev_data[0] & 0x0F;
        MOV     DPL,?V0 + 14
        MOV     DPH,?V0 + 15
        MOVX    A,@DPTR
        ANL     A,#0xf
        MOV     ?V0 + 12,A
//  893 	uint8 *msgPtr;
//  894 	uint32 remain_len = 0;
        MOV     DPTR,#__Constant_0
        LCALL   ?XLOAD_R2345
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        LCALL   ?XSTORE_R2345
//  895 
//  896 	const int8 dup = flags & 0x08;
        MOV     A,#0x8
        ANL     A,?V0 + 12
        MOV     ?V0 + 13,A
//  897 
//  898 	*qos = (flags & 0x06) >> 1;
        MOV     A,?V0 + 12
        MOV     C,0xE0 /* A   */.7
        RRC     A
        ANL     A,#0x3
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x22
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  899 	
//  900 	msgPtr = rev_data + MQTT_ReadLength(rev_data + 1, 4, &remain_len) + 1;
        ; Setup parameters for call to function MQTT_ReadLength
        MOV     DPTR,#__Constant_4
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 32)
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     DPL,?V0 + 14
        MOV     DPH,?V0 + 15
        INC     DPTR
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??MQTT_ReadLength?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
        MOV     A,?V0 + 14
        ADD     A,?V0 + 4
        MOV     DPL,A
        MOV     A,?V0 + 15
        ADDC    A,?V0 + 5
        MOV     DPH,A
        INC     DPTR
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
//  901 	
//  902 	if(remain_len < 2 || flags & 0x01)							//retain
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPTR,#__Constant_2
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,#?V0 + 4
        LCALL   ?UL_GT_X
        JC      ??MQTT_UnPacketPublish_0
        MOV     A,?V0 + 12
        MOV     C,0xE0 /* A   */.0
        JNC     ??MQTT_UnPacketPublish_1
//  903 		return 255;
??MQTT_UnPacketPublish_0:
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  904 	
//  905 	*topic_len = (uint16)msgPtr[0] << 8 | msgPtr[1];
??MQTT_UnPacketPublish_1:
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        CLR     A
        XCH     A,R0
        MOV     R1,A
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     A,R0
        ORL     A,R2
        MOV     R0,A
        MOV     A,R1
        ORL     A,R3
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
//  906 	if(remain_len < *topic_len + 2)
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,#0x2
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,#?V0 + 4
        LCALL   ?UL_GT_X
        JNC     ??MQTT_UnPacketPublish_3
//  907 		return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  908 	
//  909 	if(strstr((int8 *)msgPtr + 2, CMD_TOPIC_PREFIX) != NULL)	//如果是命令下发
??MQTT_UnPacketPublish_3:
        ; Setup parameters for call to function strstr
        MOV     R4,#`?<Constant "$creq">` & 0xff
        MOV     R5,#(`?<Constant "$creq">` >> 8) & 0xff
        MOV     A,?V0 + 0
        ADD     A,#0x2
        MOV     R2,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??strstr?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        JZ      ??MQTT_UnPacketPublish_4
//  910 		return MQTT_PKT_CMD;
        MOV     R1,#0xf
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  911 	
//  912 	switch(*qos)
??MQTT_UnPacketPublish_4:
        MOV     A,#0x22
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOVX    A,@DPTR
        JZ      ??MQTT_UnPacketPublish_5
        DEC     A
        JNZ     $+5
        LJMP    ??MQTT_UnPacketPublish_6 & 0xFFFF
        DEC     A
        JNZ     $+5
        LJMP    ??MQTT_UnPacketPublish_6 & 0xFFFF
        LJMP    ??MQTT_UnPacketPublish_7 & 0xFFFF
//  913 	{
//  914 		case MQTT_QOS_LEVEL0:									// qos0 have no packet identifier
//  915 			
//  916 			if(0 != dup)
??MQTT_UnPacketPublish_5:
        MOV     A,?V0 + 13
        JZ      ??MQTT_UnPacketPublish_8
//  917 				return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  918 
//  919 			if((topic == NULL) || (*topic_len)>MAX_CMDID_TOPIC_LEN)
??MQTT_UnPacketPublish_8:
        MOV     A,?V0 + 2
        ORL     A,?V0 + 3
        JZ      ??MQTT_UnPacketPublish_9
        MOV     DPL,R6
        MOV     DPH,R7
        CLR     C
        MOVX    A,@DPTR
        SUBB    A,#0x47
        INC     DPTR
        MOVX    A,@DPTR
        SUBB    A,#0x0
        JC      ??MQTT_UnPacketPublish_10
//  920       {
//  921         debug("UnPacketPublish 11.\r\n");
??MQTT_UnPacketPublish_9:
        ; Setup parameters for call to function debug
        MOV     R2,#`?<Constant "UnPacketPublish 11.\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "UnPacketPublish 11.\\r\\n">` >> 8) & 0xff
        LCALL   ??debug?relay
//  922 			  return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  923       }
//  924 			memset(topic, 0, *topic_len + 1);
??MQTT_UnPacketPublish_10:
        ; Setup parameters for call to function memset
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  925 			memcpy(topic, (int8 *)msgPtr + 2, *topic_len);		//复制数据
        ; Setup parameters for call to function memcpy
        MOV     DPL,R6
        MOV     DPH,R7
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     A,?V0 + 0
        ADD     A,#0x2
        MOV     R4,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     R5,A
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??memcpy?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  926 			
//  927 			*payload_len = remain_len - 2 - *topic_len;			//为payload分配内存
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     A,?V0 + 4
        ADD     A,#-0x2
        MOV     R2,A
        MOV     A,?V0 + 5
        ADDC    A,#-0x1
        MOV     R3,A
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R2
        CLR     C
        SUBB    A,R0
        MOV     R0,A
        MOV     A,R3
        SUBB    A,R1
        MOV     R1,A
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
//  928 			if((payload == NULL) || (*payload_len)>MAX_REQ_PAYLOAD_LEN)//如果失败
        MOV     A,?V0 + 10
        ORL     A,?V0 + 11
        JZ      ??MQTT_UnPacketPublish_11
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        CLR     C
        MOVX    A,@DPTR
        SUBB    A,#-0x69
        INC     DPTR
        MOVX    A,@DPTR
        SUBB    A,#0x0
        JC      ??MQTT_UnPacketPublish_12
//  929 			{
//  930         debug("UnPacketPublish 22.\r\n");
??MQTT_UnPacketPublish_11:
        ; Setup parameters for call to function debug
        MOV     R2,#`?<Constant "UnPacketPublish 22.\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "UnPacketPublish 22.\\r\\n">` >> 8) & 0xff
        LCALL   ??debug?relay
//  931 				return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  932 			}
//  933 			
//  934 			memset(payload, 0, *payload_len + 1);
??MQTT_UnPacketPublish_12:
        ; Setup parameters for call to function memset
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,?V0 + 10
        MOV     R3,?V0 + 11
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  935 			memcpy(payload, (int8 *)msgPtr + 2 + *topic_len, *payload_len);
        ; Setup parameters for call to function memcpy
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,?V0 + 0
        ADD     A,R0
        MOV     R0,A
        MOV     A,?V0 + 1
        ADDC    A,R1
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x2
        MOV     R4,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R5,A
        MOV     R2,?V0 + 10
        MOV     R3,?V0 + 11
        LCALL   ??memcpy?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  936 			
//  937 		break;
        LJMP    ??MQTT_UnPacketPublish_13 & 0xFFFF
//  938 
//  939 		case MQTT_QOS_LEVEL1:
//  940 		case MQTT_QOS_LEVEL2:
//  941 			
//  942 			if(*topic_len + 2 > remain_len)
??MQTT_UnPacketPublish_6:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,#0x2
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        CLR     A
        MOV     ?V0 + 6,A
        MOV     ?V0 + 7,A
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     R0,#?V0 + 4
        LCALL   ?UL_GT_X
        JNC     ??MQTT_UnPacketPublish_14
//  943 				return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  944 			
//  945 			*pkt_id = (uint16)msgPtr[*topic_len + 2] << 8 | msgPtr[*topic_len + 3];
??MQTT_UnPacketPublish_14:
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,?V0 + 0
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 1
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        CLR     A
        XCH     A,R2
        MOV     R3,A
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,?V0 + 0
        ADD     A,R0
        MOV     DPL,A
        MOV     A,?V0 + 1
        ADDC    A,R1
        MOV     DPH,A
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,R2
        ORL     A,R0
        MOV     R2,A
        MOV     A,R3
        ORL     A,R1
        MOV     R3,A
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     DPH,A
        MOV     DPL,R0
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
//  946 			if(pkt_id == 0)
        MOV     A,#0x24
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_UnPacketPublish_15
//  947 				return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  948 			
//  949 			//*topic = MQTT_MallocBuffer(*topic_len + 1);			//为topic分配内存
//  950 			if((topic == NULL) && (*topic_len)>MAX_CMDID_TOPIC_LEN)
??MQTT_UnPacketPublish_15:
        MOV     A,?V0 + 2
        ORL     A,?V0 + 3
        JNZ     ??MQTT_UnPacketPublish_16
        MOV     DPL,R6
        MOV     DPH,R7
        CLR     C
        MOVX    A,@DPTR
        SUBB    A,#0x47
        INC     DPTR
        MOVX    A,@DPTR
        SUBB    A,#0x0
        JC      ??MQTT_UnPacketPublish_16
//  951       {     
//  952         debug("UnPacketPublish 33.\r\n");
        ; Setup parameters for call to function debug
        MOV     R2,#`?<Constant "UnPacketPublish 33.\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "UnPacketPublish 33.\\r\\n">` >> 8) & 0xff
        LCALL   ??debug?relay
//  953 				return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  954       }
//  955       
//  956 			memset(topic, 0, *topic_len + 1);
??MQTT_UnPacketPublish_16:
        ; Setup parameters for call to function memset
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  957 			memcpy(topic, (int8 *)msgPtr + 2, *topic_len);		//复制数据
        ; Setup parameters for call to function memcpy
        MOV     DPL,R6
        MOV     DPH,R7
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     A,?V0 + 0
        ADD     A,#0x2
        MOV     R4,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     R5,A
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??memcpy?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  958 			
//  959 			*payload_len = remain_len - 4 - *topic_len;
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     A,?V0 + 4
        ADD     A,#-0x4
        MOV     R2,A
        MOV     A,?V0 + 5
        ADDC    A,#-0x1
        MOV     R3,A
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R2
        CLR     C
        SUBB    A,R0
        MOV     R0,A
        MOV     A,R3
        SUBB    A,R1
        MOV     R1,A
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        MOV     A,R0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R1
        MOVX    @DPTR,A
//  960 			if((payload == NULL) || (*payload_len>MAX_REQ_PAYLOAD_LEN))								//如果失败
        MOV     A,?V0 + 10
        ORL     A,?V0 + 11
        JZ      ??MQTT_UnPacketPublish_17
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        CLR     C
        MOVX    A,@DPTR
        SUBB    A,#-0x69
        INC     DPTR
        MOVX    A,@DPTR
        SUBB    A,#0x0
        JC      ??MQTT_UnPacketPublish_18
//  961 			{
//  962         debug("UnPacketPublish 44.\r\n");
??MQTT_UnPacketPublish_17:
        ; Setup parameters for call to function debug
        MOV     R2,#`?<Constant "UnPacketPublish 44.\\r\\n">` & 0xff
        MOV     R3,#(`?<Constant "UnPacketPublish 44.\\r\\n">` >> 8) & 0xff
        LCALL   ??debug?relay
//  963 				return 255;
        MOV     R1,#-0x1
        LJMP    ??MQTT_UnPacketPublish_2 & 0xFFFF
//  964 			}
//  965 			
//  966 			memset(payload, 0, *payload_len + 1);
??MQTT_UnPacketPublish_18:
        ; Setup parameters for call to function memset
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     ?V0 + 4,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,#0x0
        MOV     ?V0 + 5,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,?V0 + 10
        MOV     R3,?V0 + 11
        LCALL   ??memset?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  967 			memcpy(payload, (int8 *)msgPtr + 4 + *topic_len, *payload_len);
        ; Setup parameters for call to function memcpy
        MOV     DPL,?V0 + 8
        MOV     DPH,?V0 + 9
        LCALL   ?PUSH_XSTACK8_X_TWO
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,?V0 + 0
        ADD     A,R0
        MOV     R0,A
        MOV     A,?V0 + 1
        ADDC    A,R1
        MOV     R1,A
        MOV     A,R0
        ADD     A,#0x4
        MOV     R4,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R5,A
        MOV     R2,?V0 + 10
        MOV     R3,?V0 + 11
        LCALL   ??memcpy?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 28)
//  968 			
//  969 		break;
        SJMP    ??MQTT_UnPacketPublish_13
//  970 
//  971 		default:
//  972 			return 255;
??MQTT_UnPacketPublish_7:
        MOV     R1,#-0x1
        SJMP    ??MQTT_UnPacketPublish_2
//  973 	}
//  974 	
//  975 	if(strchr((int8 *)topic, '+') || strchr((int8 *)topic, '#'))
??MQTT_UnPacketPublish_13:
        ; Setup parameters for call to function strchr
        MOV     R4,#0x2b
        MOV     R5,#0x0
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??strchr?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        JNZ     ??MQTT_UnPacketPublish_19
        ; Setup parameters for call to function strchr
        MOV     R4,#0x23
        MOV     R5,#0x0
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??strchr?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,?V0 + 4
        ORL     A,?V0 + 5
        JZ      ??MQTT_UnPacketPublish_20
//  976 		return 255;
??MQTT_UnPacketPublish_19:
        MOV     R1,#-0x1
        SJMP    ??MQTT_UnPacketPublish_2
//  977 
//  978 	return 0;
??MQTT_UnPacketPublish_20:
        MOV     R1,#0x0
??MQTT_UnPacketPublish_2:
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 24)
        MOV     R7,#0x10
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock16
//  979 
//  980 }
//  981 
//  982 //==========================================================
//  983 //	函数名称：	MQTT_PacketPublishAck
//  984 //
//  985 //	函数功能：	Publish Ack消息组包
//  986 //
//  987 //	入口参数：	pkt_id：packet id
//  988 //				mqttPacket：包指针
//  989 //
//  990 //	返回参数：	0-成功		1-失败原因
//  991 //
//  992 //	说明：		当收到的Publish消息的QoS等级为1时，需要Ack回复
//  993 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  994 uint1 MQTT_PacketPublishAck(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketPublishAck:
        CFI Block cfiBlock17 Using cfiCommon0
        CFI Function MQTT_PacketPublishAck
        CODE
//  995 {
        FUNCALL MQTT_PacketPublishAck, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
//  996 
//  997 	MQTT_NewBuffer(mqttPacket, 4);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     DPTR,#__Constant_4
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
//  998 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketPublishAck_0
//  999 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketPublishAck_1 & 0xFFFF
// 1000 	
// 1001 /*************************************固定头部***********************************************/
// 1002 	
// 1003 	//固定头部----------------------头部消息-------------------------------------------------
// 1004 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBACK << 4;
??MQTT_PacketPublishAck_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x40
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1005 	
// 1006 	//固定头部----------------------剩余长度-------------------------------------------------
// 1007 	mqttPacket->_data[mqttPacket->_len++] = 2;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x2
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1008 	
// 1009 /*************************************可变头部***********************************************/
// 1010 	
// 1011 	//可变头部----------------------pkt_id长度-----------------------------------------------
// 1012 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1013 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1014 	
// 1015 	return 0;
        MOV     R1,#0x0
??MQTT_PacketPublishAck_1:
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock17
// 1016 
// 1017 }
// 1018 
// 1019 //==========================================================
// 1020 //	函数名称：	MQTT_UnPacketPublishAck
// 1021 //
// 1022 //	函数功能：	Publish Ack消息解包
// 1023 //
// 1024 //	入口参数：	rev_data：收到的数据
// 1025 //
// 1026 //	返回参数：	0-成功		1-失败原因
// 1027 //
// 1028 //	说明：		
// 1029 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1030 uint1 MQTT_UnPacketPublishAck(uint8 *rev_data)
MQTT_UnPacketPublishAck:
        CFI Block cfiBlock18 Using cfiCommon0
        CFI Function MQTT_UnPacketPublishAck
        CODE
// 1031 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1032 
// 1033 	if(rev_data[1] != 2)
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x2
        JZ      ??MQTT_UnPacketPublishAck_0
// 1034 		return 1;
        MOV     R1,#0x1
        SJMP    ??MQTT_UnPacketPublishAck_1
// 1035 
// 1036 	if(rev_data[2] == MOSQ_MSB(MQTT_PUBLISH_ID) && rev_data[3] == MOSQ_LSB(MQTT_PUBLISH_ID))
??MQTT_UnPacketPublishAck_0:
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JNZ     ??MQTT_UnPacketPublishAck_2
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xa
        JNZ     ??MQTT_UnPacketPublishAck_2
// 1037 		return 0;
        MOV     R1,#0x0
        SJMP    ??MQTT_UnPacketPublishAck_1
// 1038 	else
// 1039 		return 1;
??MQTT_UnPacketPublishAck_2:
        MOV     R1,#0x1
??MQTT_UnPacketPublishAck_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock18
// 1040 
// 1041 }
// 1042 
// 1043 //==========================================================
// 1044 //	函数名称：	MQTT_PacketPublishRec
// 1045 //
// 1046 //	函数功能：	Publish Rec消息组包
// 1047 //
// 1048 //	入口参数：	pkt_id：packet id
// 1049 //				mqttPacket：包指针
// 1050 //
// 1051 //	返回参数：	0-成功		1-失败原因
// 1052 //
// 1053 //	说明：		当收到的Publish消息的QoS等级为2时，先收到rec
// 1054 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1055 uint1 MQTT_PacketPublishRec(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketPublishRec:
        CFI Block cfiBlock19 Using cfiCommon0
        CFI Function MQTT_PacketPublishRec
        CODE
// 1056 {
        FUNCALL MQTT_PacketPublishRec, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
// 1057 
// 1058 	MQTT_NewBuffer(mqttPacket, 4);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     DPTR,#__Constant_4
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
// 1059 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketPublishRec_0
// 1060 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketPublishRec_1 & 0xFFFF
// 1061 	
// 1062 /*************************************固定头部***********************************************/
// 1063 	
// 1064 	//固定头部----------------------头部消息-------------------------------------------------
// 1065 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBREC << 4;
??MQTT_PacketPublishRec_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x50
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1066 	
// 1067 	//固定头部----------------------剩余长度-------------------------------------------------
// 1068 	mqttPacket->_data[mqttPacket->_len++] = 2;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x2
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1069 	
// 1070 /*************************************可变头部***********************************************/
// 1071 	
// 1072 	//可变头部----------------------pkt_id长度-----------------------------------------------
// 1073 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1074 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1075 	
// 1076 	return 0;
        MOV     R1,#0x0
??MQTT_PacketPublishRec_1:
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock19
// 1077 
// 1078 }
// 1079 
// 1080 //==========================================================
// 1081 //	函数名称：	MQTT_UnPacketPublishRec
// 1082 //
// 1083 //	函数功能：	Publish Rec消息解包
// 1084 //
// 1085 //	入口参数：	rev_data：接收到的数据
// 1086 //
// 1087 //	返回参数：	0-成功		1-失败
// 1088 //
// 1089 //	说明：		
// 1090 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1091 uint1 MQTT_UnPacketPublishRec(uint8 *rev_data)
MQTT_UnPacketPublishRec:
        CFI Block cfiBlock20 Using cfiCommon0
        CFI Function MQTT_UnPacketPublishRec
        CODE
// 1092 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1093 
// 1094 	if(rev_data[1] != 2)
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x2
        JZ      ??MQTT_UnPacketPublishRec_0
// 1095 		return 1;
        MOV     R1,#0x1
        SJMP    ??MQTT_UnPacketPublishRec_1
// 1096 
// 1097 	if(rev_data[2] == MOSQ_MSB(MQTT_PUBLISH_ID) && rev_data[3] == MOSQ_LSB(MQTT_PUBLISH_ID))
??MQTT_UnPacketPublishRec_0:
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JNZ     ??MQTT_UnPacketPublishRec_2
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xa
        JNZ     ??MQTT_UnPacketPublishRec_2
// 1098 		return 0;
        MOV     R1,#0x0
        SJMP    ??MQTT_UnPacketPublishRec_1
// 1099 	else
// 1100 		return 1;
??MQTT_UnPacketPublishRec_2:
        MOV     R1,#0x1
??MQTT_UnPacketPublishRec_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock20
// 1101 
// 1102 }
// 1103 
// 1104 //==========================================================
// 1105 //	函数名称：	MQTT_PacketPublishRel
// 1106 //
// 1107 //	函数功能：	Publish Rel消息组包
// 1108 //
// 1109 //	入口参数：	pkt_id：packet id
// 1110 //				mqttPacket：包指针
// 1111 //
// 1112 //	返回参数：	0-成功		1-失败原因
// 1113 //
// 1114 //	说明：		当收到的Publish消息的QoS等级为2时，先收到rec，再回复rel
// 1115 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1116 uint1 MQTT_PacketPublishRel(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketPublishRel:
        CFI Block cfiBlock21 Using cfiCommon0
        CFI Function MQTT_PacketPublishRel
        CODE
// 1117 {
        FUNCALL MQTT_PacketPublishRel, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
// 1118 
// 1119 	MQTT_NewBuffer(mqttPacket, 4);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     DPTR,#__Constant_4
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
// 1120 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketPublishRel_0
// 1121 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketPublishRel_1 & 0xFFFF
// 1122 	
// 1123 /*************************************固定头部***********************************************/
// 1124 	
// 1125 	//固定头部----------------------头部消息-------------------------------------------------
// 1126 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBREL << 4 | 0x02;
??MQTT_PacketPublishRel_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x62
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1127 	
// 1128 	//固定头部----------------------剩余长度-------------------------------------------------
// 1129 	mqttPacket->_data[mqttPacket->_len++] = 2;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x2
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1130 	
// 1131 /*************************************可变头部***********************************************/
// 1132 	
// 1133 	//可变头部----------------------pkt_id长度-----------------------------------------------
// 1134 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1135 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1136 	
// 1137 	return 0;
        MOV     R1,#0x0
??MQTT_PacketPublishRel_1:
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock21
// 1138 
// 1139 }
// 1140 
// 1141 //==========================================================
// 1142 //	函数名称：	MQTT_UnPacketPublishRel
// 1143 //
// 1144 //	函数功能：	Publish Rel消息解包
// 1145 //
// 1146 //	入口参数：	rev_data：接收到的数据
// 1147 //
// 1148 //	返回参数：	0-成功		1-失败
// 1149 //
// 1150 //	说明：		
// 1151 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1152 uint1 MQTT_UnPacketPublishRel(uint8 *rev_data, uint16 pkt_id)
MQTT_UnPacketPublishRel:
        CFI Block cfiBlock22 Using cfiCommon0
        CFI Function MQTT_UnPacketPublishRel
        CODE
// 1153 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1154 
// 1155 	if(rev_data[1] != 2)
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x2
        JZ      ??MQTT_UnPacketPublishRel_0
// 1156 		return 1;
        MOV     R1,#0x1
        SJMP    ??MQTT_UnPacketPublishRel_1
// 1157 
// 1158 	if(rev_data[2] == MOSQ_MSB(pkt_id) && rev_data[3] == MOSQ_LSB(pkt_id))
??MQTT_UnPacketPublishRel_0:
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-6
        MOV     A,R4
        MOV     R0,A
        MOV     A,R5
        MOV     R1,A
        CLR     A
        MOV     A,R1
        MOV     R0,A
        POP     A
        CFI CFA_SP SP+-5
        XRL     A,R0
        JNZ     ??MQTT_UnPacketPublishRel_2
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-6
        MOV     A,R4
        MOV     R0,A
        POP     A
        CFI CFA_SP SP+-5
        XRL     A,R0
        JNZ     ??MQTT_UnPacketPublishRel_2
// 1159 		return 0;
        MOV     R1,#0x0
        SJMP    ??MQTT_UnPacketPublishRel_1
// 1160 	else
// 1161 		return 1;
??MQTT_UnPacketPublishRel_2:
        MOV     R1,#0x1
??MQTT_UnPacketPublishRel_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock22
// 1162 
// 1163 }
// 1164 
// 1165 //==========================================================
// 1166 //	函数名称：	MQTT_PacketPublishComp
// 1167 //
// 1168 //	函数功能：	Publish Comp消息组包
// 1169 //
// 1170 //	入口参数：	pkt_id：packet id
// 1171 //				mqttPacket：包指针
// 1172 //
// 1173 //	返回参数：	0-成功		1-失败原因
// 1174 //
// 1175 //	说明：		当收到的Publish消息的QoS等级为2时，先收到rec，再回复rel
// 1176 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1177 uint1 MQTT_PacketPublishComp(uint16 pkt_id, MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketPublishComp:
        CFI Block cfiBlock23 Using cfiCommon0
        CFI Function MQTT_PacketPublishComp
        CODE
// 1178 {
        FUNCALL MQTT_PacketPublishComp, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 20, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 20, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
// 1179 
// 1180 	MQTT_NewBuffer(mqttPacket, 4);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     DPTR,#__Constant_4
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 20)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
// 1181 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketPublishComp_0
// 1182 		return 1;
        MOV     R1,#0x1
        LJMP    ??MQTT_PacketPublishComp_1 & 0xFFFF
// 1183 	
// 1184 /*************************************固定头部***********************************************/
// 1185 	
// 1186 	//固定头部----------------------头部消息-------------------------------------------------
// 1187 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PUBCOMP << 4;
??MQTT_PacketPublishComp_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x70
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1188 	
// 1189 	//固定头部----------------------剩余长度-------------------------------------------------
// 1190 	mqttPacket->_data[mqttPacket->_len++] = 2;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x2
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1191 	
// 1192 /*************************************可变头部***********************************************/
// 1193 	
// 1194 	//可变头部----------------------pkt_id长度-----------------------------------------------
// 1195 	mqttPacket->_data[mqttPacket->_len++] = pkt_id >> 8;
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        CLR     A
        MOV     A,?V0 + 1
        MOV     R0,?V0 + 1
        MOV     A,?V0 + 1
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 1
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1196 	mqttPacket->_data[mqttPacket->_len++] = pkt_id & 0xff;
        MOV     A,?V0 + 0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 4
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 5
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,?V0 + 0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_TO_X
// 1197 	
// 1198 	return 0;
        MOV     R1,#0x0
??MQTT_PacketPublishComp_1:
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock23
// 1199 
// 1200 }
// 1201 
// 1202 //==========================================================
// 1203 //	函数名称：	MQTT_UnPacketPublishComp
// 1204 //
// 1205 //	函数功能：	Publish Comp消息解包
// 1206 //
// 1207 //	入口参数：	rev_data：接收到的数据
// 1208 //
// 1209 //	返回参数：	0-成功		1-失败
// 1210 //
// 1211 //	说明：		
// 1212 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1213 uint1 MQTT_UnPacketPublishComp(uint8 *rev_data)
MQTT_UnPacketPublishComp:
        CFI Block cfiBlock24 Using cfiCommon0
        CFI Function MQTT_UnPacketPublishComp
        CODE
// 1214 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1215 
// 1216 	if(rev_data[1] != 2)
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x2
        JZ      ??MQTT_UnPacketPublishComp_0
// 1217 		return 1;
        MOV     R1,#0x1
        SJMP    ??MQTT_UnPacketPublishComp_1
// 1218 
// 1219 	if(rev_data[2] == MOSQ_MSB(MQTT_PUBLISH_ID) && rev_data[3] == MOSQ_LSB(MQTT_PUBLISH_ID))
??MQTT_UnPacketPublishComp_0:
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JNZ     ??MQTT_UnPacketPublishComp_2
        MOV     DPL,R2
        MOV     DPH,R3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xa
        JNZ     ??MQTT_UnPacketPublishComp_2
// 1220 		return 0;
        MOV     R1,#0x0
        SJMP    ??MQTT_UnPacketPublishComp_1
// 1221 	else
// 1222 		return 1;
??MQTT_UnPacketPublishComp_2:
        MOV     R1,#0x1
??MQTT_UnPacketPublishComp_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock24
// 1223 
// 1224 }
// 1225 
// 1226 //==========================================================
// 1227 //	函数名称：	MQTT_PacketPing
// 1228 //
// 1229 //	函数功能：	心跳请求组包
// 1230 //
// 1231 //	入口参数：	mqttPacket：包指针
// 1232 //
// 1233 //	返回参数：	0-成功		1-失败
// 1234 //
// 1235 //	说明：		
// 1236 //==========================================================

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1237 uint1 MQTT_PacketPing(MQTT_PACKET_STRUCTURE *mqttPacket)
MQTT_PacketPing:
        CFI Block cfiBlock25 Using cfiCommon0
        CFI Function MQTT_PacketPing
        CODE
// 1238 {
        FUNCALL MQTT_PacketPing, MQTT_NewBuffer
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 1239 
// 1240 	MQTT_NewBuffer(mqttPacket, 2);
        ; Setup parameters for call to function MQTT_NewBuffer
        MOV     DPTR,#__Constant_2
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??MQTT_NewBuffer?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
// 1241 	if(mqttPacket->_data == NULL)
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R0
        ORL     A,R1
        JNZ     ??MQTT_PacketPing_0
// 1242 		return 1;
        MOV     R1,#0x1
        SJMP    ??MQTT_PacketPing_1
// 1243 	
// 1244 /*************************************固定头部***********************************************/
// 1245 	
// 1246 	//固定头部----------------------头部消息-------------------------------------------------
// 1247 	mqttPacket->_data[mqttPacket->_len++] = MQTT_PKT_PINGREQ << 4;
??MQTT_PacketPing_0:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#-0x40
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
// 1248 	
// 1249 	//固定头部----------------------剩余长度-------------------------------------------------
// 1250 	mqttPacket->_data[mqttPacket->_len++] = 0;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        ADD     A,?V0 + 0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,?V0 + 1
        MOV     DPL,R0
        MOV     DPH,A
        MOV     A,#0x0
        MOVX    @DPTR,A
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOV     R0,#?V0 + 0
        LCALL   ?L_ADD_TO_X
// 1251 	
// 1252 	return 0;
        MOV     R1,#0x0
??MQTT_PacketPing_1:
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock25
// 1253 
// 1254 }

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_NewBuffer?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_NewBuffer

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_DeleteBuffer?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_DeleteBuffer

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_DumpLength?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_DumpLength

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_ReadLength?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_ReadLength

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketRecv?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketRecv

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketConnect?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketConnect

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketDisConnect?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketDisConnect

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketConnectAck?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketConnectAck

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketSaveData?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketSaveData

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketCmd?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketCmd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketCmdResp?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketCmdResp

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketSubscribe?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketSubscribe

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketSubscribe?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketSubscribe

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketUnSubscribe?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketUnSubscribe

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketUnSubscribe?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketUnSubscribe

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketPublish?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketPublish

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketPublish?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketPublish

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketPublishAck?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketPublishAck

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketPublishAck?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketPublishAck

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketPublishRec?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketPublishRec

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketPublishRec?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketPublishRec

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketPublishRel?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketPublishRel

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketPublishRel?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketPublishRel

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketPublishComp?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketPublishComp

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_UnPacketPublishComp?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_UnPacketPublishComp

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??MQTT_PacketPing?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    MQTT_PacketPing

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "$creq">`:
        DB "$creq"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "">`:
        DB ""

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
`?<Constant "$dp">`:
        DB "$dp"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "UnPacket mem 11\\r\\n">`:
        DB "UnPacket mem 11\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "UnPacket mem 22\\r\\n">`:
        DB "UnPacket mem 22\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant {0}>`:
        DB 0
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0, 0, 0, 0, 0, 0, 0, 0
        DB 0

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "$crsp/%s">`:
        DB "$crsp/%s"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "UnPacketPublish 11.\\r\\n">`:
        DB "UnPacketPublish 11.\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "UnPacketPublish 22.\\r\\n">`:
        DB "UnPacketPublish 22.\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "UnPacketPublish 33.\\r\\n">`:
        DB "UnPacketPublish 33.\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA8
`?<Constant "UnPacketPublish 44.\\r\\n">`:
        DB "UnPacketPublish 44.\015\012"

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_0:
        DD 0

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_1:
        DD 1

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_5:
        DD 5

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_200000:
        DD 2097152

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_4:
        DD 4

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_2:
        DD 2

        RSEG XDATA_ROM_C:CONST:REORDER:NOROOT(0)
        DATA32
__Constant_3:
        DD 3

        END
// 
// 9 832 bytes in segment BANKED_CODE
//   156 bytes in segment BANK_RELAYS
//   222 bytes in segment XDATA_ROM_C
// 
// 9 988 bytes of CODE  memory
//   194 bytes of CONST memory (+ 28 bytes shared)
//
//Errors: none
//Warnings: 42
